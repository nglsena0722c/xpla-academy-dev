"use strict";(self.webpackChunkxpla_academy=self.webpackChunkxpla_academy||[]).push([[48],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>g});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),p=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=p(e.components);return r.createElement(l.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,s=e.originalType,l=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),c=p(n),m=a,g=c["".concat(l,".").concat(m)]||c[m]||u[m]||s;return n?r.createElement(g,o(o({ref:t},d),{},{components:n})):r.createElement(g,o({ref:t},d))}));function g(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var s=n.length,o=new Array(s);o[0]=m;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[c]="string"==typeof e?e:a,o[1]=i;for(var p=2;p<s;p++)o[p]=n[p];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},34673:(e,t,n)=>{n.d(t,{Z:()=>g});var r=n(87462),a=n(67294),s=n(86010),o=n(72389),i=n(86043);const l={details:"details_lb9f",isBrowser:"isBrowser_bmU9",collapsibleContent:"collapsibleContent_i85q"};function p(e){return!!e&&("SUMMARY"===e.tagName||p(e.parentElement))}function d(e,t){return!!e&&(e===t||d(e.parentElement,t))}function c(e){let{summary:t,children:n,...c}=e;const u=(0,o.Z)(),m=(0,a.useRef)(null),{collapsed:g,setCollapsed:v}=(0,i.u)({initialState:!c.open}),[k,C]=(0,a.useState)(c.open),x=a.isValidElement(t)?t:a.createElement("summary",null,t??"Details");return a.createElement("details",(0,r.Z)({},c,{ref:m,open:k,"data-collapsed":g,className:(0,s.Z)(l.details,u&&l.isBrowser,c.className),onMouseDown:e=>{p(e.target)&&e.detail>1&&e.preventDefault()},onClick:e=>{e.stopPropagation();const t=e.target;p(t)&&d(t,m.current)&&(e.preventDefault(),g?(v(!1),C(!0)):v(!0))}}),x,a.createElement(i.z,{lazy:!1,collapsed:g,disableSSRStyle:!0,onCollapseTransitionEnd:e=>{v(e),C(!e)}},a.createElement("div",{className:l.collapsibleContent},n)))}const u={details:"details_b_Ee"},m="alert alert--info";function g(e){let{...t}=e;return a.createElement(c,(0,r.Z)({},t,{className:(0,s.Z)(m,u.details,t.className)}))}},12457:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>m,frontMatter:()=>o,metadata:()=>l,toc:()=>d});var r=n(87462),a=(n(67294),n(3905)),s=n(34673);const o={sidebar_position:5},i="Convert \uae30\ub2a5 \uc774\ud574\ud558\uae30",l={unversionedId:"tutorial/deep-understand-xpla/convert",id:"tutorial/deep-understand-xpla/convert",title:"Convert \uae30\ub2a5 \uc774\ud574\ud558\uae30",description:"Convert\ub780 \ubb34\uc5c7\uc778\uac00\uc694?",source:"@site/docs/3-tutorial/3-deep-understand-xpla/5-convert.mdx",sourceDirName:"3-tutorial/3-deep-understand-xpla",slug:"/tutorial/deep-understand-xpla/convert",permalink:"/xpla-academy-dev/ko-kr/docs/tutorial/deep-understand-xpla/convert",draft:!1,tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Cosmwasm \ucee8\ud2b8\ub799\ud2b8 \uc791\uc131 \ubc0f \ube4c\ub4dc\ud558\uae30",permalink:"/xpla-academy-dev/ko-kr/docs/tutorial/deep-understand-xpla/write-contract"},next:{title:"Swap \uae30\ub2a5 \uad6c\ud604\ud558\uae30",permalink:"/xpla-academy-dev/ko-kr/docs/tutorial/deep-understand-xpla/swap"}},p={},d=[{value:"Convert\ub780 \ubb34\uc5c7\uc778\uac00\uc694?",id:"what-is-convert",level:2},{value:"Convert \uacfc\uc815 \uc0b4\ud3b4\ubcf4\uae30",id:"convert-process",level:2},{value:"1. \uac8c\uc784 \uc7ac\ud654\ub97c CW20 \ud1a0\ud070\uc73c\ub85c \ubc14\uafb8\ub824\ub294 \uacbd\uc6b0",id:"convert-case1",level:3},{value:"2. CW20 \ud1a0\ud070\uc744 \uac8c\uc784 \uc7ac\ud654\ub85c \ubc14\uafb8\ub824\ub294 \uacbd\uc6b0",id:"convert-case2",level:3},{value:"\ub9c8\ubb34\ub9ac",id:"\ub9c8\ubb34\ub9ac",level:2}],c={toc:d},u="wrapper";function m(e){let{components:t,...n}=e;return(0,a.kt)(u,(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"convert-\uae30\ub2a5-\uc774\ud574\ud558\uae30"},"Convert \uae30\ub2a5 \uc774\ud574\ud558\uae30"),(0,a.kt)("h2",{id:"what-is-convert"},"Convert\ub780 \ubb34\uc5c7\uc778\uac00\uc694?"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"/#playgame"},"Break The Bricks \uac8c\uc784"),"\uc744 \ud574\ubcf4\uc168\ub098\uc694? \uac8c\uc784 \ud50c\ub808\uc774\ub97c \ud1b5\ud574 \uac8c\uc784 \uc7ac\ud654\uc778 ",(0,a.kt)("img",{src:"/xpla-academy-dev/img/3-tutorial/3-deep-understand-xpla/5-convert/academy-diamond.svg",width:"16",height:"16"}),"\ub97c \ud68d\ub4dd\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\n\uadf8\ub7ec\ub098 ",(0,a.kt)("img",{src:"/xpla-academy-dev/img/3-tutorial/3-deep-understand-xpla/5-convert/academy-diamond.svg",width:"16",height:"16"}),"\ub294 CW20 \ud1a0\ud070\uc774 \uc544\ub2cc \ub2e8\uc21c \uac8c\uc784 \ub370\uc774\ud130\uc5d0 \ubd88\uacfc\ud558\uace0, \ube14\ub85d\uccb4\uc778\uc5d0\uc11c \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.\n",(0,a.kt)("a",{parentName:"p",href:"/tool"},"Tool \ud398\uc774\uc9c0"),"\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 Convert \uae30\ub2a5\uc744 \ud1b5\ud574, \uc720\uc800\ub4e4\uc740 ",(0,a.kt)("img",{src:"/xpla-academy-dev/img/3-tutorial/3-deep-understand-xpla/5-convert/academy-diamond.svg",width:"16",height:"16"}),"\ub97c CW20 \ud1a0\ud070\uc778 ",(0,a.kt)("img",{src:"/xpla-academy-dev/img/3-tutorial/3-deep-understand-xpla/5-convert/academy-token.svg",width:"16",height:"16"}),"\uc73c\ub85c \uad50\ud658\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,a.kt)("p",null,"Convert \uacfc\uc815\uc740 \uc65c \ud544\uc694\ud560\uae4c\uc694?\n\uac8c\uc784 \ud50c\ub808\uc774 \ubcf4\uc0c1\uc73c\ub85c \ub9e4\ubc88 CW20 \ud1a0\ud070 ",(0,a.kt)("img",{src:"/xpla-academy-dev/img/3-tutorial/3-deep-understand-xpla/5-convert/academy-token.svg",width:"16",height:"16"}),"\uc744 \ub098\ub220\uc900\ub2e4\uba74, \ud56d\uc0c1 \ud2b8\ub79c\uc7ad\uc158 \uc2e4\ud589\uc744 \uc704\ud574 \uc218\uc218\ub8cc\uac00 \ubc1c\uc0dd\ud558\uac8c \ub429\ub2c8\ub2e4.\n\uc218\uc218\ub8cc \ubd80\ub2f4\uc744 \uc904\uc774\uae30 \uc704\ud574 \uac8c\uc784 \ud50c\ub808\uc774 \ubcf4\uc0c1\uc73c\ub85c \uac8c\uc784 \uc7ac\ud654\uc778 ",(0,a.kt)("img",{src:"/xpla-academy-dev/img/3-tutorial/3-deep-understand-xpla/5-convert/academy-diamond.svg",width:"16",height:"16"}),"\ub97c \uc804\ub2ec\ud558\uace0, ",(0,a.kt)("strong",{parentName:"p"},"\uc720\uc800\uac00 \uc6d0\ud560 \ub54c \uac8c\uc784 \uc7ac\ud654(",(0,a.kt)("img",{src:"/xpla-academy-dev/img/3-tutorial/3-deep-understand-xpla/5-convert/academy-diamond.svg",width:"16",height:"16"}),")\uc640 CW20 \ud1a0\ud070(",(0,a.kt)("img",{src:"/xpla-academy-dev/img/3-tutorial/3-deep-understand-xpla/5-convert/academy-token.svg",width:"16",height:"16"}),")\uc744 \uad50\ud658"),"\ud558\ub294 ",(0,a.kt)("strong",{parentName:"p"},"Convert")," \ubc29\uc2dd\uc744 \ub3c4\uc785\ud588\uc2b5\ub2c8\ub2e4.\n\uc774\ubc88 \ub2e8\uacc4\uc5d0\uc11c\ub294 Convert \uae30\ub2a5\uc744 \uc5b4\ub5bb\uac8c \uad6c\ud604\ud558\ub294\uc9c0 \uc0b4\ud3b4\ubcf4\uaca0\uc2b5\ub2c8\ub2e4."),(0,a.kt)("h2",{id:"convert-process"},"Convert \uacfc\uc815 \uc0b4\ud3b4\ubcf4\uae30"),(0,a.kt)("p",null,"\uc720\uc800\uac00 Convert\ub97c \uc694\uccad\ud558\ub294 \uacbd\uc6b0\ub294 \ub450 \uac00\uc9c0\uc785\ub2c8\ub2e4. "),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"/docs/tutorial/deep-understand-xpla/convert#convert-case1"},"1. \uac8c\uc784 \uc7ac\ud654(",(0,a.kt)("img",{src:"/xpla-academy-dev/img/3-tutorial/3-deep-understand-xpla/5-convert/academy-diamond.svg",width:"16",height:"16"}),")\ub97c CW20 \ud1a0\ud070(",(0,a.kt)("img",{src:"/xpla-academy-dev/img/3-tutorial/3-deep-understand-xpla/5-convert/academy-token.svg",width:"16",height:"16"}),")\uc73c\ub85c \ubc14\uafb8\ub824\ub294 \uacbd\uc6b0")),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"/docs/tutorial/deep-understand-xpla/convert#convert-case2"},"2. CW20 \ud1a0\ud070(",(0,a.kt)("img",{src:"/xpla-academy-dev/img/3-tutorial/3-deep-understand-xpla/5-convert/academy-token.svg",width:"16",height:"16"}),")\uc744 \uac8c\uc784 \uc7ac\ud654(",(0,a.kt)("img",{src:"/xpla-academy-dev/img/3-tutorial/3-deep-understand-xpla/5-convert/academy-diamond.svg",width:"16",height:"16"}),")\ub85c \ubc14\uafb8\ub824\ub294 \uacbd\uc6b0")),(0,a.kt)("h3",{id:"convert-case1"},"1. \uac8c\uc784 \uc7ac\ud654\ub97c CW20 \ud1a0\ud070\uc73c\ub85c \ubc14\uafb8\ub824\ub294 \uacbd\uc6b0"),(0,a.kt)("p",null,"\uba3c\uc800 1\ubc88 \uacfc\uc815\uc744 \uc790\uc138\ud788 \uc0b4\ud3b4\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.\n\uc720\uc800\uac00 \ubcf4\uc720\ud55c \uac8c\uc784 \uc7ac\ud654(",(0,a.kt)("img",{src:"/xpla-academy-dev/img/3-tutorial/3-deep-understand-xpla/5-convert/academy-diamond.svg",width:"16",height:"16"}),")\uc758 \uc591\uc740, \uac8c\uc784\uc744 \uc6b4\uc601\ud558\ub294 \uce21\uc758 \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc5d0 \uae30\ub85d\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4.\n\ubc18\uba74, CW20 \ud1a0\ud070(",(0,a.kt)("img",{src:"/xpla-academy-dev/img/3-tutorial/3-deep-understand-xpla/5-convert/academy-token.svg",width:"16",height:"16"}),")\uc758 \ubcf4\uc720\ub7c9\uc740 XPLA \ube14\ub85d\uccb4\uc778\uc5d0 \uae30\ub85d\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4.\n\ub530\ub77c\uc11c \uac8c\uc784 \uc7ac\ud654(",(0,a.kt)("img",{src:"/xpla-academy-dev/img/3-tutorial/3-deep-understand-xpla/5-convert/academy-diamond.svg",width:"16",height:"16"}),")\ub97c CW20 \ud1a0\ud070(",(0,a.kt)("img",{src:"/xpla-academy-dev/img/3-tutorial/3-deep-understand-xpla/5-convert/academy-token.svg",width:"16",height:"16"}),")\uc73c\ub85c \ubc14\uafb8\ub824\uba74, \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc5d0 \uae30\ub85d\ub41c \uc720\uc800\uc758 \uac8c\uc784 \uc7ac\ud654(",(0,a.kt)("img",{src:"/xpla-academy-dev/img/3-tutorial/3-deep-understand-xpla/5-convert/academy-diamond.svg",width:"16",height:"16"}),") \ubcf4\uc720\ub7c9\uc744 \uac10\uc18c\uc2dc\ud0a4\uace0, \uc720\uc800 \uc9c0\uac11\uc73c\ub85c CW20 \ud1a0\ud070(",(0,a.kt)("img",{src:"/xpla-academy-dev/img/3-tutorial/3-deep-understand-xpla/5-convert/academy-token.svg",width:"16",height:"16"}),")\uc744 \ubcf4\ub0b4\uc8fc\uc5b4\uc57c \ud569\ub2c8\ub2e4."),(0,a.kt)("p",null,"\uc77c\ubc18\uc801\uc73c\ub85c \ube14\ub85d\uccb4\uc778\uc5d0\uc11c \ud1a0\ud070\uc744 \ubcf4\ub0bc \ub54c\ub294 \ubcf4\ub0b4\ub294 \uc9c0\uac11\uc774 \ud2b8\ub79c\uc7ad\uc158 \uc218\uc218\ub8cc\ub97c \uac10\ub2f9\ud569\ub2c8\ub2e4. \uadf8\ub7ec\ub098 Convert\uc5d0\uc11c\ub294 \ud1a0\ud070\uc744 \ubc1b\ub294 \uc720\uc800\uac00 \uc218\uc218\ub8cc\ub97c \ub0c5\ub2c8\ub2e4.\n\ub9cc\uc57d \uac8c\uc784\uc744 \uc6b4\uc601\ud558\ub294 \uce21\uc774 Convert \uc218\uc218\ub8cc\ub97c \ubaa8\ub450 \ubd80\ub2f4\ud55c\ub2e4\uba74, Convert\ud558\ub824\ub294 \uc720\uc800\uac00 \ub9ce\uc544\uc9c8\uc218\ub85d \uc218\uc218\ub8cc \uc9c0\ucd9c\uc774 \ucee4\uc838 \uac8c\uc784 \uc6b4\uc601\uc774 \uc5b4\ub824\uc6cc\uc9c0\uae30 \ub54c\ubb38\uc785\ub2c8\ub2e4.\n\uadf8\ub7ec\ubbc0\ub85c Convert \ud2b8\ub79c\uc7ad\uc158\uc740 ",(0,a.kt)("u",null,"CW20 \ud1a0\ud070\uc744 \ubcf4\ub0b4\ub294 \uac8c\uc784 \uc6b4\uc601 \uc9c0\uac11\uc758 \uc11c\uba85"),"\uacfc ",(0,a.kt)("u",null,"\ud2b8\ub79c\uc7ad\uc158 \uc218\uc218\ub8cc\ub97c \ubd80\ub2f4\ud558\ub294 \uc720\uc800 \uc9c0\uac11\uc758 \uc11c\uba85")," \ubaa8\ub450\uac00 \ud544\uc694\ud569\ub2c8\ub2e4."),(0,a.kt)("p",null,"1\ubc88 \uacfc\uc815 \uc804\uccb4 \uad6c\uc870\ub97c \uadf8\ub9bc\uc73c\ub85c \uadf8\ub824\ubcf4\uba74 \uc544\ub798\uc640 \uac19\uc2b5\ub2c8\ub2e4. \ubcf5\uc7a1\ud574\ubcf4\uc774\uc9c0\ub9cc, \ud558\ub098\ud558\ub098\uc529 \uc0b4\ud3b4\ubcf4\uba74 \uc5b4\ub835\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."),(0,a.kt)("mermaid",{value:"sequenceDiagram\n    actor U as User Client App;\n    participant C as Convert server;\n    participant D as Database(DB);\n    U->>C: 1. \uac8c\uc784 \uc7ac\ud654\ub97c CW20 \ud1a0\ud070\uc73c\ub85c<br/> \ubc14\uafb8\ub294 Convert \uc694\uccad \n    C->>D: 2. DB\uc5d0\uc11c \uc720\uc800\uac00 \uc801\uc808\ud55c \uac8c\uc784 \uc7ac\ud654\ub97c<br/> \ubcf4\uc720\ud558\uace0 \uc788\ub294\uc9c0 \ud655\uc778 \ud6c4, \uc694\uccad \uc218\ub7c9\ub9cc\ud07c<br/> \uc720\uc800\uac00 \ubcf4\uc720\ud55c \uc7ac\ud654\ub97c \uac10\uc18c\uc2dc\ud0b4.\n    Note over C: 3. \uac8c\uc784 \uc6b4\uc601 \uc9c0\uac11\uc774 \uc720\uc800 \uc9c0\uac11\uc73c\ub85c<br/> CW20 \ud1a0\ud070\uc744 \uc804\uc1a1\ud558\ub294 unsigned \ud2b8\ub79c\uc7ad\uc158 \uc0dd\uc131\n    C->>U: 4. \uc720\uc800\uc5d0\uac8c unsigned \ud2b8\ub79c\uc7ad\uc158\uc744 \uc804\ub2ec\n    Note over U: 5. \uc720\uc800\ub294 unsigned \ud2b8\ub79c\uc7ad\uc158\uc5d0 \uc11c\uba85<br/>(\ud2b8\ub79c\uc7ad\uc158 \uc218\uc218\ub8cc \ubd80\ub2f4\uc5d0 \ub3d9\uc758)\n    U->>C: 6. \uc720\uc800 \uc9c0\uac11 \uc11c\uba85\uc774 \ud3ec\ud568\ub41c \ud2b8\ub79c\uc7ad\uc158\uc744 \ub2e4\uc2dc \uc804\ub2ec\n    critical Sequence Mismatch \ubc29\uc9c0\n        Note over D: DB\ub294 \uac8c\uc784 \uc6b4\uc601 \uc9c0\uac11\uc758 <br/>Sequence \uac12\uc744 \uc800\uc7a5\ud558\uace0 \uc788\uc74c\n        C->>D: 7. DB\uc5d0 Lock\uc744 \uac78\uace0,<br/> Sequence \uac12\uc744 \uc694\uccad\n        D->>C: Sequence \uac12 \uc804\ub2ec\n        Note over C: 8. Sequence \uac12\uc744 \uc774\uc6a9\ud558\uc5ec <br/> \ud2b8\ub79c\uc7ad\uc158\uc5d0 \uac8c\uc784 \uc6b4\uc601 \uc9c0\uac11 \uc11c\uba85 \ucd94\uac00\n        Note over C: 9. \uc720\uc800 \uc9c0\uac11 \uc11c\uba85\uacfc \uac8c\uc784 \uc6b4\uc601 \uc9c0\uac11 \uc11c\uba85\uc774 \ud3ec\ud568\ub41c <br/>\ud2b8\ub79c\uc7ad\uc158\uc744 XPLA \ub124\ud2b8\uc6cc\ud06c\uc5d0 \uc804\ud30c\n        C->>D: 10. DB\uc758 Sequence \uac12\uc744<br/> 1\ub9cc\ud07c \uc99d\uac00\uc2dc\ud0a4\uace0 Lock\uc744 \ud574\uc81c\ud568\n    end\n    C->>U: 11. \ud2b8\ub79c\uc7ad\uc158 \uacb0\uacfc\ub97c \uc720\uc800\uc5d0\uac8c \uc804\ub2ec"}),(0,a.kt)("br",null),(0,a.kt)("admonition",{type:"danger"},(0,a.kt)("p",{parentName:"admonition"},"\uc608\uc81c\ub294 \ub2e8\uc21c\ud788 Convert \uae30\ub2a5\uc758 \uad6c\ud604 \ubc29\ubc95 \uc911 \ud55c \uac00\uc9c0\uc77c \ubfd0\uc774\uba70, \uc608\uc678 \ucc98\ub9ac \ub4f1 \uc0dd\ub7b5\ub41c \ubd80\ubd84\ub3c4 \ub9ce\uc2b5\ub2c8\ub2e4. \ud558\ub098\uc758 \uc815\ud615\ud654\ub41c \ubc29\ubc95\uc774 \uc788\ub294 \uac83\uc774 \uc544\ub2c8\uba70, API\ub098 \ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc124\uacc4 \ub4f1\uc740 \uac8c\uc784 \uc885\ub958\uc5d0 \ub530\ub77c \ub2ec\ub77c\uc9c8 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ub530\ub77c\uc11c \uc608\uc81c \ucf54\ub4dc\ub97c \ucc38\uace0\ud558\uc5ec, \uc5ec\ub7ec\ubd84\uc758 \uae30\ud638\ub300\ub85c \uc218\uc815\ud558\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4.")),(0,a.kt)("p",null,"\uc704 \uad6c\uc870\ub3c4\uc5d0\uc11c Sequence mismatch\ub97c \ubc29\uc9c0\ud558\uae30 \uc704\ud574 \ub370\uc774\ud130\ubca0\uc774\uc2a4(DB)\uc5d0 Lock\uc744 \uac70\ub294 \ubd80\ubd84\uc774 \uc911\uc694\ud569\ub2c8\ub2e4.\n\ub2e4\uc218\uc758 \uc720\uc800\ub4e4\uc774 \ub3d9\uc2dc\uc5d0 Convert \uc694\uccad\uc744 \ubcf4\ub0b4\ub294 \uc0c1\ud669\uc744 \uac00\uc815\ud574\ubd05\uc2dc\ub2e4.\n\ubaa8\ub4e0 \uc694\uccad\uc744 \ube60\ub974\uac8c \ucc98\ub9ac\ud558\uae30 \uc704\ud574, \uac8c\uc784 \uc6b4\uc601 \uc9c0\uac11\ub3c4 Convert \ud2b8\ub79c\uc7ad\uc158 \uc5ec\ub7ec \uac1c\ub97c \ud55c\ubc88\uc5d0 \uc0dd\uc131\ud558\ub824 \ud55c\ub2e4\uba74 \uc5b4\ub5bb\uac8c \ub420\uae4c\uc694?\nSequence\uac00 \uc911\ubcf5\ub41c \ud2b8\ub79c\uc7ad\uc158\uc740 \ube14\ub85d\uccb4\uc778\uc5d0 \uae30\ub85d\ub420 \uc218 \uc5c6\uae30 \ub54c\ubb38\uc5d0, Sequence Mismatch Error\uac00 \ubc1c\uc0dd\ud558\uace0 \ud2b8\ub79c\uc7ad\uc158 \uc0dd\uc131\uc774 \uc6d0\ud65c\ud788 \ub418\uc9c0 \uc54a\uc744 \uac83\uc785\ub2c8\ub2e4.\n\ub530\ub77c\uc11c \uc694\uccad \uc21c\uc11c\ub300\ub85c Sequence \uac12\uc744 \ub2e4\ub974\uac8c \uc791\uc131\ud558\uc5ec \ud2b8\ub79c\uc7ad\uc158\uc744 \uc0dd\uc131\ud574\uc57c \ud569\ub2c8\ub2e4."),(0,a.kt)("p",null,"\ud2b9\ud788 \uac8c\uc784 \uc11c\ubc84 \uc6b4\uc601\uc744 \uc704\ud574 Load Balancer\ub97c \uc0ac\uc6a9\ud558\uc2e0\ub2e4\uba74, Sequence mismatch Error\uac00 \uc77c\uc5b4\ub098\uc9c0 \uc54a\ub3c4\ub85d \uc8fc\uc758\ud558\uc154\uc57c \ud569\ub2c8\ub2e4.\nSequence mismatch \uac1c\ub150\uc744 \ubaa8\ub974\uc2dc\uac70\ub098 \uad00\ub828 \ub0b4\uc6a9\uc774 \uc798 \uc774\ud574\uac00 \ub418\uc9c0 \uc54a\uc73c\uc2e0\ub2e4\uba74, ",(0,a.kt)("a",{parentName:"p",href:"/docs/tutorial/deep-understand-xpla/account-sequence"},"\ud2b8\ub79c\uc7ad\uc158\uc5d0\uc11c AccountNumber\uc640 Sequence \ud56d\ubaa9 \uc774\ud574\ud558\uae30")," \ub2e8\uacc4\ub97c \uc77d\uace0 \uc624\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4."),(0,a.kt)("p",null,"\uac01 \uacfc\uc815\uc774 \uc5b4\ub5bb\uac8c \uad6c\ud604\ub418\ub294\uc9c0 \uc544\ub798 Pseudo \ucf54\ub4dc\ub85c \uc54c\uc544\ubd05\uc2dc\ub2e4. (Pseudo \ucf54\ub4dc\uc774\uae30 \ub54c\ubb38\uc5d0 \ucf54\ub4dc \uadf8\ub300\ub85c \uc2e4\ud589\uc740 \ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.)"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"User Client App -> Convert Server : \uac8c\uc784 \uc7ac\ud654\ub97c CW20 \ud1a0\ud070\uc73c\ub85c \ubc14\uafb8\ub294 Convert \uc694\uccad "),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'{6} title="User Client App"',"{6}":!0,title:'"User',Client:!0,'App"':!0},'import { useWallet } from "@xpla/wallet-provider";\n\nconst { wallets } = useWallet();\nconst userAddress = wallets[0].xplaAddress;\n\nconst unsignedResponse = await axios.post(\n    "https://convertserver.com/gamecurrency-to-coin-unsigned", \n    {\n        userAddress: userAddress, \n        amount : 1,\n    }\n); \n')),(0,a.kt)("p",{parentName:"li"},"\uc720\uc800\uac00 \uac8c\uc784 \uc7ac\ud654\ub97c CW20 \ud1a0\ud070\uc73c\ub85c \uad50\ud658\ud558\ub824\uace0 \ud569\ub2c8\ub2e4. \uc720\uc800 \ud074\ub77c\uc774\uc5b8\ud2b8 \uc571\uc740 \uc720\uc800 \uc9c0\uac11 \uc8fc\uc18c(userAddress)\uc640 Convert\ud558\ub824\ub294 \uac8c\uc784 \uc7ac\ud654\ub7c9(amount)\uc744 \ub2f4\uc544, Convert Server\uc5d0 Post \uc694\uccad\uc744 \ubcf4\ub0c5\ub2c8\ub2e4."))),(0,a.kt)("br",null),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Convert Server -> Database(DB) : DB\uc5d0\uc11c \uc720\uc800\uac00 \uc801\uc808\ud55c \uac8c\uc784 \uc7ac\ud654\ub97c \ubcf4\uc720\ud558\uace0 \uc788\ub294\uc9c0 \ud655\uc778 \ud6c4, \uc694\uccad \uc218\ub7c9\ub9cc\ud07c \uc720\uc800\uac00 \ubcf4\uc720\ud55c \uc7ac\ud654\ub97c \uac10\uc18c\uc2dc\ud0b4."),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="Convert Server"',title:'"Convert','Server"':!0},"db.query('update user_info set game_currency = game_currency - ? where pid = ? ', [req.body.amount, playerId]);\n")),(0,a.kt)("p",{parentName:"li"},"Convert\ud558\ub824\ub294 \uc218\ub7c9(amount)\ubcf4\ub2e4 \ub9ce\uc774 \uc788\uc744 \ub54c, \uc720\uc800\uac00 \ubcf4\uc720\ud55c \uc7ac\ud654\ub7c9\uc744 \uac10\uc18c\uc2dc\ud0b5\ub2c8\ub2e4. "))),(0,a.kt)("br",null),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Convert Server : \uac8c\uc784 \uc6b4\uc601 \uc9c0\uac11\uc774 \uc720\uc800 \uc9c0\uac11\uc73c\ub85c CW20 \ud1a0\ud070\uc744 \uc804\uc1a1\ud558\ub294 unsigned \ud2b8\ub79c\uc7ad\uc158 \uc0dd\uc131"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'{6,17,29,31} title="Convert Server"',"{6,17,29,31}":!0,title:'"Convert','Server"':!0},'import { LCDClient, MsgExecuteContract, TxAPI, Fee } from "@xpla/xpla.js"\n\nconst lcd = new LCDClient({ chainID, URL });\nconst tx_api = new TxAPI(lcd);\n\nconst cw20TransferMsg = new MsgExecuteContract(\n        game_operator_address,\n        cw20_contract_address, \n        {\n            transfer: {\n                recipient : req.body.userAddress,\n                amount: String(req.body.amount)\n            }\n        }\n    )\n\nconst simul_fee = await tx_api.estimateFee(\n  [        \n    { \n        sequenceNumber: game_operator_address_sequence, \n        publicKey: game_operator_address_pubKey \n    }\n  ],\n  {\n    msgs: [cw20TransferMsg],\n    gasAdjustment: 1.5,         \n  }\n);\nconst fee = new Fee(simul_fee.gas_limit, simul_fee.amount.toString(), req.body.userAddress); // gas_limit, amount, payer\n\nconst tx = await lcd.tx.create([], {msgs: [cw20TransferMsg], fee }) // signers, options\n')),(0,a.kt)("p",{parentName:"li"},"\ud2b8\ub79c\uc7ad\uc158 \uc608\uc0c1 \uc218\uc218\ub8cc(simul_fee)\ub97c \uacc4\uc0b0\ud558\uace0, \uac8c\uc784 \uc6b4\uc601 \uc9c0\uac11(game_operator_address)\uc774 \uc720\uc800 \uc9c0\uac11(userAddress)\uc73c\ub85c CW20 \ud1a0\ud070\uc744 \uc804\uc1a1\ud558\ub294 \ud2b8\ub79c\uc7ad\uc158\uc744 \uc0dd\uc131\ud569\ub2c8\ub2e4.\n\uc774\ub54c fee \ubcc0\uc218\ub97c \ucd08\uae30\ud654\ud560 \ub54c, payer parameter\ub85c userAddress \ubcc0\uc218\ub97c \uc804\ub2ec\ud558\uc5ec \uc720\uc800 \uc9c0\uac11\uc774 \uc218\uc218\ub8cc \uc9c0\ubd88\uc790\uac00 \ub418\ub3c4\ub85d \uc124\uc815\ud569\ub2c8\ub2e4."))),(0,a.kt)("br",null),(0,a.kt)("ol",{start:4},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Convert Server -> User Client App: \uc720\uc800\uc5d0\uac8c unsigned \ud2b8\ub79c\uc7ad\uc158\uc744 \uc804\ub2ec"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="Convert Server"',title:'"Convert','Server"':!0},"const unsignedTx = Buffer.from(tx.toBytes()).toString('base64')\nconst result = { unsignedTx : unsignedTx }\nreturn result\n")),(0,a.kt)("p",{parentName:"li"},"User Client\uc758 Post \uc694\uccad\uc5d0 \ub300\ud55c \uc751\ub2f5\uc73c\ub85c, unsigned \ud2b8\ub79c\uc7ad\uc158\uc744 \uc804\ub2ec\ud569\ub2c8\ub2e4."))),(0,a.kt)("br",null),(0,a.kt)("ol",{start:5},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"User Client App : \uc720\uc800\ub294 unsigned \ud2b8\ub79c\uc7ad\uc158\uc5d0 \uc11c\uba85(\ud2b8\ub79c\uc7ad\uc158 \uc218\uc218\ub8cc \ubd80\ub2f4\uc5d0 \ub3d9\uc758)"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'{9,12} title="User Client App"',"{9,12}":!0,title:'"User',Client:!0,'App"':!0},'const unsignedResponse = await axios.post(unsignedUrl, unsignedPost);\nconst unsignedTx = unsignedResponse.data.unsignedTx;\n\nif (unsignedTx === undefined) {\n    throw new Error("Response is undefined!");\n}\nconst decodedTx = Tx.fromBuffer(Buffer.from(unsignedTx, "base64"));\n\nconst { result: signedTx, success } = await connectedWallet.sign({\n    msgs: decodedTx.body.messages,\n    fee: decodedTx.auth_info.fee,\n    signMode: SignMode.SIGN_MODE_LEGACY_AMINO_JSON,\n});\n')),(0,a.kt)("p",{parentName:"li"},"\uc720\uc800 \ud074\ub77c\uc774\uc5b8\ud2b8\ub294 Convert Server \uc751\ub2f5(unsignedResponse)\uc73c\ub85c \ubc1b\uc740 unsigned \ud2b8\ub79c\uc7ad\uc158\uc5d0 \uc11c\uba85\uc744 \uc9c4\ud589\ud569\ub2c8\ub2e4.\n",(0,a.kt)("a",{parentName:"p",href:"/docs/tutorial/deep-understand-xpla/convert#convert-case1"},"1\ubc88 \uacfc\uc815"),"\uc758 Convert \ud2b8\ub79c\uc7ad\uc158\uc740 \uc720\uc800 \uc9c0\uac11 \uc11c\uba85\uacfc \uac8c\uc784 \uc6b4\uc601 \uc9c0\uac11 \uc11c\uba85\uc774 \ud544\uc694\ud55c ",(0,a.kt)("a",{parentName:"p",href:"https://docs.cosmos.network/main/user/run-node/txs#signing-with-multiple-signers"},"\ub2e4\uc911 \uc11c\uba85"),"\uc774\uae30 \ub54c\ubb38\uc5d0, ",(0,a.kt)("strong",{parentName:"p"},"SignMode.SIGN_MODE_LEGACY_AMINO_JSON")," \ubcc0\uc218\ub85c \uc11c\uba85\ud558\ub294 \uac83\uc774 \uc911\uc694\ud569\ub2c8\ub2e4. "))),(0,a.kt)("br",null),(0,a.kt)("ol",{start:6},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"User Client App -> Convert Server : \uc720\uc800 \uc9c0\uac11 \uc11c\uba85\uc774 \ud3ec\ud568\ub41c \ud2b8\ub79c\uc7ad\uc158\uc744 \ub2e4\uc2dc \uc804\ub2ec"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'{3,6,7} title="User Client App"',"{3,6,7}":!0,title:'"User',Client:!0,'App"':!0},'const userSignedTx = Buffer.from(signedTx.toBytes()).toString("base64");\n\nconst res = await axios.post(\n    "https://convertserver.com/gamecurrency-to-coin-signed", \n    {\n        wallet: userAddress,\n        userSignedTx: userSignedTx,\n    }\n);\n')),(0,a.kt)("p",{parentName:"li"},"\uc720\uc800 \ud074\ub77c\uc774\uc5b8\ud2b8\uac00 \uc720\uc800 \uc9c0\uac11 \uc8fc\uc18c(userAddress)\uc640 \uc720\uc800 \uc9c0\uac11 \uc11c\uba85\uc744 \ucd94\uac00\ud55c \ud2b8\ub79c\uc7ad\uc158 \uc815\ubcf4(userSignedTx)\ub97c \ub2f4\uc544, Convert Server\uc5d0 Post \uc694\uccad\uc744 \ubcf4\ub0c5\ub2c8\ub2e4. "))),(0,a.kt)("br",null),(0,a.kt)("ol",{start:7},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Convert Server -> Database(DB) : DB\uc5d0 Lock\uc744 \uac78\uace0, Sequence \uac12\uc744 \uc694\uccad"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'{6,9} title="Convert Server"',"{6,9}":!0,title:'"Convert','Server"':!0},"const game_opeartor_mk = new MnemonicKey({ mnemonic: opeartorMnemonicKey })\nconst operatorWallet = lcd.wallet(game_opeartor_mk);\nconst operatorState = await operatorWallet.accountNumberAndSequence()\nconst operatorAccNum = operatorState.account_number   \n\nawait db.beginTransaction()\nlet txResult; \ntry {\n  const [data, ] = await db.query('SELECT sequence FROM operator_sequence WHERE accAddress = ? FOR UPDATE', [operatorWallet.key.accAddress]);\n  const operatorSeq = data[0].sequence\n")),(0,a.kt)("p",{parentName:"li"},"\uc608\uc81c\uc5d0\uc11c\ub294 beginTransaction \ud568\uc218\ub97c \uc774\uc6a9\ud558\uc5ec DB\uc5d0 Lock\uc744 \uac78\uace0, \ucffc\ub9ac\ub97c \ud1b5\ud574 \uac8c\uc784 \uc6b4\uc601 \uc9c0\uac11\uc758 Sequence \uac12\uc744 \uc804\ub2ec\ubc1b\uc2b5\ub2c8\ub2e4."))),(0,a.kt)("br",null),(0,a.kt)("ol",{start:8},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Convert Server : Sequence \uac12\uc744 \uc774\uc6a9\ud558\uc5ec \ud2b8\ub79c\uc7ad\uc158\uc5d0 \uac8c\uc784 \uc6b4\uc601 \uc9c0\uac11 \uc11c\uba85 \ucd94\uac00"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'{9,12} title="Convert Server"',"{9,12}":!0,title:'"Convert','Server"':!0},"try { // step 7\n  const [data, ] = await db.query('SELECT sequence FROM operator_sequence WHERE accAddress = ? FOR UPDATE', [operatorWallet.key.accAddress]); // step 7\n  const operatorSeq = data[0].sequence // step 7\n\n  const signOption: SignOptions = {\n    chainID: chainID,\n    accountNumber: operatorAccNum,\n    sequence: operatorSeq,\n    signMode: SignMode.SIGN_MODE_LEGACY_AMINO_JSON\n  }\n  \n  const tx = Tx.fromBuffer(Buffer.from(String(req.body.userSignedTx), 'base64'))\n  const allSignedTx = await operatorWallet.key.signTx(tx, signOption, false)\n  allSignedTx.signatures.reverse()\n  allSignedTx.auth_info.signer_infos.reverse()\n  ...\n")),(0,a.kt)("p",{parentName:"li"},"DB\uc5d0\uc11c \uc804\ub2ec\ubc1b\uc740 Sequence \uac12\uc73c\ub85c \ud2b8\ub79c\uc7ad\uc158\uc5d0 \uac8c\uc784 \uc6b4\uc601 \uc9c0\uac11 \uc11c\uba85\uc744 \ucd94\uac00\ud569\ub2c8\ub2e4.\n\uc774\ub54c\ub3c4 ",(0,a.kt)("strong",{parentName:"p"},"SignMode.SIGN_MODE_LEGACY_AMINO_JSON")," \ubcc0\uc218\ub85c \uc11c\uba85\ud574\uc8fc\uc5b4\uc57c \ud569\ub2c8\ub2e4."),(0,a.kt)(s.Z,{summary:"\ub9c8\uc9c0\ub9c9 \ubd80\ubd84\uc5d0\uc11c signatures\uc640 signer_infos\uc758 reverse() \ud568\uc218\ub97c \uc0ac\uc6a9\ud558\ub294 \uc774\uc720\ub294 \ubb34\uc5c7\uc778\uac00\uc694?",mdxType:"Details"},(0,a.kt)("p",{parentName:"li"},"\uc9c0\uae08\uae4c\uc9c0 \ud2b8\ub79c\uc7ad\uc158 \uc218\uc218\ub8cc \uc9c0\ubd88\uc744 \uc704\ud574 \uc720\uc800 \uc9c0\uac11\uc758 \uc11c\uba85\uc744 \uba3c\uc800 \ubc1b\uace0, CW20 \ud1a0\ud070 \uc804\ub2ec\uc758 \uc8fc\uccb4\uc778 \uac8c\uc784 \uc6b4\uc601 \uc9c0\uac11\uc758 \uc11c\uba85\uc744 \ub098\uc911\uc5d0 \ubc1b\uc558\uc2b5\ub2c8\ub2e4.\n\ud604\uc7ac \ud2b8\ub79c\uc7ad\uc158(allSignedTx \ubcc0\uc218) \ub0b4 \uc11c\uba85 \uc21c\uc11c\uac00 \uc720\uc800 \uc9c0\uac11 - \uac8c\uc784 \uc6b4\uc601 \uc9c0\uac11 \uc21c\uc785\ub2c8\ub2e4."),(0,a.kt)("p",{parentName:"li"},"CW20 \ud1a0\ud070\uc744 \uc804\ub2ec\ud558\ub294 \ud2b8\ub79c\uc7ad\uc158 Execute\uc5d0 \ud544\uc694\ud55c \uc11c\uba85\uc740 \uac8c\uc784 \uc6b4\uc601 \uc9c0\uac11\uc758 \uc11c\uba85\uc774\uace0, \uc720\uc800\uc758 \uc11c\uba85\uc740 \uc218\uc218\ub8cc \uc9c0\ubd88\uc744 \uc704\ud574 \ucd94\uac00\ub41c \uac83\uc785\ub2c8\ub2e4.\n\ub9cc\uc57d \uc720\uc800\uac00 \ud2b8\ub79c\uc7ad\uc158 \uc218\uc218\ub8cc\ub97c \ub0b4\uc9c0 \uc54a\uc558\ub2e4\uba74, CW20 \ud1a0\ud070\uc744 Transfer\ud558\ub294 \uac8c\uc784 \uc6b4\uc601 \uc9c0\uac11\uc758 \uc11c\uba85\ub9cc \uc788\uc5c8\uc73c\uba74 \ub429\ub2c8\ub2e4."),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",{parentName:"p",href:"https://github.com/xpladev/xpla/blob/main/third_party/proto/cosmos/tx/v1beta1/tx.proto#L174C1-L176C96"},"Cosmos SDK\uc5d0\uc11c \uc218\uc218\ub8cc \uc9c0\ubd88\uc790(Fee payer)\uac00 \ucd94\uac00\ub418\uc5b4\ub3c4, \ud2b8\ub79c\uc7ad\uc158 \uc11c\uba85 \uc21c\uc11c\uac00 \ubc14\ub00c\uc9c0\ub294 \uc54a\uc2b5\ub2c8\ub2e4."),"\n\ub530\ub77c\uc11c \uc62c\ubc14\ub978 \ud2b8\ub79c\uc7ad\uc158 \uc11c\uba85 \uc21c\uc11c\ub294 \uac8c\uc784 \uc6b4\uc601 \uc9c0\uac11 - \uc720\uc800 \uc9c0\uac11 \uc21c\uc785\ub2c8\ub2e4.\n\uc608\uc81c\uc5d0\uc11c\ub294 reverse \ud568\uc218\ub97c \uc774\uc6a9\ud558\uc5ec \uc11c\uba85 \uc21c\uc11c\ub97c \uc870\uc815\ud558\uc600\uace0, \ud2b8\ub79c\uc7ad\uc158 \uc0dd\uc131\uc774 \uc798 \ub418\ub294 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.")))),(0,a.kt)("br",null),(0,a.kt)("ol",{start:9},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Convert Server : \uc720\uc800 \uc9c0\uac11 \uc11c\uba85\uacfc \uac8c\uc784 \uc6b4\uc601 \uc9c0\uac11 \uc11c\uba85\uc774 \ud3ec\ud568\ub41c \ud2b8\ub79c\uc7ad\uc158\uc744 XPLA \ub124\ud2b8\uc6cc\ud06c\uc5d0 \uc804\ud30c"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="Convert Server"',title:'"Convert','Server"':!0},"txResult = await lcd.tx.broadcastSync(allSignedTx)      \n")),(0,a.kt)("p",{parentName:"li"},"\ud2b8\ub79c\uc7ad\uc158\uc744 XPLA \ub124\ud2b8\uc6cc\ud06c\uc5d0 \uc804\ud30c\ud569\ub2c8\ub2e4."))),(0,a.kt)("br",null),(0,a.kt)("ol",{start:10},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Convert Server -> Database(DB) : DB\uc758 Sequence \uac12\uc744 1\ub9cc\ud07c \uc99d\uac00\uc2dc\ud0a4\uace0 Lock\uc744 \ud574\uc81c\ud568"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="Convert Server"',title:'"Convert','Server"':!0},"  await db.execute(`UPDATE operator_sequence SET sequence = ? WHERE accAddress = ?`, [operatorSeq+1, operatorWallet.key.accAddress])\n\n  await db.commit(); \n  db.release();\n")),(0,a.kt)("p",{parentName:"li"},"\ud2b8\ub79c\uc7ad\uc158 \uc0dd\uc131\uc774 \uc81c\ub300\ub85c \uc774\ub8e8\uc5b4\uc9c0\uba74, DB \ub0b4 \uc800\uc7a5\ub41c \uac8c\uc784 \uc6b4\uc601 \uc9c0\uac11\uc758 Sequence \uac12\uc744 \uc218\uc815\ud558\uace0, DB\uc5d0 \uac78\ub824 \uc788\ub294 Lock\uc744 \ud574\uc81c\ud569\ub2c8\ub2e4."))),(0,a.kt)("br",null),(0,a.kt)("ol",{start:11},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Convert Server -> User Client App : \ud2b8\ub79c\uc7ad\uc158 \uacb0\uacfc\ub97c \uc720\uc800\uc5d0\uac8c \uc804\ub2ec"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="Convert Server"',title:'"Convert','Server"':!0},"return { txhash : txResult.txhash }\n")),(0,a.kt)("p",{parentName:"li"},"User Client\uc758 Post \uc694\uccad\uc5d0 \ub300\ud55c \uc751\ub2f5\uc73c\ub85c, \ud2b8\ub79c\uc7ad\uc158 \uc804\ud30c \uacb0\uacfc\ub97c \uc804\ub2ec\ud569\ub2c8\ub2e4."))),(0,a.kt)("br",null),(0,a.kt)("h3",{id:"convert-case2"},"2. CW20 \ud1a0\ud070\uc744 \uac8c\uc784 \uc7ac\ud654\ub85c \ubc14\uafb8\ub824\ub294 \uacbd\uc6b0"),(0,a.kt)("p",null,"2\ubc88 \uacfc\uc815\uc740 1\ubc88 \uacfc\uc815\ubcf4\ub2e4 \uac04\ub2e8\ud569\ub2c8\ub2e4. CW20 \ud1a0\ud070(",(0,a.kt)("img",{src:"/xpla-academy-dev/img/3-tutorial/3-deep-understand-xpla/5-convert/academy-token.svg",width:"16",height:"16"}),")\uc744 \uac8c\uc784 \uc7ac\ud654(",(0,a.kt)("img",{src:"/xpla-academy-dev/img/3-tutorial/3-deep-understand-xpla/5-convert/academy-diamond.svg",width:"16",height:"16"}),")\ub85c \ubc14\uafb8\ub824\uba74, \uc720\uc800 \uc9c0\uac11\uc774 \uac8c\uc784 \uc6b4\uc601 \uc9c0\uac11\uc73c\ub85c CW20 \ud1a0\ud070(",(0,a.kt)("img",{src:"/xpla-academy-dev/img/3-tutorial/3-deep-understand-xpla/5-convert/academy-token.svg",width:"16",height:"16"}),")\uc744 \ubcf4\ub0b4\uc8fc\uace0, \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc5d0 \uae30\ub85d\ub41c \uc720\uc800\uc758 \uac8c\uc784 \uc7ac\ud654(",(0,a.kt)("img",{src:"/xpla-academy-dev/img/3-tutorial/3-deep-understand-xpla/5-convert/academy-diamond.svg",width:"16",height:"16"}),") \ubcf4\uc720\ub7c9\uc744 \uc99d\uac00\uc2dc\ud0a4\uba74 \ub429\ub2c8\ub2e4.\n2\ubc88 \uacfc\uc815\uc744 \uad6c\uc870\ub3c4\ub85c \uadf8\ub9ac\uba74 \uc544\ub798\uc640 \uac19\uc2b5\ub2c8\ub2e4."),(0,a.kt)("mermaid",{value:"sequenceDiagram\n    actor U as User Client App;\n    participant C as Convert server;\n    participant D as Database(DB);\n    U->>C: 1. CW20 \ud1a0\ud070\uc744 \uac8c\uc784 \uc7ac\ud654\ub85c<br/> \ubc14\uafb8\ub294 Convert \uc694\uccad \n    Note over C: 2. \uc720\uc800 \uc9c0\uac11\uc774 \uac8c\uc784 \uc6b4\uc601 \uc9c0\uac11\uc73c\ub85c<br/> CW20 \ud1a0\ud070\uc744 \uc804\uc1a1\ud558\ub294 unsigned \ud2b8\ub79c\uc7ad\uc158 \uc0dd\uc131\n    C->>U: 3. \uc720\uc800\uc5d0\uac8c unsigned \ud2b8\ub79c\uc7ad\uc158\uc744 \uc804\ub2ec\n    Note over U: 4. \uc720\uc800\ub294 unsigned \ud2b8\ub79c\uc7ad\uc158\uc5d0 \uc11c\uba85\n    U->>C: 5. \uc720\uc800 \uc9c0\uac11 \uc11c\uba85\uc774 \ud3ec\ud568\ub41c \ud2b8\ub79c\uc7ad\uc158\uc744 \ub2e4\uc2dc \uc804\ub2ec\n    Note over C: 6. \uc720\uc800 \uc9c0\uac11 \uc11c\uba85\uc774 \ud3ec\ud568\ub41c \ud2b8\ub79c\uc7ad\uc158\uc744 XPLA \ub124\ud2b8\uc6cc\ud06c\uc5d0 \uc804\ud30c\n    C->>D: 7. \uc720\uc800\uac00 \uc694\uccad\ud55c \ub9cc\ud07c DB\uc5d0 \uae30\ub85d\ub41c<br/> \uc720\uc800\uc758 \uac8c\uc784 \uc7ac\ud654 \ubcf4\uc720\ub7c9\uc744 \uc99d\uac00\uc2dc\ud0b4.\n    C->>U: 8. \ud2b8\ub79c\uc7ad\uc158 \uacb0\uacfc\ub97c \uc720\uc800\uc5d0\uac8c \uc804\ub2ec"}),(0,a.kt)("br",null),(0,a.kt)("p",null,"\uc720\uc800 \uc9c0\uac11\uc740 CW20 \ud1a0\ud070(",(0,a.kt)("img",{src:"/xpla-academy-dev/img/3-tutorial/3-deep-understand-xpla/5-convert/academy-token.svg",width:"16",height:"16"}),")\uc744 \ubcf4\ub0b4\uba74\uc11c, \ud2b8\ub79c\uc7ad\uc158 \uc218\uc218\ub8cc\ub3c4 \uc9c0\ubd88\ud569\ub2c8\ub2e4.\n\ub530\ub77c\uc11c \uc720\uc800 \uc9c0\uac11 \uc11c\uba85\ub9cc \uc788\uc73c\uba74 Convert \ud2b8\ub79c\uc7ad\uc158 \uc0dd\uc131\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\ub610\ud55c, \uac8c\uc784 \uc6b4\uc601 \uc9c0\uac11\uc774 \uc11c\uba85\ud560 \ud544\uc694\uac00 \uc5c6\uc73c\ubbc0\ub85c, Sequence mismatch Error\ub97c \uac71\uc815\ud558\uc9c0 \uc54a\uc544\ub3c4 \ub429\ub2c8\ub2e4."),(0,a.kt)("p",null,"\uac01 \uacfc\uc815\uc774 \uc5b4\ub5bb\uac8c \uad6c\ud604\ub418\ub294\uc9c0 \uc544\ub798 Pseudo \ucf54\ub4dc\ub85c \uc54c\uc544\ubd05\uc2dc\ub2e4. (Pseudo \ucf54\ub4dc\uc774\uae30 \ub54c\ubb38\uc5d0 \ucf54\ub4dc \uadf8\ub300\ub85c \uc2e4\ud589\uc740 \ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.)"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"User Client App -> Convert Server : CW20 \ud1a0\ud070\uc744 \uac8c\uc784 \uc7ac\ud654\ub85c \ubc14\uafb8\ub294 Convert \uc694\uccad "),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'{6} title="User Client App"',"{6}":!0,title:'"User',Client:!0,'App"':!0},'import { useWallet } from "@xpla/wallet-provider";\n\nconst { wallets } = useWallet();\nconst userAddress = wallets[0].xplaAddress;\n\nconst unsignedResponse = await axios.post(\n    "https://convertserver.com/coin-to-gamecurrency-unsigned", \n    {\n        userAddress: userAddress, \n        amount : 1,\n    }\n); \n')),(0,a.kt)("p",{parentName:"li"},"\uc720\uc800\uac00 CW20 \ud1a0\ud070\uc744 \uac8c\uc784 \uc7ac\ud654\ub85c \uad50\ud658\ud558\ub824\uace0 \ud569\ub2c8\ub2e4. \uc720\uc800 \ud074\ub77c\uc774\uc5b8\ud2b8 \uc571\uc740 \uc720\uc800 \uc9c0\uac11 \uc8fc\uc18c(userAddress)\uc640 \ubc1b\uace0 \uc2f6\uc740 \uac8c\uc784 \uc7ac\ud654\ub7c9(amount)\uc744 \ub2f4\uc544, Convert Server\uc5d0 Post \uc694\uccad\uc744 \ubcf4\ub0c5\ub2c8\ub2e4."))),(0,a.kt)("br",null),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Convert Server : \uc720\uc800 \uc9c0\uac11\uc774 \uac8c\uc784 \uc6b4\uc601 \uc9c0\uac11\uc73c\ub85c CW20 \ud1a0\ud070\uc744 \uc804\uc1a1\ud558\ub294 unsigned \ud2b8\ub79c\uc7ad\uc158 \uc0dd\uc131"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'{7,18,31,33} title="Convert Server"',"{7,18,31,33}":!0,title:'"Convert','Server"':!0},'import { LCDClient, MsgExecuteContract, TxAPI, Fee } from "@xpla/xpla.js"\n\nconst lcd = new LCDClient({ chainID, URL });\nconst tx_api = new TxAPI(lcd);\nconst userAccountInfo = await lcd.auth.accountInfo(req.body.userAddress);\n\nconst cw20TransferMsg = new MsgExecuteContract(\n    req.body.userAddress,\n    cw20_contract_address, \n    {\n        transfer: {\n            recipient : game_operator_address,\n            amount: String(req.body.amount)\n        }\n    }\n)\n\nconst simul_fee = await tx_api.estimateFee(\n    [        \n        { \n            sequenceNumber: userAccountInfo.getSequenceNumber(), \n            publicKey: userAccountInfo.getPublicKey()\n        }\n    ],\n    {\n        msgs: [cw20TransferMsg],\n        gasAdjustment: 1.5,         \n    }\n);\n\nconst fee = new Fee(simul_fee.gas_limit, simul_fee.amount.toString());\n\nconst tx = await lcd.tx.create([], {msgs: [cw20TransferMsg], fee } )\n')),(0,a.kt)("p",{parentName:"li"},"\ud2b8\ub79c\uc7ad\uc158 \uc608\uc0c1 \uc218\uc218\ub8cc(simul_fee)\ub97c \uacc4\uc0b0\ud558\uace0, \uc720\uc800 \uc9c0\uac11(userAddress)\uc774 \uac8c\uc784 \uc6b4\uc601 \uc9c0\uac11(game_operator_address)\uc73c\ub85c CW20 \ud1a0\ud070\uc744 \uc804\uc1a1\ud558\ub294 \ud2b8\ub79c\uc7ad\uc158\uc744 \uc0dd\uc131\ud569\ub2c8\ub2e4.\n\uc774\ubc88\uc5d0\ub294 fee \ubcc0\uc218\ub97c \ucd08\uae30\ud654\ud560 \ub54c, payer parameter\uc5d0 \uc544\ubb34 \uac12\ub3c4 \uc785\ub825\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."))),(0,a.kt)("br",null),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Convert Server -> User Client App: \uc720\uc800\uc5d0\uac8c unsigned \ud2b8\ub79c\uc7ad\uc158\uc744 \uc804\ub2ec"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="Convert Server"',title:'"Convert','Server"':!0},"const unsignedTx = Buffer.from(tx.toBytes()).toString('base64')\nconst result = { unsignedTx : unsignedTx }\nreturn result\n")),(0,a.kt)("p",{parentName:"li"},"User Client\uc758 Post \uc694\uccad\uc5d0 \ub300\ud55c \uc751\ub2f5\uc73c\ub85c, unsigned \ud2b8\ub79c\uc7ad\uc158\uc744 \uc804\ub2ec\ud569\ub2c8\ub2e4."))),(0,a.kt)("br",null),(0,a.kt)("ol",{start:4},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"User Client App : \uc720\uc800\ub294 unsigned \ud2b8\ub79c\uc7ad\uc158\uc5d0 \uc11c\uba85"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'{9,12} title="User Client App"',"{9,12}":!0,title:'"User',Client:!0,'App"':!0},'const unsignedResponse = await axios.post(unsignedUrl, unsignedPost);\nconst unsignedTx = unsignedResponse.data.unsignedTx;\n\nif (unsignedTx === undefined) {\n    throw new Error("Response is undefined!");\n}\nconst decodedTx = Tx.fromBuffer(Buffer.from(unsignedTx, "base64"));\n\nconst { result: signedTx, success } = await connectedWallet.sign({\n    msgs: decodedTx.body.messages,\n    fee: decodedTx.auth_info.fee,\n    signMode: SignMode.SIGN_MODE_DIRECT,\n});\n')),(0,a.kt)("p",{parentName:"li"},"\uc720\uc800 \ud074\ub77c\uc774\uc5b8\ud2b8\ub294 Convert Server \uc751\ub2f5(unsignedResponse)\uc73c\ub85c \ubc1b\uc740 unsigned \ud2b8\ub79c\uc7ad\uc158\uc5d0 \uc11c\uba85\uc744 \uc9c4\ud589\ud569\ub2c8\ub2e4.\n",(0,a.kt)("a",{parentName:"p",href:"/docs/tutorial/deep-understand-xpla/convert#convert-case2"},"2\ubc88 \uacfc\uc815"),"\uc758 Convert \ud2b8\ub79c\uc7ad\uc158\uc740 \uc720\uc800 \uc9c0\uac11 \uc11c\uba85\ub9cc \ud544\uc694\ud55c ",(0,a.kt)("a",{parentName:"p",href:"https://docs.cosmos.network/main/user/run-node/txs#signing-with-multiple-signers"},"\ub2e8\uc77c \uc11c\uba85"),"\uc774\uae30 \ub54c\ubb38\uc5d0, ",(0,a.kt)("strong",{parentName:"p"},"SignMode.SIGN_MODE_DIRECT")," \ubcc0\uc218\ub85c \uc9c4\ud589\ud569\ub2c8\ub2e4. "))),(0,a.kt)("br",null),(0,a.kt)("ol",{start:5},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"User Client App -> Convert Server : \uc720\uc800 \uc9c0\uac11 \uc11c\uba85\uc774 \ud3ec\ud568\ub41c \ud2b8\ub79c\uc7ad\uc158\uc744 \ub2e4\uc2dc \uc804\ub2ec"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'{3,6,7} title="User Client App"',"{3,6,7}":!0,title:'"User',Client:!0,'App"':!0},'const userSignedTx = Buffer.from(signedTx.toBytes()).toString("base64");\n\nconst res = await axios.post(\n    "https://convertserver.com/coin-to-gamecurrency-signed", \n    {\n        wallet: userAddress,\n        userSignedTx: userSignedTx,\n    }\n);\n')),(0,a.kt)("p",{parentName:"li"},"\uc720\uc800 \ud074\ub77c\uc774\uc5b8\ud2b8\uac00 \uc720\uc800 \uc9c0\uac11 \uc8fc\uc18c(userAddress)\uc640 \uc720\uc800 \uc9c0\uac11 \uc11c\uba85\uc744 \ucd94\uac00\ud55c \ud2b8\ub79c\uc7ad\uc158 \uc815\ubcf4(userSignedTx)\ub97c \ub2f4\uc544, Convert Server\uc5d0 Post \uc694\uccad\uc744 \ubcf4\ub0c5\ub2c8\ub2e4. "))),(0,a.kt)("br",null),(0,a.kt)("ol",{start:6},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Convert Server : \uc720\uc800 \uc9c0\uac11 \uc11c\uba85\uc774 \ud3ec\ud568\ub41c \ud2b8\ub79c\uc7ad\uc158\uc744 XPLA \ub124\ud2b8\uc6cc\ud06c\uc5d0 \uc804\ud30c"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="Convert Server"',title:'"Convert','Server"':!0},"const tx = Tx.fromBuffer(Buffer.from(String(req.body.userSignedTx), 'base64'))\n\ntxResult = await lcd.tx.broadcastSync(allSignedTx)      \n")),(0,a.kt)("p",{parentName:"li"},"\ud2b8\ub79c\uc7ad\uc158\uc744 XPLA \ub124\ud2b8\uc6cc\ud06c\uc5d0 \uc804\ud30c\ud569\ub2c8\ub2e4."))),(0,a.kt)("br",null),(0,a.kt)("ol",{start:7},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Convert Server -> Database(DB) : \uc720\uc800\uac00 \uc694\uccad\ud55c \ub9cc\ud07c DB\uc5d0 \uae30\ub85d\ub41c \uc720\uc800\uc758 \uac8c\uc784 \uc7ac\ud654 \ubcf4\uc720\ub7c9\uc744 \uc99d\uac00\uc2dc\ud0b4."),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="Convert Server"',title:'"Convert','Server"':!0},"db.query('update user_info set game_currency = game_currency + ? where pid = ? ', [req.body.amount, playerId]);\n")),(0,a.kt)("p",{parentName:"li"},"\uc720\uc800\uac00 \ubc1b\uace0 \uc2f6\uc740 \uac8c\uc784 \uc7ac\ud654\ub7c9(req.body.amount)\ub9cc\ud07c \uc99d\uac00\uc2dc\ud0b5\ub2c8\ub2e4."))),(0,a.kt)("br",null),(0,a.kt)("ol",{start:8},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Convert Server -> User Client App : \ud2b8\ub79c\uc7ad\uc158 \uacb0\uacfc\ub97c \uc720\uc800\uc5d0\uac8c \uc804\ub2ec"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="Convert Server"',title:'"Convert','Server"':!0},"return { txhash : txResult.txhash }\n")),(0,a.kt)("p",{parentName:"li"},"User Client\uc758 Post \uc694\uccad\uc5d0 \ub300\ud55c \uc751\ub2f5\uc73c\ub85c, \ud2b8\ub79c\uc7ad\uc158 \uc804\ud30c \uacb0\uacfc\ub97c \uc804\ub2ec\ud569\ub2c8\ub2e4."))),(0,a.kt)("br",null),(0,a.kt)("h2",{id:"\ub9c8\ubb34\ub9ac"},"\ub9c8\ubb34\ub9ac"),(0,a.kt)("p",null,"\uc9c0\uae08\uae4c\uc9c0 Convert \uae30\ub2a5 \uad6c\ud604\uc5d0 \ub300\ud574 \uc790\uc138\ud788 \uc0b4\ud3b4\ubcf4\uc558\uc2b5\ub2c8\ub2e4. Convert \uae30\ub2a5\uc744 \ud1b5\ud574 \uc720\uc800\ub4e4\uc740 \uac8c\uc784 \uc7ac\ud654\uc640 CW20 \ud1a0\ud070\uc744 \uc27d\uac8c \uad50\ud658\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uac8c\uc784\uacfc \ube14\ub85d\uccb4\uc778\uc744 \uc5f0\uacb0\ud574\uc8fc\ub294 Convert \uae30\ub2a5\uc744 \uc5ec\ub7ec\ubd84\uc758 \uac8c\uc784\uc5d0 \uc801\uc6a9\ud574\ubcf4\uc138\uc694."))}m.isMDXComponent=!0}}]);