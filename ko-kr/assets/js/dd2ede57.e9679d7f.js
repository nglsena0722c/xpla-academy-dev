(self.webpackChunkxpla_academy=self.webpackChunkxpla_academy||[]).push([[2087],{85762:(e,t,n)=>{"use strict";n.r(t),n.d(t,{assets:()=>v,contentTitle:()=>y,default:()=>T,frontMatter:()=>E,metadata:()=>C,toc:()=>k});var l=n(87462),o=n(67294),a=n(3905),c=n(52252),d=n(95999);const r="\n@keyframes wallet-select-modal--dim-enter {\n  0% {\n    opacity: 0;\n  }\n  \n  100% {\n    opacity: 1;\n  }\n}\n@keyframes wallet-select-modal--content-enter {\n  0% {\n    opacity: 0;\n    transform: scale(0.4);\n  }\n  \n  100% {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n.wallet-select-modal {\n  position: fixed;\n  z-index: 100000;\n  \n  color: #212121;\n  \n  left: 0;\n  top: 0;\n  bottom : 0;\n  width: 100vw;\n  \n  font-family: sans-serif;\n  \n  display: grid;\n  place-content: center;\n}\n.wallet-select-modal > .wallet-select-modal--dim {\n  position: fixed;\n  z-index: -1;\n  \n  left: 0;\n  top: 0;\n  width: 100vw;\n  height: 100vh;\n  background-color: rgba(0, 0, 0, 0.3);\n  \n  animation: wallet-select-modal--dim-enter 0.2s ease-in-out;\n}\n.wallet-select-modal > .wallet-select-modal--content {\n  box-sizing: border-box;\n  \n  border-radius: 8px;\n  \n  background-color: #ffffff;\n  box-shadow: 0 4px 18px 3px rgba(0, 0, 0, 0.43);\n  \n  animation: wallet-select-modal--content-enter 0.2s ease-in-out;\n  \n  width: 100vw;\n  max-width: 480px;\n  padding: 40px;\n}\n.wallet-select-modal > .wallet-select-modal--content h1 {\n  font-size: 20px;\n  font-weight: bold;\n  \n  margin: 0 0 32px 0;\n  \n  text-align: center;\n}\n.wallet-select-modal > .wallet-select-modal--content ul {\n  padding: 0;\n  margin: 0;\n  list-style: none;\n  \n  display: flex;\n  flex-direction: column;\n}\n.wallet-select-modal > .wallet-select-modal--content ul li {\n  border-top: 1px solid #cfd8ea;\n}\n.wallet-select-modal > .wallet-select-modal--content ul li:last-child {\n  border-bottom: 1px solid #cfd8ea;\n}\n.wallet-select-modal > .wallet-select-modal--content ul button {\n  width: 100%;\n  height: 66px;\n  \n  border: none;\n  background-color: transparent;\n  outline: none;\n  cursor: pointer;\n  \n  display: flex;\n  gap: 10px;\n  align-items: center;\n}\n.wallet-select-modal > .wallet-select-modal--content ul button:hover {\n  background-color: hsl(220, 39%, 86%, 0.25);\n}\n.wallet-select-modal > .wallet-select-modal--content ul button .wallet-select-modal--icon {\n  display: inline-grid;\n  width: 50px;\n  height: 50px;\n  \n  place-content: center;\n}\n.wallet-select-modal > .wallet-select-modal--content ul button .wallet-select-modal--icon img {\n  width: 30px;\n  height: 30px;\n}\n.wallet-select-modal > .wallet-select-modal--content ul button .wallet-select-modal--description {\n  flex: 1;\n  text-align: left;\n  \n  font-size: 16px;\n  font-weight: 600;\n  color: #212121;\n}\n.wallet-select-modal > .wallet-select-modal--content ul button svg {\n  width: 18px;\n  height: 18px;\n  \n  fill: #cfd8ea;\n}\n.wallet-select-modal > .wallet-select-modal--content ul button:hover svg {\n  fill: #2043b5;\n}\n@media (max-width: 450px) {\n  .wallet-select-modal {\n    place-content: flex-end;\n  }\n  \n  .wallet-select-modal > .wallet-select-modal--content {\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n  }\n}\n";function s(e){return new Promise((t=>{const n=document.createElement("style"),l=document.createElement("div");const o=function(e){let{connections:t,onComplete:n}=e;const l=document.createElement("div");l.setAttribute("class","wallet-select-modal");const o=document.createElement("div");o.setAttribute("class","wallet-select-modal--dim"),l.appendChild(o);const a=document.createElement("section");a.setAttribute("class","wallet-select-modal--content"),l.appendChild(a);const c=document.createElement("h1");c.textContent="Select a Wallet",a.appendChild(c);const d=document.createElement("ul");a.appendChild(d);for(const r of t){const e=document.createElement("li"),t=document.createElement("button");t.addEventListener("click",(()=>n(r))),e.appendChild(t);const l=document.createElement("span");l.setAttribute("class","wallet-select-modal--icon"),t.appendChild(l);const o=document.createElement("img");o.setAttribute("src",r.icon),o.setAttribute("alt",`${r.name} [${r.identifier}]`),l.appendChild(o);const a=document.createElement("span");a.setAttribute("class","wallet-select-modal--description"),a.textContent=r.name,t.appendChild(a);const c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.setAttribute("viewBox","0 0 24 24"),t.appendChild(c);const s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"),c.appendChild(s),d.appendChild(e)}return o.addEventListener("click",(()=>n(null))),l}({connections:e,onComplete:function(e){t(e?[e.type,e.identifier]:null),n.parentElement?.removeChild(n),l.parentElement?.removeChild(l),document.body.style.overflow="unset"}});n.textContent=r,l.appendChild(o),document.querySelector("head")?.appendChild(n),document.querySelector("body")?.appendChild(l),document.body.style.overflow="hidden"}))}var i=n(25108);function m(){const{status:e,network:t,wallets:n,availableConnections:l,availableConnectTypes:a,connect:r,disconnect:m}=(0,c.Os)();return o.createElement("div",{className:"buttonContainer",onClick:async()=>{if(e===c.PR.WALLET_NOT_CONNECTED)try{const e=await s(l.filter((e=>e.type!=c.cP.READONLY)));if(!e)throw i.log("Wallet Connect Error"),new Error("Wallet Connect Error");const t=e[0],n=e[1]||"";i.log(e,t,n),r(t,n)}catch(t){i.log(t)}else m()}},o.createElement("div",{className:"connectwallet"},e===c.PR.WALLET_NOT_CONNECTED?o.createElement(d.Z,{id:"ddd"},"Connect Wallet"):0==n.length?"Loading...":o.createElement("span",null,n[0].xplaAddress)))}var u=n(25108);const p=e=>{let{children:t}=e;const[n,l]=(0,o.useState)(),[a,d]=(0,o.useState)(!0);return(0,o.useEffect)((()=>{d("undefined"==typeof window)}),[]),(0,o.useEffect)((()=>{(0,c.c3)().then((e=>l(e))).catch((e=>{u.log(e)}))}),[]),a?o.createElement(o.Fragment,null):o.createElement(c.nS,n,t)};var w=n(30826),f=n(6154),g=n(87536),h=n(25108),b=n(48764).Buffer;const x=()=>{const e=(0,g.cI)({mode:"onChange"}),t=(0,c.Yk)(),{status:n,network:a,wallets:d,availableConnectTypes:r,connect:s,disconnect:i}=(0,c.Os)(),{register:m,watch:u,setValue:p,handleSubmit:x,resetField:E,reset:y,clearErrors:C}=e,{formState:v}=e,{errors:k}=v,{...N}=u(),S="cube_47-5";return o.createElement(o.Fragment,null,n===c.PR.WALLET_NOT_CONNECTED?o.createElement("span",null,"You Need to Connect Wallet!"):0==d.length?"Loading...":o.createElement("form",{onSubmit:x((async e=>{let{...n}=e;try{const{amount:e}=n,l=new w.LCDClient({chainID:S,URL:"https://cube-lcd.xpla.dev"}),o=d[0].xplaAddress,a=await l.auth.accountInfo(o),c=a.getPublicKey(),r="http://127.0.0.1:40202",s={wallet:o,amount:e,userPubKey:c.key,userSeq:a.getSequenceNumber()},i=`${r}/wallet/wallet-gamecurrency-to-coin-unsigned`,m=await f.Z.post(i,s);h.log(m);const u=m.data.unsignedTx;if(h.log(u),void 0===u)throw new Error("Server Error!");const p=w.Tx.fromBuffer(b.from(u,"base64"));h.log(p);a.getAccountNumber(),a.getSequenceNumber(),w.SignMode.SIGN_MODE_LEGACY_AMINO_JSON;const{result:g,success:x}=await t.sign({msgs:p.body.messages,fee:p.auth_info.fee});if(!x)throw new Error("Vault Sign Error");const E=b.from(g.toBytes()).toString("base64");h.log(g);const y={wallet:o,tid:m.data.tid,userTx:E};h.log("convertPost:",y);const C=`${r}/wallet/wallet-gamecurrency-to-coin`;let v=await f.Z.post(C,y);h.log("res : ",v)}catch(l){h.log(l)}}))},o.createElement("span",null,"\uac8c\uc784 \uc7ac\ud654\ub97c \ud1a0\ud070\uc73c\ub85c \ubc14\uafb8\ub294 \uc694\uccad"),o.createElement("input",(0,l.Z)({},m("amount"),{placeholder:"amount"})),o.createElement("button",{type:"submit"},"Submit")))},E={sidebar_position:3},y="Walletconnect \ud658\uacbd \uc5f0\uacb0",C={unversionedId:"tutorial/add-func-to-game-2/walletconnect",id:"tutorial/add-func-to-game-2/walletconnect",title:"Walletconnect \ud658\uacbd \uc5f0\uacb0",description:"",source:"@site/docs/3-tutorial/3-add-func-to-game-2/3-walletconnect.mdx",sourceDirName:"3-tutorial/3-add-func-to-game-2",slug:"/tutorial/add-func-to-game-2/walletconnect",permalink:"/xpla-academy-dev/ko-kr/docs/tutorial/add-func-to-game-2/walletconnect",draft:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"\uac8c\uc784 \ud074\ub77c\uc774\uc5b8\ud2b8 / \uc6f9\uc0ac\uc774\ud2b8 \ud68c\uc6d0\uac00\uc785 \ub85c\uadf8\uc778 \uae30\ub2a5 \uad6c\ud604",permalink:"/xpla-academy-dev/ko-kr/docs/tutorial/add-func-to-game-2/login"},next:{title:"Convert \uae30\ub2a5 \uc801\uc6a9\ud558\uae30",permalink:"/xpla-academy-dev/ko-kr/docs/tutorial/add-func-to-game-2/convert"}},v={},k=[],N={toc:k},S="wrapper";function T(e){let{components:t,...n}=e;return(0,a.kt)(S,(0,l.Z)({},N,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"walletconnect-\ud658\uacbd-\uc5f0\uacb0"},"Walletconnect \ud658\uacbd \uc5f0\uacb0"),(0,a.kt)(p,{mdxType:"WalletWrap"},(0,a.kt)(m,{mdxType:"Connect"}),(0,a.kt)(x,{mdxType:"TestConvert"})))}T.isMDXComponent=!0},36563:()=>{},46601:()=>{},89214:()=>{},85568:()=>{},34845:()=>{},52361:()=>{},94616:()=>{},33370:()=>{}}]);