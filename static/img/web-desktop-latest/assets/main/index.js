System.register("chunks:///_virtual/Ball.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameCtrl.ts","./BricksObjectPool.ts","./Utils.ts","./Brick.ts"],(function(t){var e,i,s,n,l,o,a,d,r,c,h,u,y,_,p,B;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,s=t._decorator,n=t.director,l=t.RigidBody2D,o=t.CircleCollider2D,a=t.Contact2DType,d=t.Vec3,r=t.v2,c=t.tween,h=t.Vec2,u=t.Component},function(t){y=t.GameCtrl},function(t){_=t.BricksObjectPool},function(t){p=t.UTILS},function(t){B=t.Brick}],execute:function(){var g;i._RF.push({},"1bf53TUXMpJxKJ7bUba/EXB","Ball",void 0);var L=s.ccclass,b=(s.property,t("ColliderTag",function(t){return t[t.BALL=0]="BALL",t[t.WALL=1]="WALL",t[t.BRICK=2]="BRICK",t[t.PADDLE=3]="PADDLE",t[t.BALL_OUT=4]="BALL_OUT",t[t.BRICK_ALLY=5]="BRICK_ALLY",t[t.ITEM=6]="ITEM",t[t.BALL_ENEMY=7]="BALL_ENEMY",t[t.BULLET=8]="BULLET",t}({})));t("Ball",L("Ball")(g=function(t){function i(){for(var e,i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))||this).gameCtrl=null,e.bricksObjPool=null,e.ball_idx=0,e.ball_speed=0,e.ball_adjust_speed=0,e.ball_prevVelocity=new h,e.isHuge=!1,e.deltaTime=0,e.isMoving=!1,e.rigidBody=null,e.isEnemyBall=!1,e}e(i,t);var s=i.prototype;return s.onLoad=function(){this.gameCtrl=n.getScene().getComponentInChildren(y),this.bricksObjPool=n.getScene().getComponentInChildren(_),this.rigidBody=this.node.getComponent(l);var t=this.node.getComponent(o);t&&t.on(a.BEGIN_CONTACT,this.onBeginContact,this)},s.onBeginContact=function(t,e,i){switch(e.tag){case b.BRICK:this.adjustVelocity(t),this.bricksObjPool.contactBricksLayer(e);break;case b.BRICK_ALLY:this.adjustVelocity(t),e.node.getComponent(B).damage(),this.isEnemyBall&&this.node.destroy();break;case b.WALL:this.adjustVelocity(t);break;case b.BALL_OUT:this.isEnemyBall?this.node.destroy():this.gameCtrl.destroyBall(this.ball_idx)}},s.moveStart=function(t,e,i){this.rigidBody.wakeUp();var s=new d;this.ball_speed=e?10:20,s.x=this.ball_speed*i.x,s.y=this.ball_speed*i.y,this.ball_adjust_speed=this.ball_speed/2,this.rigidBody.linearVelocity=r(s.x,s.y),this.isMoving=!0,this.ball_idx=t,this.isEnemyBall=e,!1===e&&(this.node.scale=new d(.35,.35))},s.moveStop=function(){this.ball_prevVelocity=this.rigidBody.linearVelocity.clone(),this.rigidBody.sleep(),this.isMoving=!1},s.setVisible=function(t){this.node.active=t},s.isMove=function(){return this.isMoving},s.setPosition=function(t){0==this.isMove()&&this.node.setPosition(new d(t,this.node.position.y,0))},s.hugeBall=function(){this.deltaTime=0,!1===this.isHuge&&(this.isHuge=!0,c(this.node).to(.3,{scale:new d(1,1,0)}).start())},s.adjustVelocity=function(t){var e=t.node.getComponent(l);if(e){var i=e.linearVelocity;i.x<2&&i.x>-2&&(i.x<0?i.x=-this.ball_adjust_speed:i.x>0?i.x=this.ball_adjust_speed:i.x=p.getRandomInt(-this.ball_adjust_speed,this.ball_adjust_speed),e.linearVelocity=r(i.x,i.y)),i.y<2&&i.y>-2&&(i.y<0?i.y=-this.ball_adjust_speed:i.y>0?i.y=this.ball_adjust_speed:i.y=p.getRandomInt(-this.ball_adjust_speed,this.ball_adjust_speed),e.linearVelocity=r(i.x,i.y))}},s.update=function(t){this.isHuge&&this.gameCtrl.isPlayingNow()&&(this.deltaTime+=t,this.deltaTime>=10&&(c(this.node).to(.3,{scale:new d(.35,.35,0)}).start(),this.deltaTime=0,this.isHuge=!1))},i}(u))||g);i._RF.pop()}}}));

System.register("chunks:///_virtual/Brick.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BricksObjectPool.ts","./Ball.ts"],(function(t){var e,i,n,o,s,a,r,c,h,p,l;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,o=t.Vec3,s=t.BoxCollider2D,a=t.Contact2DType,r=t.instantiate,c=t.ParticleSystem2D,h=t.Component},function(t){p=t.BrickType},function(t){l=t.ColliderTag}],execute:function(){var y;i._RF.push({},"59814LQ735K7q3qIQVF4VHW","Brick",void 0);var d=n.ccclass;n.property,t("Brick",d("Brick")(y=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).type=void 0,e.hp=0,e.score=0,e.isEnemy=!0,e.particle=null,e.bombLineIdx=-1,e.attackableCnt=0,e}e(i,t);var n=i.prototype;return n.setProperty=function(t,e,i,n,r,c,h,l){(this.type=t,this.score=4===t?5:n+1,this.hp=n,this.isEnemy=r,this.particle=c,this.bombLineIdx=h,this.attackableCnt=l,this.node.setPosition(new o(e,i,0)),t===p.ALLY)&&this.node.getComponent(s).on(a.BEGIN_CONTACT,this.onBeginContact,this)},n.onBeginContact=function(t,e,n){e.tag===l.BRICK&&(this.damage(),e.node.getComponent(i).damage())},n.damage=function(){if(this.type!==p.IMMORTAL)return this.hp-=1,this.hp<0?(this.createParticle(this.node.position),this.node.destroy(),{msg:"Destroy",type:this.type,hp:-1,position:new o(this.node.position.x,this.node.parent.position.y+this.node.position.y,0),score:this.score,enemy:this.isEnemy,bombLineIdx:this.bombLineIdx,attackableCnt:this.attackableCnt}):{msg:"Damage",type:this.type,hp:this.hp,position:new o(this.node.position.x,this.node.parent.position.y+this.node.position.y,0),score:0,enemy:this.isEnemy,bombLineIdx:-1,attackableCnt:this.attackableCnt}},n.createParticle=function(t){var e=r(this.particle);e.parent=this.node.parent,e.setPosition(t),e.getComponent(c).duration=.5},i}(h))||y);i._RF.pop()}}}));

System.register("chunks:///_virtual/BricksObjectPool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Brick.ts","./GameData.ts","./GameCtrl.ts","./ItemMgr.ts","./Utils.ts"],(function(e){var i,t,r,n,o,s,c,a,l,d,k,b,h,m,p,f,u,g,B,y,v,C,I,N,_,S;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,c=e.Prefab,a=e.Node,l=e.director,d=e.Vec3,k=e.UITransform,b=e.resources,h=e.JsonAsset,m=e.Size,p=e.instantiate,f=e.BoxCollider2D,u=e.tween,g=e.v3,B=e.Tween,y=e.Component},function(e){v=e.Brick},function(e){C=e.GAMEDATA,I=e.PlayMode},function(e){N=e.GameCtrl},function(e){_=e.ItemMgr},function(e){S=e.UTILS}],execute:function(){var M,L,x,z,w,P,D,A,E,O,T,R,F;o._RF.push({},"b95cau4l8JOW6RB0Yo8kqzu","BricksObjectPool",void 0);var G=s.ccclass,j=s.property,U=e("BrickType",function(e){return e[e.NORMAL_0=0]="NORMAL_0",e[e.NORMAL_1=1]="NORMAL_1",e[e.NORMAL_2=2]="NORMAL_2",e[e.IMMORTAL=3]="IMMORTAL",e[e.BOMB=4]="BOMB",e[e.ALLY=5]="ALLY",e}({}));e("BricksObjectPool",(M=G("BricksObjectPool"),L=j({type:c}),x=j({type:c}),z=j({type:c}),w=j({type:a}),P=j({type:c}),M((E=i((A=function(e){function i(){for(var i,t=arguments.length,o=new Array(t),s=0;s<t;s++)o[s]=arguments[s];return i=e.call.apply(e,[this].concat(o))||this,r(i,"bricks",E,n(i)),r(i,"bricks_break",O,n(i)),r(i,"particle",T,n(i)),r(i,"defenseBricksNode",R,n(i)),r(i,"rayCast",F,n(i)),i.gameCtrl=null,i.itemMgr=null,i.brickSize=null,i.brickEnemyCnt=0,i.defenseBricksOriginPos=null,i.screenHeight=0,i.infiniteStage=0,i.infiniteDiff=0,i.infiniteTimeout=null,i.moveBricksSpeed=0,i.bombLineIdx=0,i.bombLineBricks=new Map,i.bricksNodeIdx=0,i.bricksNode=[],i}t(i,e);var o=i.prototype;return o.onLoad=function(){var e=this;this.gameCtrl=l.getScene().getComponentInChildren(N),this.itemMgr=l.getScene().getComponentInChildren(_),this.defenseBricksOriginPos=new d(0,this.defenseBricksNode.position.y,0),this.screenHeight=this.node.parent.getComponent(k).height,this.bombLineBricks.clear(),this.brickEnemyCnt=0,this.createEnemyBricks(),this.infiniteTimeout=setInterval((function(){e.checkNextBricks()}),1e3)},o.createEnemyBricks=function(){var e=this,i=C.getPlayMode(),t="";C.tutorial?t="data/tutorial"+C.getTutorialStage():i===I.STAGE?t="data/stage"+C.getCurStage():(this.infiniteStage++,this.infiniteStage>6&&(this.infiniteStage=1,this.infiniteDiff++),t="data/infinite"+this.infiniteStage);var r=this.node.getComponent(k).width;b.load(t,h,(function(t,n){if(t)console.log("Failed to load json file : ",t);else{var o=n.json,s=o.brick_item.total_rate,c=o.brick_item.each_rate;e.itemMgr.setItemMgrInfo(e.gameCtrl,s,c);var l=0;i===I.STAGE?e.moveBricksSpeed=o.brick_dynamic.gravity_time:e.moveBricksSpeed=Math.max(30,60-e.infiniteDiff);var b=0,h=0;0===e.moveBricksSpeed&&(b=o.brick_dynamic.enemy_ball_cnt,h=o.brick_dynamic.move_horizon_speed),e.bricksNode[e.bricksNodeIdx]=new a("Bricks"),e.node.addChild(e.bricksNode[e.bricksNodeIdx]),e.brickSize=new m(o.brick_size.width,o.brick_size.height);for(var B=o.bricks.length,y=0;y<B;y++){var N=o.bricks[y].length,_=[];e.moveBricksSpeed>0&&(l+=o.brick_gap.t+e.brickSize.height+o.brick_gap.v);for(var M=0;M<N;M++){var L=o.bricks[y][M].type,x=o.bricks[y][M].hp;if(L>=0){var z=p(e.bricks[L]);z.getComponent(k).setContentSize(e.brickSize),z.getComponent(f).size=e.brickSize,e.bricksNode[e.bricksNodeIdx].addChild(z);var w=o.brick_gap.l+o.brick_size.width/2+M*(o.brick_size.width+o.brick_gap.h)-r/2,P=-o.brick_gap.t-o.brick_size.height/2-y*(o.brick_size.height+o.brick_gap.v),D=z.getComponent(v);D.setProperty(L,w,P,x,!0,e.particle,e.bombLineIdx,b),L!==U.IMMORTAL&&(e.brickEnemyCnt++,_[M]=D)}M===N-1&&(e.bombLineBricks.set(e.bombLineIdx,_),e.bombLineIdx++)}}if(e.bricksNode[e.bricksNodeIdx].setPosition(0,l),e.moveBricksSpeed>0){var A=e.bricksNode[e.bricksNodeIdx],E=e.screenHeight+l;if(C.getPlayMode()===I.INFINITE)u(A.position).by(e.moveBricksSpeed,new d(0,-E,0),{easing:"linear",onUpdate:function(e,i){A.position=e}}).call((function(){A.removeFromParent()})).start();else{var O=u(A.position).by(e.moveBricksSpeed,new d(0,-E,0),{easing:"linear",onUpdate:function(e,i){A.position=e}}),T=u(A.position).call((function(){A.position=new d(0,l,0)}));u(A.position).sequence(O,T).repeatForever().start()}}else if(h>0){var R=-(o.brick_gap.l/2+30),F=o.brick_gap.l/2+30,G=10-h,j=u(e.node).to(G,{position:g(R,e.node.position.y,0)}),q=u(e.node).to(G,{position:g(F,e.node.position.y,0)});0===S.getRandomInt(0,1)?u(e.node).sequence(j,q).repeatForever().start():u(e.node).sequence(q,j).repeatForever().start()}}}))},o.checkNextBricks=function(){this.moveBricksSpeed>0&&C.getPlayMode()===I.INFINITE&&this.bricksNode[this.bricksNodeIdx].position.y<=-this.brickSize.height&&(this.bricksNodeIdx++,this.bricksNodeIdx>=3&&(this.bricksNodeIdx=0),this.createEnemyBricks())},o.contactBricksLayer=function(e){var i=e.node.getComponent(v).damage();void 0!==i&&("Destroy"===i.msg?i.enemy&&(this.procBrickDestroy(i),i.type===U.BOMB&&this.procBombBricks(i.bombLineIdx,i.position)):"Damage"===i.msg&&this.procBrickDamage(e.node,i))},o.procBrickDestroy=function(e){var i=this;this.brickEnemyCnt--,this.gameCtrl.updateScore(e.score,!1),this.gameCtrl.isPlayingNow()&&(this.brickEnemyCnt<=0?C.getPlayMode()===I.STAGE?(this.gameCtrl.moveBallStop(),u(this.node).delay(.3).call((function(){!1===i.itemMgr.checkItemExist()&&i.gameCtrl.procGameClear()})).start()):this.createEnemyBricks():this.itemMgr.createItem(e.position))},o.procBrickDamage=function(e,i){var t=this,r=Number(i.hp),n=p(this.bricks_break[r]);if((e.addChild(n),n.getComponent(k).setContentSize(this.brickSize),i.attackableCnt>0)&&1===S.getRandomInt(0,1))for(var o=i.attackableCnt>2?2:i.attackableCnt,s=function(){var e=new d(t.node.position.x+i.position.x,t.node.position.y+i.position.y,0);u(t.node).delay(.1).call((function(){t.gameCtrl.createBall(t.node.parent,!0,e)})).start()},c=0;c<o;c++)s()},o.procBombBricks=function(e,i){var t=this;if(e>=0){var r=this.bombLineBricks.get(e),n=p(this.rayCast);this.node.addChild(n),n.setPosition(i.x,i.y,0),n.scale=new d(.1,.1,0),u(n).to(.2,{scale:new d(2,2,0)}).call((function(){r.forEach((function(e,i){if(null!==e&&null!==e.node&&e.node.isValid){var r=e.damage();"Destroy"===r.msg?(t.procBrickDestroy(r),r.type===U.BOMB&&t.procBombBricks(r.bombLineIdx,r.position)):"Damage"===r.msg&&t.procBrickDamage(e.node,r)}n.removeFromParent()}))})).start()}},o.resetBricks=function(){var e=this;this.node.removeAllChildren(),this.node.setPosition(0,this.node.position.y),this.brickEnemyCnt=0,this.bombLineIdx=0,this.bombLineBricks.clear(),this.infiniteStage=0,this.infiniteDiff=0,this.bricksNodeIdx=0,this.moveBricksSpeed=0,this.removeDefenseBricks(),this.createEnemyBricks(),this.infiniteTimeout=setInterval((function(){e.checkNextBricks()}),1e3)},o.stopBricks=function(){null!==this.infiniteTimeout&&clearInterval(this.infiniteTimeout),B.stopAll()},o.getItemMgr=function(){return this.itemMgr},o.getParticlePrefab=function(){return this.particle},o.createDefenseBricks=function(){this.removeDefenseBricks();for(var e=this.defenseBricksNode.getComponent(k).width,i=e/60-1,t=U.ALLY,r=0;r<i;r++){var n=p(this.bricks[t]);this.defenseBricksNode.addChild(n);var o=-e/2+4+30+64*r;n.getComponent(v).setProperty(t,o,0,0,!1,this.particle,-1,0)}u(this.defenseBricksNode).by(.3,{position:new d(0,30)}).start()},o.removeDefenseBricks=function(){this.defenseBricksNode.removeAllChildren(),this.defenseBricksNode.position=this.defenseBricksOriginPos},o.isExistBricks=function(){return this.brickEnemyCnt<=0},i}(y)).prototype,"bricks",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=i(A.prototype,"bricks_break",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=i(A.prototype,"particle",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=i(A.prototype,"defenseBricksNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=i(A.prototype,"rayCast",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=A))||D));o._RF.pop()}}}));

System.register("chunks:///_virtual/Bullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Ball.ts"],(function(t){var o,n,e,r,c,i,l;return{setters:[function(t){o=t.inheritsLoose},function(t){n=t.cclegacy,e=t._decorator,r=t.BoxCollider2D,c=t.Contact2DType,i=t.Component},function(t){l=t.ColliderTag}],execute:function(){var s;n._RF.push({},"7bed1iYU2pFFrp45Dol6cw3","Bullet",void 0);var a=e.ccclass;e.property,t("Bullet",a("Bullet")(s=function(t){function n(){for(var o,n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return(o=t.call.apply(t,[this].concat(e))||this).bricksObjPool=null,o}o(n,t);var e=n.prototype;return e.onLoad=function(){var t=this.getComponent(r);t&&t.on(c.BEGIN_CONTACT,this.onBeginContact,this)},e.setBricksObjPool=function(t){this.bricksObjPool=t},e.onBeginContact=function(t,o,n){o.tag===l.BRICK?(this.bricksObjPool.contactBricksLayer(o),t.node.destroy()):o.tag===l.WALL&&t.node.destroy()},n}(i))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/GameCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Ball.ts","./GameData.ts","./BricksObjectPool.ts","./PaddleMgr.ts","./TopUI.ts","./Utils.ts","./NetworkMgr.ts","./Popup.ts","./SceneMgr.ts"],(function(e){var t,a,i,o,n,l,r,s,d,c,p,h,u,g,f,m,y,v,I,b,N,C,B,_,S,E,T,M,P,U,O,w,A,x;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,r=e.Prefab,s=e.Node,d=e.director,c=e.Canvas,p=e.UITransform,h=e.tween,u=e.Vec3,g=e.input,f=e.Input,m=e.Button,y=e.KeyCode,v=e.instantiate,I=e.Vec2,b=e.Tween,N=e.Label,C=e.Component},function(e){B=e.Ball},function(e){_=e.GAMEDATA,S=e.PlayMode},function(e){E=e.BricksObjectPool},function(e){T=e.PaddleMgr},function(e){M=e.TopUI,P=e.TOPUI_KIND},function(e){U=e.UTILS},function(e){O=e.NETWORKMGR},function(e){w=e.Popup,A=e.PopupType},function(e){x=e.SCENEMGR}],execute:function(){var D,k,G,K,L,z,R,F,j,V,W,Y,q,H,Q,X,J,Z,$,ee,te,ae,ie,oe,ne;n._RF.push({},"ceb63uWNClCqYEW4TwF9Dt0","GameCtrl",void 0);var le=l.ccclass,re=l.property;e("GameCtrl",(D=le("GameCtrl"),k=re({type:M}),G=re({type:r}),K=re({type:r}),L=re({type:T}),z=re({type:s}),R=re({type:s}),F=re({type:s}),j=re({type:E}),V=re({type:s}),W=re({type:s}),Y=re({type:s}),D((Q=t((H=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),l=0;l<a;l++)n[l]=arguments[l];return t=e.call.apply(e,[this].concat(n))||this,i(t,"topUI",Q,o(t)),i(t,"ballPrefab",X,o(t)),i(t,"enemyBallPrefab",J,o(t)),i(t,"paddleMgr",Z,o(t)),i(t,"gameOverNode",$,o(t)),i(t,"gameClearNode",ee,o(t)),i(t,"bonusCompleteNode",te,o(t)),i(t,"bricksObjPool",ae,o(t)),i(t,"playIntroEffNode",ie,o(t)),i(t,"defenseBrickNode",oe,o(t)),i(t,"stageAlertNode",ne,o(t)),t.canvas=null,t.moveBallMap=new Map,t.has_ball_max=0,t.dead_ball_cnt=0,t.cur_ball_cnt=0,t.isPlaying=!1,t.isBallStop=!1,t.screen_width=0,t.paddle_pos_min=0,t.paddle_pos_max=0,t.isNotiSaveScore=!1,t}a(t,e);var n=t.prototype;return n.onLoad=function(){this.initListener();var e=d.getScene();this.canvas=e.getComponentInChildren(c),this.screen_width=this.canvas.getComponent(p).width,this.setPaddleWidth(),this.has_ball_max=_.getPaddleAttr().ball_count,this.topUI.updateTopUI(P.LIFE,this.has_ball_max-this.dead_ball_cnt,!1),_.getPlayMode()===S.STAGE&&this.topUI.updateTopUI(P.STAGE,_.getCurStage(),!1),_.tutorial&&this.topUI.hideBonusStr(),this.setPlayIntroShow()},n.setPlayIntroShow=function(){var e=this;this.playIntroEffNode[0].active=!0,this.playIntroEffNode[1].active=!0,h(this.node).delay(.5).call((function(){if(e.playIntroEffectOut(),e.paddleMgr.setBallDirection(!1),e.stageAlertNode.active=!0,_.tutorial){var t="Stage"+_.getTutorialStage();e.stageAlertNode.getChildByName("Tutorial").getChildByName(t).active=!0}else if(_.getPlayMode()===S.STAGE){var a=e.stageAlertNode.getChildByName("Stage");null!==a&&(a.getChildByName(_.getCurStage().toString()).active=!0)}else _.getPlayMode()===S.INFINITE&&(e.stageAlertNode.getChildByName("Infinite").active=!0,e.paddleMgr.setBallDirection(!0),e.isPlaying=!0);_.getPlayMode()===S.STAGE||_.tutorial?h(e.stageAlertNode).delay(2).call((function(){if(_.getPlayMode()===S.STAGE){var t=e.stageAlertNode.getChildByName("Stage");null!==t&&(t.getChildByName(_.getCurStage().toString()).active=!1)}e.stageAlertNode.active=!1,e.paddleMgr.setBallDirection(!0),e.isPlaying=!0})).start():h(e.stageAlertNode).delay(1.5).call((function(){e.stageAlertNode.active=!1})).start()})).start()},n.playIntroEffetIn=function(){var e=this;this.playIntroEffNode[0].active=!0,h(this.playIntroEffNode[0].position).to(.3,new u(0,0,0),{easing:"smooth",onUpdate:function(t,a){e.playIntroEffNode[0].position=t}}).start(),this.playIntroEffNode[1].active=!0,h(this.playIntroEffNode[1].position).to(.3,new u(0,0,0),{easing:"smooth",onUpdate:function(t,a){e.playIntroEffNode[1].position=t}}).start()},n.playIntroEffectOut=function(){var e=this;h(this.playIntroEffNode[0].position).to(.3,new u(-this.screen_width/2,0,0),{easing:"smooth",onUpdate:function(t,a){e.playIntroEffNode[0].position=t}}).call((function(){e.playIntroEffNode[0].active=!1})).start(),h(this.playIntroEffNode[1].position).to(.3,new u(this.screen_width/2,0,0),{easing:"smooth",onUpdate:function(t,a){e.playIntroEffNode[1].position=t}}).call((function(){e.playIntroEffNode[1].active=!1})).start()},n.setPaddleWidth=function(){var e=this.paddleMgr.getContentWidth()/2;this.paddle_pos_min=e-this.screen_width/2,this.paddle_pos_max=this.screen_width/2-e},n.initListener=function(){var e=this;g.on(f.EventType.TOUCH_START,this.onTouchStart,this),g.on(f.EventType.TOUCH_MOVE,this.onPaddleMove,this),g.on(f.EventType.MOUSE_MOVE,this.onPaddleMove,this),g.on(f.EventType.KEY_DOWN,this.onKeyStart,this);var t=this.gameClearNode.getChildByName("BtnNext").getComponent(m);_.tutorial&&t.node.setPosition(0,t.node.position.y),t.node.on(m.EventType.CLICK,(function(){_.tutorial?x.nextScene("tutorial",!0):e.nextStageEffect()}),this);var a=this.gameClearNode.getChildByName("BtnRetry").getComponent(m);_.tutorial?a.node.active=!1:a.node.on(m.EventType.CLICK,(function(){e.resetGame(!1)}),this);var i=this.gameClearNode.getChildByName("BtnHome").getComponent(m);_.tutorial?i.node.active=!1:i.node.on(m.EventType.CLICK,(function(){_.resetStage();var e=_.getServerData().pid;O.reqUserInfo(e,(function(e){"0"===e.returnCode?(_.setServerData(e),x.nextScene("home",!1)):new w(A.OK,"Caution","A server error has occurred\n("+e.returnMsg+")").open()}))}),this),this.gameOverNode.getChildByName("BtnRetry").getComponent(m).node.on(m.EventType.CLICK,(function(){if(_.getPlayMode()===S.INFINITE){var t=e.gameOverNode.getChildByName("Infinite");t.getChildByName("Normal").active=!1,t.getChildByName("Best").active=!1,t.active=!1}e.resetGame(!1)}),this),this.gameOverNode.getChildByName("BtnHome").getComponent(m).node.on(m.EventType.CLICK,(function(){if(_.resetStage(),_.tutorial)0===_.getEarnedToken()&&_.setEarnedToken(1),x.nextScene("tutorial",!0);else if(!1===e.isNotiSaveScore){new w(A.YES_OR_NO,"NOTIFICATIONS","<size=30><b>To save your BEST SCORE,\n\nvisit the leaderboard!</b></size>\n\n\nWould you like to proceed?",(function(t){"YES"===t?e.isNotiSaveScore=!0:e.reqUserInfo()})).open()}else e.reqUserInfo()}),this),this.gameOverNode.getChildByName("Infinite").getChildByName("BtnLeaderboard").getComponent(m).node.on(m.EventType.CLICK,(function(){new w(A.OK,"ALERT","Comming soon.").open()}),this)},n.onTouchStart=function(e){this.isPlaying&&!1===this.isBallStop&&(this.createBall(this.canvas.node,!1),_.tutorial&&1===_.getTutorialStage()&&(this.paddleMgr.setVisibleShotInfo(0,!1),this.paddleMgr.setVisibleShotInfo(1,!0)))},n.onPaddleMove=function(e){if(this.isPlaying){var t=e.getUILocation().x-this.screen_width/2;t=Math.max(this.paddle_pos_min,t),t=Math.min(t,this.paddle_pos_max),this.paddleMgr.setPosition(t)}},n.onKeyStart=function(e){if(_.getCheatKeyEnable())switch(e.keyCode){case y.KEY_Q:case y.BACKSPACE:this.procGameOver();break;case y.KEY_N:_.getPlayMode()===S.STAGE&&this.procGameClear();break;case y.KEY_X:this.paddleMgr.setImmortal(!0);break;case y.KEY_C:this.paddleMgr.setImmortal(!1)}},n.createBall=function(e,t,a){if(t){var i=v(this.enemyBallPrefab);i.setPosition(a),i.parent=e;var o=Math.random(),n=0===U.getRandomInt(0,1),l=new I(n?o:-o,-1);i.getComponent(B).moveStart(this.cur_ball_cnt,t,l)}else if(this.cur_ball_cnt<this.has_ball_max){var r=v(this.ballPrefab);r.setPosition(new u(this.paddleMgr.node.position.x,this.paddleMgr.node.position.y+30,0)),r.parent=e,this.moveBallMap.set(this.cur_ball_cnt,r);var s=this.paddleMgr.getBallVector();r.getComponent(B).moveStart(this.cur_ball_cnt,t,s),this.cur_ball_cnt++,this.cur_ball_cnt>=this.has_ball_max&&this.paddleMgr.setBallDirection(!1)}},n.destroyBall=function(e){var t=this.moveBallMap.get(e);t&&(this.moveBallMap.delete(e),t.destroy(),this.dead_ball_cnt++,this.topUI.updateTopUI(P.LIFE,this.has_ball_max-this.dead_ball_cnt,!1),this.dead_ball_cnt>=this.has_ball_max&&0===this.moveBallMap.size&&this.procGameOver())},n.resetGame=function(e){b.stopAll(),e?this.destroyAllBall():this.topUI.resetTopUI(!0,!0,!0),_.getPlayMode()===S.STAGE&&this.topUI.updateTopUI(P.STAGE,_.getCurStage(),!1),this.gameOverNode.active=!1,this.gameClearNode.active=!1,this.has_ball_max=_.getPaddleAttr().ball_count,this.bricksObjPool.resetBricks(),this.moveBallMap.clear(),this.cur_ball_cnt=0,this.dead_ball_cnt=0,this.isPlaying=!0,this.paddleMgr.resetPaddle(),this.isBallStop=!1,this.topUI.updateTopUI(P.LIFE,this.has_ball_max-this.dead_ball_cnt,!1)},n.procGameOver=function(){var e=this;this.isPlaying&&(this.isPlaying=!1,this.paddleMgr.setBallDirection(!1),this.moveBallStop(),this.bricksObjPool.getItemMgr().setItemsStop(!0),this.bricksObjPool.stopBricks(),this.paddleMgr.setVisibleShotInfo(1,!1),_.getPlayMode()===S.INFINITE?this.saveData(this.getTopUIDiamond(),this.getTopUIScore(),0):h(this.node).delay(.8).call((function(){e.gameOverNode.active=!0,e.gameOverNode.setSiblingIndex(9990),e.gameOverNode.getChildByName("Stage").active=!0})).start())},n.procGameClear=function(){var e=this;this.isPlaying&&(this.isPlaying=!1,this.paddleMgr.resetBullet(),this.paddleMgr.setVisibleShotInfo(1,!1),_.nextStage(),!1===_.tutorial&&this.saveData(this.getTopUIDiamond(),0,_.getCurStage()),h(this.node).delay(.5).call((function(){e.gameClearNode.active=!0,e.gameClearNode.setSiblingIndex(9990)})).start())},n.nextStageEffect=function(){var e=this;this.gameOverNode.active=!1,this.gameClearNode.active=!1,this.destroyAllBall(),this.playIntroEffetIn(),h(this.node).delay(.5).call((function(){e.nextGame()})).start()},n.nextGame=function(){this.resetGame(!0),this.setPlayIntroShow()},n.isPlayingNow=function(){return this.isPlaying},n.moveBallStop=function(){null!==this.moveBallMap&&this.moveBallMap.size>0&&this.moveBallMap.forEach((function(e){e&&e.getComponent(B).moveStop()})),this.isBallStop=!0},n.destroyAllBall=function(){this.moveBallMap.size>0&&this.moveBallMap.forEach((function(e){e&&e.destroy()}))},n.getTopUIPos=function(e){return this.topUI.getTopUIPos(e)},n.getTopUIScore=function(){return this.topUI.getCurScore()},n.getTopUIDiamond=function(){return this.topUI.getEarnedDiamond()},n.updateScore=function(e,t){var a=this.moveBallMap.size;this.topUI.updateTopUI(P.SCORE,a+e,t)},n.updateToken=function(e){this.topUI.updateTopUI(P.TOKEN,e,!0)},n.updateDiamond=function(e){this.topUI.updateTopUI(P.DIAMOND,e,!0)},n.updateLife=function(e){this.has_ball_max+=e,this.topUI.updateTopUI(P.LIFE,this.has_ball_max-this.dead_ball_cnt,!0),this.cur_ball_cnt<this.has_ball_max&&this.paddleMgr.setBallDirection(!0)},n.updateBonusStr=function(e){this.topUI.updateTopUI(P.BONUS_STR,e,!0),this.checkBonusComplete()},n.hugeBall=function(){!1===this.isBallStop&&this.isPlayingNow()&&this.moveBallMap.forEach((function(e){e&&e.getComponent(B).hugeBall()}))},n.bulletPaddle=function(){this.isPlayingNow()&&this.bricksObjPool.isExistBricks()&&this.paddleMgr.createBullet()},n.getPaddles=function(){return this.paddleMgr.getPaddles()},n.defenseBrick=function(){this.bricksObjPool.createDefenseBricks()},n.checkBonusComplete=function(){this.isPlaying&&this.topUI.isCompleteBonusStr()&&this.procBonusComplete()},n.procBonusComplete=function(){var e=this;this.bonusCompleteNode.active=!0,h(this.bonusCompleteNode).to(.2,{scale:new u(1.2,1.2,0)}).to(.2,{scale:new u(1,1,0)}).delay(2).call((function(){e.topUI.updateTopUI(P.DIAMOND,250,!0),e.bonusCompleteNode.active=!1,e.topUI.resetBonusStr()})).start()},n.saveData=function(e,t,a){var i=this,o=_.getServerData().pid;O.reqSaveData(o,e,t,a,(function(e){"0"===e.returnCode?_.getPlayMode()===S.INFINITE&&h(i.node).delay(.8).call((function(){i.gameOverNode.active=!0,i.gameOverNode.setSiblingIndex(9990),i.gameOverNode.getChildByName("Bg").active=!1;var t=i.gameOverNode.getChildByName("Infinite");t.active=!0,1===e.isBestScore?t.getChildByName("Best").active=!0:t.getChildByName("Normal").active=!0;var a=U.insertCommas(i.getTopUIScore());t.getChildByName("Score").getComponent(N).string=a})).start():new w(A.OK,"Caution","A server error has occurred\n("+e.returnMsg+")").open()}))},n.reqUserInfo=function(){var e=_.getServerData().pid;O.reqUserInfo(e,(function(e){"0"===e.returnCode?(_.setServerData(e),x.nextScene("home",!1)):new w(A.OK,"Caution","A server error has occurred\n("+e.returnMsg+")").open()}))},t}(C)).prototype,"topUI",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(H.prototype,"ballPrefab",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(H.prototype,"enemyBallPrefab",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(H.prototype,"paddleMgr",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(H.prototype,"gameOverNode",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(H.prototype,"gameClearNode",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(H.prototype,"bonusCompleteNode",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t(H.prototype,"bricksObjPool",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t(H.prototype,"playIntroEffNode",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),oe=t(H.prototype,"defenseBrickNode",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(H.prototype,"stageAlertNode",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=H))||q));n._RF.pop()}}}));

System.register("chunks:///_virtual/GameData.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"f863dqHSShP5qo06QocElzc","GameData",void 0);var i=t("PlayMode",function(t){return t[t.STAGE=0]="STAGE",t[t.INFINITE=1]="INFINITE",t}({})),a=t("GameData",function(){function t(){this.playMode=i.STAGE,this.curStage=1,this.highScore=0,this.earnToken=0,this.paddleAttr=void 0,this.serverData=void 0,this.userData=void 0,this.isTutorial=!1,this.tutorialStage=1,this.tutorialStep=0,this.tutorialAddress=null,this.tutorialMnemonic=null,this.cheatKeyEnable=!1}t.getInstance=function(){return null===t.instance&&(t.instance=new t),t.instance};var n=t.prototype;return n.getPlayMode=function(){return this.playMode},n.setPlayMode=function(t){this.playMode=t},n.setPaddleAttr=function(t){var e=this;this.paddleAttr={paddle_width:100,paddle_count:1,ball_count:3},t.length>0&&t.forEach((function(t){switch(t.trait_type){case"paddle_width":e.paddleAttr.paddle_width=parseInt(t.value);break;case"paddle_count":e.paddleAttr.paddle_count=parseInt(t.value);break;case"ball_count":e.paddleAttr.ball_count=parseInt(t.value)}}))},n.getPaddleAttr=function(){return this.paddleAttr},n.setServerData=function(t){this.serverData=t},n.getServerData=function(){return this.serverData},n.setUserData=function(t){this.userData=t},n.getUserData=function(){return this.userData},n.getCurStage=function(){return this.curStage},n.setCurStage=function(t){this.curStage=t},n.nextStage=function(){var t=this.getCurStage()+1;t>20&&(t=1),this.curStage=t,console.log(">>>> nextStage : ",this.curStage)},n.resetStage=function(){this.curStage=1},n.setHighScore=function(t){t>this.highScore&&(this.highScore=t)},n.getHighScore=function(){return this.highScore},n.getEarnedToken=function(){return this.earnToken},n.setEarnedToken=function(t){this.earnToken=t},n.addEarnedToken=function(t){return this.earnToken+=t,this.earnToken},n.initTutorial=function(){this.isTutorial=!0,this.tutorialStage=1,this.tutorialStep=0,this.playMode=i.STAGE,this.earnToken=0,this.setPaddleAttr([])},n.getTutorialStage=function(){return this.tutorialStage},n.setTutorialStage=function(t){this.tutorialStage=t},n.getTutorialStep=function(){return this.tutorialStep},n.setTutorialStep=function(t){this.tutorialStep=t},n.getTutorialAddress=function(){return this.tutorialAddress},n.setTutorialAddress=function(t){this.tutorialAddress=t},n.getTutorialMnemonic=function(){return this.tutorialMnemonic},n.setTutorialMnemonic=function(t){this.tutorialMnemonic=t},n.resetTutorial=function(){this.isTutorial=!1,this.tutorialStage=1,this.tutorialStep=0},n.setCheatKeyEnable=function(t){this.cheatKeyEnable=t},n.getCheatKeyEnable=function(){return this.cheatKeyEnable},e(t,[{key:"tutorial",get:function(){return this.isTutorial},set:function(t){this.isTutorial=t}}]),t}());a.instance=null;t("GAMEDATA",a.getInstance());n._RF.pop()}}}));

System.register("chunks:///_virtual/Home.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Wallet.ts","./Popup.ts","./SceneMgr.ts","./GameData.ts"],(function(e){var t,n,o,i,r,l,a,u,c,p,s,f,b,y,d,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,a=e.Node,u=e.Button,c=e.Tween,p=e.Component},function(e){s=e.Wallet},function(e){f=e.Popup,b=e.PopupType},function(e){y=e.SCENEMGR},function(e){d=e.GAMEDATA,g=e.PlayMode}],execute:function(){var N,m,h,v,S,w,I,T,C,z,P,L,E;r._RF.push({},"b7477q90L5HsYfz9LoIn4rZ","Home",void 0);var A=l.ccclass,H=l.property;e("Home",(N=A("Home"),m=H({type:a}),h=H({type:a}),v=H({type:u}),S=H({type:u}),w=H({type:u}),N((C=t((T=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,o(t,"walletNode",C,i(t)),o(t,"stageSelectNode",z,i(t)),o(t,"btnInfinity",P,i(t)),o(t,"btnStage",L,i(t)),o(t,"btnBack",E,i(t)),t}n(t,e);var r=t.prototype;return r.onLoad=function(){var e=this;this.btnInfinity.node.on(u.EventType.CLICK,(function(){!1===e.walletNode.getComponent(s).isSltNft()?e.errPopup():(c.stopAll(),d.setPlayMode(g.INFINITE),y.nextScene("game",!1))}),this),this.btnStage.node.on(u.EventType.CLICK,(function(){!1===e.walletNode.getComponent(s).isSltNft()?e.errPopup():setTimeout((function(){e.walletNode.active=!1,e.stageSelectNode.active=!0}),200)}),this),this.btnBack.node.on(u.EventType.CLICK,(function(){e.walletNode.active=!0,e.stageSelectNode.active=!1}),this)},r.errPopup=function(){new f(b.OK,"NOTIFICATIONS","<color=#000000><size=30><b>Select the paddle!</size></b>\n\nTo start the game,\nyou need to paddle along!</color>").open()},t}(p)).prototype,"walletNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(T.prototype,"stageSelectNode",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(T.prototype,"btnInfinity",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(T.prototype,"btnStage",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(T.prototype,"btnBack",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=T))||I));r._RF.pop()}}}));

System.register("chunks:///_virtual/Item.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Ball.ts","./ItemMgr.ts","./Paddle.ts"],(function(t){var e,n,o,i,s,c,a,r,_,d,l,B,S;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,i=t.BoxCollider2D,s=t.Contact2DType,c=t.RigidBody2D,a=t.tween,r=t.Vec3,_=t.ERigidBody2DType,d=t.Component},function(t){l=t.ColliderTag},function(t){B=t.ItemMgr},function(t){S=t.Paddle}],execute:function(){var p;n._RF.push({},"2e2adIIZnpFBY8Y7dTq6ikg","Item",void 0);var u=o.ccclass,O=(o.property,t("ItemKind",function(t){return t[t.COIN_POUCH=0]="COIN_POUCH",t[t.HUGE_BALL=1]="HUGE_BALL",t[t.PADDLE_GUN=2]="PADDLE_GUN",t[t.LIFE=3]="LIFE",t[t.BOMB=4]="BOMB",t[t.BONUS_STR_X=5]="BONUS_STR_X",t[t.BONUS_STR_P=6]="BONUS_STR_P",t[t.BONUS_STR_L=7]="BONUS_STR_L",t[t.BONUS_STR_A=8]="BONUS_STR_A",t[t.SCORE_UP=9]="SCORE_UP",t[t.GAME_TOKEN_POUCH=10]="GAME_TOKEN_POUCH",t[t.DEFENSE_BRICK=11]="DEFENSE_BRICK",t[t.MAX=12]="MAX",t}({})));t("Item",u("Item")(p=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))||this).itemKind=0,e.isTweenAction=!1,e.targetPos=null,e}e(n,t);var o=n.prototype;return o.onLoad=function(){this.node.getComponent(i).on(s.BEGIN_CONTACT,this.onBeginContact,this)},o.setProperty=function(t,e,n){this.itemKind=t,this.node.setPosition(e),this.targetPos=n},o.onBeginContact=function(t,e,n){e.tag===l.PADDLE?(this.node.getComponent(c).destroy(),this.itemGetProc(e)):e.tag===l.BALL_OUT&&t.node.destroy()},o.itemGetProc=function(t){var e=this;switch(this.itemKind){case O.COIN_POUCH:case O.LIFE:case O.BONUS_STR_X:case O.BONUS_STR_P:case O.BONUS_STR_L:case O.BONUS_STR_A:case O.SCORE_UP:case O.GAME_TOKEN_POUCH:this.isTweenAction=!0,a(this.node.position).to(.5,this.targetPos,{easing:"quadIn",onUpdate:function(t,n){null!==e.node&&(e.node.position=t)}}).call((function(){try{e.node.isValid&&(e.node.parent.getComponent(B).procItem(e.itemKind),e.node.destroy())}catch(t){console.log(">> item error = ",t)}})).start();break;case O.HUGE_BALL:case O.PADDLE_GUN:case O.DEFENSE_BRICK:this.node.getComponent(c).enabledContactListener=!1,a(this.node).to(.2,{scale:new r(2,2,0)}).call((function(){e.node.parent.getComponent(B).procItem(e.itemKind),e.node.destroy()})).start();break;case O.BOMB:t.node.getComponent(S).bombPaddle(!0),this.node.destroy()}},o.stopItem=function(t){if(!1===this.isTweenAction){var e=this.node.getComponent(c);null!==e&&(e.gravityScale=t?0:.2,e.type=t?_.Static:_.Dynamic)}},n}(d))||p);n._RF.pop()}}}));

System.register("chunks:///_virtual/ItemMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utils.ts","./Item.ts"],(function(e){var t,i,a,r,n,s,c,o,m,l,h,u,C,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){n=e.cclegacy,s=e._decorator,c=e.Prefab,o=e.instantiate,m=e.tween,l=e.Vec3,h=e.Component},function(e){u=e.UTILS},function(e){C=e.Item,g=e.ItemKind}],execute:function(){var p,_,f,d,I,S;n._RF.push({},"af34aivDOFLkpfaeCCs5iJq","ItemMgr",void 0);var E=s.ccclass,k=s.property;e("ItemMgr",(p=E("ItemMgr"),_=k({type:c}),p(((S=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return t=e.call.apply(e,[this].concat(n))||this,a(t,"items",I,r(t)),t.itemTotalRate=void 0,t.itemEachRate=void 0,t.itemExistCheck=!1,t.itemChkTime=0,t}i(t,e);var n=t.prototype;return n.setItemMgrInfo=function(e,i,a){t.gameCtrl=e,this.itemTotalRate=i,this.itemEachRate=a,this.itemExistCheck=!1,this.itemChkTime=0},n.createItem=function(e){var t=this;if(this.itemTotalRate>0){var i=u.getRandomInt(1,100);if(i<this.itemTotalRate){i=u.getRandomInt(1,100);for(var a=0,r=0,n=0;n<this.itemEachRate.length;n++){var s=this.itemEachRate[n];if(i<=s+a){r=n;break}a+=s}var c=o(this.items[r]);m(c).delay(.2).call((function(){t.node.addChild(c),c.getComponent(C).setProperty(r,e,t.targetPos(r))})).start()}}},n.setItemsStop=function(e){this.node.getComponentsInChildren(C).forEach((function(t){t&&t.stopItem(e)}))},n.procItem=function(e){switch(e){case g.COIN_POUCH:t.gameCtrl.updateDiamond(10);break;case g.GAME_TOKEN_POUCH:t.gameCtrl.updateToken(100);break;case g.HUGE_BALL:t.gameCtrl.hugeBall();break;case g.PADDLE_GUN:t.gameCtrl.bulletPaddle();break;case g.LIFE:t.gameCtrl.updateLife(1);break;case g.BONUS_STR_X:case g.BONUS_STR_P:case g.BONUS_STR_L:case g.BONUS_STR_A:t.gameCtrl.updateBonusStr(e-g.BONUS_STR_X);break;case g.SCORE_UP:t.gameCtrl.updateScore(10,!0);break;case g.DEFENSE_BRICK:t.gameCtrl.defenseBrick()}},n.targetPos=function(e){switch(e){case g.COIN_POUCH:case g.LIFE:case g.BONUS_STR_X:case g.BONUS_STR_P:case g.BONUS_STR_L:case g.BONUS_STR_A:case g.SCORE_UP:case g.GAME_TOKEN_POUCH:return t.gameCtrl.getTopUIPos(e)}return new l(0,0,0)},n.checkItemExist=function(){return this.node.getComponentsInChildren(C).length>0&&(this.itemExistCheck=!0,!0)},n.update=function(e){this.itemExistCheck&&t.gameCtrl.isPlayingNow()&&(this.itemChkTime+=e,this.itemChkTime>=1&&(this.itemChkTime=0,!1===this.checkItemExist()&&(t.gameCtrl.procGameClear(),this.itemExistCheck=!1)))},t}(h)).gameCtrl=null,I=t((d=S).prototype,"items",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=d))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/LogIn.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Popup.ts","./NetworkMgr.ts","./GameData.ts","./SceneMgr.ts"],(function(e){var t,n,o,i,r,a,u,l,c,p,s,g,d,y,f,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,u=e.Node,l=e.Toggle,c=e.Button,p=e.EditBox,s=e.Component},function(e){g=e.Popup,d=e.PopupType},function(e){y=e.NETWORKMGR},function(e){f=e.GAMEDATA},function(e){b=e.SCENEMGR}],execute:function(){var h,C,m,N,w,L,v,E,B,T,I,P,S;r._RF.push({},"09626zL9opPlYx4o5LSR+w9","LogIn",void 0);var z=a.ccclass,D=a.property;e("LogIn",(h=z("LogIn"),C=D({type:u}),m=D({type:l}),N=D({type:c}),w=D({type:c}),L=D({type:c}),h((B=t((E=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,o(t,"registerNode",B,i(t)),o(t,"togglePw",T,i(t)),o(t,"btnLogin",I,i(t)),o(t,"btnNew",P,i(t)),o(t,"btnBack",S,i(t)),t}n(t,e);var r=t.prototype;return r.onLoad=function(){var e=this;this.btnLogin.node.on(c.EventType.CLICK,(function(){e.reqLogin()})),this.togglePw.node.on("toggle",(function(t){var n=e.registerNode.getChildByName("Pwd").getChildByName("EditBox").getComponent(p);t.isChecked?n.inputFlag=0:n.inputFlag=4}),this),this.btnNew.node.on(c.EventType.CLICK,(function(){new g(d.YES_OR_NO,"NOTIFICATION","<size=30><b>To sign up, you need to\n\nstart playing 'START HERE'</b></size>\n\n\nWould you like to proceed?",(function(e){"YES"===e&&(f.initTutorial(),b.nextScene("game",!1))})).open()}),this),this.btnBack.node.on(c.EventType.CLICK,(function(){b.nextSceneDirectly("menu")}),this)},r.reqLogin=function(){var e=this.registerNode.getChildByName("ID").getChildByName("EditBox").getComponent(p).string;if(""===e||void 0===e)return new g(d.OK,"Caution","ID must not be empty").open(),!1;var t=this.registerNode.getChildByName("Pwd").getChildByName("EditBox").getComponent(p).string;f.setUserData({id:e,pw:t}),y.reqLogin(e,t,(function(e){"0"===e.returnCode?(f.tutorial=!1,1===e.isCheat&&f.setCheatKeyEnable(!0),f.setServerData(e),b.nextScene("home",!1)):new g(d.OK,"Caution","A server error has occurred\n("+e.returnMsg+")").open()}))},t}(s)).prototype,"registerNode",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(E.prototype,"togglePw",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(E.prototype,"btnLogin",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(E.prototype,"btnNew",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(E.prototype,"btnBack",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=E))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./Ball.ts","./Brick.ts","./BricksObjectPool.ts","./Bullet.ts","./GameCtrl.ts","./GameData.ts","./Home.ts","./Item.ts","./ItemMgr.ts","./LogIn.ts","./MainMenu.ts","./NetworkMgr.ts","./Paddle.ts","./PaddleMgr.ts","./Persistant.ts","./Popup.ts","./SceneMgr.ts","./SignUp.ts","./StageSelect.ts","./TopUI.ts","./TutorialMgr.ts","./Utils.ts","./Wallet.ts","./XplaJs.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MainMenu.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SceneMgr.ts","./GameData.ts","./Popup.ts"],(function(e){var n,t,i,o,r,a,l,u,c,s,p,b,f,d,y,v;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,l=e.Node,u=e.Button,c=e.Label,s=e.tween,p=e.Vec3,b=e.Component},function(e){f=e.SCENEMGR},function(e){d=e.GAMEDATA},function(e){y=e.Popup,v=e.PopupType}],execute:function(){var h,g,m,w,T,L,z,M,I,A,E,C,N,P,S;r._RF.push({},"5e13fIsEL1ClKRLk26qeImb","MainMenu",void 0);var D=a.ccclass,K=a.property;e("MainMenu",(h=D("MainMenu"),g=K({type:l}),m=K({type:l}),w=K({type:u}),T=K({type:u}),L=K({type:u}),z=K({type:c}),h((A=n((I=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return n=e.call.apply(e,[this].concat(r))||this,i(n,"selectNode",A,o(n)),i(n,"titleNode",E,o(n)),i(n,"btnInfo",C,o(n)),i(n,"btnTutorial",N,o(n)),i(n,"btnAdvanced",P,o(n)),i(n,"versionLabel",S,o(n)),n}t(n,e);var r=n.prototype;return r.onLoad=function(){this.btnTutorial.node.on(u.EventType.CLICK,(function(){d.initTutorial(),f.nextScene("game",!1)}),this),this.btnAdvanced.node.on(u.EventType.CLICK,(function(){f.nextSceneDirectly("login")}),this),this.btnInfo.node.on(u.EventType.CLICK,(function(){new y(v.OK,"JUST LETTING YOU KNOW","<b><size=30>Gameplay data from\n\n'START HERE' won't be saved.</size></b>\n\n\n<size=22>However, the wallets created\nare real XPLA wallets!</size>").open()}),this),this.versionLabel.string="v1.1.0-release"},r.btnActionOutIn=function(e,n,t,i,o,r){n.setPosition(0,i),n.active=!0;var a=s(e.position).to(t,new p(0,i,0),{easing:"smooth",onUpdate:function(n,t){e.position=n}}).call((function(){e.active=!1})),l=s(n.position).to(t,new p(0,o,0),{easing:"smooth",onUpdate:function(e,t){n.position=e}}).call((function(){void 0!==r&&(r.active=!0)}));s(this.node.position).sequence(a,l).start()},n}(b)).prototype,"selectNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=n(I.prototype,"titleNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=n(I.prototype,"btnInfo",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=n(I.prototype,"btnTutorial",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=n(I.prototype,"btnAdvanced",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=n(I.prototype,"versionLabel",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=I))||M));r._RF.pop()}}}));

System.register("chunks:///_virtual/NetworkMgr.ts",["cc"],(function(e){var t,n,a,o,r,c,s;return{setters:[function(e){t=e.cclegacy,n=e.resources,a=e.Prefab,o=e.instantiate,r=e.Label,c=e.BlockInputEvents,s=e.tween}],execute:function(){t._RF.push({},"f3198oEeVJHU7PqrI/SAdr5","NetworkMgr",void 0);var i=e("NetworkMgr",function(){function e(){this.serverUrl="http://192.168.134.36:40202/",this.connectNode=null,this.callBack=void 0}e.getInstance=function(){return null===e.instance&&(e.instance=new e),e.instance};var t=e.prototype;return t.reqRegister=function(e,t,n){this.callBack=n;var a={id:e,password:t,name:""};this.sendData("client/user-register",a,!1)},t.reqLogin=function(e,t,n){this.callBack=n;var a={id:e,password:t};this.sendData("client/user-login",a,!1)},t.reqWalletConnect=function(e,t,n,a){this.callBack=a;var o={wallet:e,id:t,password:n};this.sendData("wallet/wallet-connect",o,!1)},t.reqUserInfo=function(e,t){this.callBack=t;var n={pid:e};this.sendData("client/user-info",n,!1)},t.reqTokenReward=function(e,t,n,a,o){this.callBack=o;var r={wallet:e,amount:t,xplaAmount:n};this.sendUI("wallet/tutorial-token-reward",r,a,"Requesting a token",!0)},t.reqPaddleNftMintUnsigned=function(e,t,n,a,o,r,c,s,i){this.callBack=i;var l={wallet:e,payAmount:t,width:n,count:a,start_has_ball:o,userPubKey:r,userSeq:c};this.sendUI("wallet/tutorial-minting-unsigned",l,s,"Requesting",!1)},t.reqPaddleNftMint=function(e,t,n,a,o){this.callBack=o;var r={wallet:e,tid:t,userTx:n};this.sendUI("wallet/tutorial-minting",r,a,"Minting",!0)},t.reqNftList=function(e,t){this.callBack=t;var n={wallet:e};this.sendData("wallet/wallet-nft-list",n,!1)},t.reqNftInfo=function(e,t,n){this.callBack=n;var a={wallet:e,tokenId:t};this.sendData("wallet/wallet-nft-info",a,!1)},t.reqSaveData=function(e,t,n,a,o){this.callBack=o;var r={pid:e,diamond:t,score:n,stage:a};this.sendData("client/stage-clear",r,!1)},t.sendUI=function(e,t,i,l,d){var u=this;null===i?this.sendData(e,t,d):n.load("prefabs/popup_alert",a,(function(n,a){u.connectNode=o(a),u.connectNode.getComponentInChildren(r).string=null!=l?l:"",u.connectNode.addComponent(c),i.addChild(u.connectNode);var h=u.connectNode.getComponentInChildren(r),f=s(u.connectNode).delay(.3).call((function(){h.string=l+""})),g=s(u.connectNode).delay(.3).call((function(){h.string=l+"."})),w=s(u.connectNode).delay(.3).call((function(){h.string=l+".."})),v=s(u.connectNode).delay(.3).call((function(){h.string=l+"..."}));s(u.connectNode).sequence(f,g,w,v).repeatForever().start(),u.sendData(e,t,d)}))},t.sendData=function(e,t,n){var a=this,o=this.serverUrl+e,r=new Headers;r.append("Content-Type","application/json"),r.append("Accept","application/x-www-form-urlencoded"),fetch(o,{method:"POST",credentials:"omit",headers:r,body:JSON.stringify(t)}).then((function(e){if(e.ok)return e.json();throw new Error("Network Error : "+e.status)})).then((function(e){console.log(">> response data : %o",e),"0"===e.returnCode?void 0===n||!1===n?(a.removeNetUI(),a.callBack(e)):a.checkTxHash(e):(a.removeNetUI(),a.callBack(e))})).catch((function(e){console.log("error: ",e.message),a.removeNetUI(),a.callBack({returnCode:"-1",returnMsg:String(e.message)})}))},t.checkTxHash=function(e){var t=this,n=this.serverUrl+"wallet/txInfo?txhash="+e.txhash;fetch(n).then((function(e){if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((function(n){"0"===n.returnCode?(t.removeNetUI(),t.callBack(e)):"500"===n.returnCode?setTimeout((function(){t.checkTxHash(e)}),1e3):(t.removeNetUI(),t.callBack(n))})).catch((function(e){console.log("error: ",e.message),t.removeNetUI(),t.callBack({returnCode:"-1",returnMsg:String(e.message)})}))},t.removeNetUI=function(){null!==this.connectNode&&(this.connectNode.removeFromParent(),this.connectNode=null)},e}());i.instance=null;e("NETWORKMGR",i.getInstance());t._RF.pop()}}}));

System.register("chunks:///_virtual/Paddle.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BricksObjectPool.ts","./Bullet.ts","./PaddleMgr.ts","./Ball.ts","./Brick.ts"],(function(t){var e,n,o,i,l,r,s,a,c,d,u,p,h,g,b,f,m,P,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){l=t.cclegacy,r=t._decorator,s=t.Prefab,a=t.director,c=t.BoxCollider2D,d=t.Contact2DType,u=t.instantiate,p=t.Vec3,h=t.UIOpacity,g=t.Component},function(t){b=t.BricksObjectPool},function(t){f=t.Bullet},function(t){m=t.PaddleMgr},function(t){P=t.ColliderTag},function(t){C=t.Brick}],execute:function(){var y,B,v,I,k,O,j;l._RF.push({},"c6f8co6I81HE6rsLY2IJKXg","Paddle",void 0);var M=r.ccclass,L=r.property;t("Paddle",(y=M("Paddle"),B=L({type:s}),v=L({type:s}),y((O=e((k=function(t){function e(){for(var e,n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return e=t.call.apply(t,[this].concat(l))||this,o(e,"bullet",O,i(e)),o(e,"gun",j,i(e)),e.bricksObjPool=null,e.paddleMgr=null,e.isImmortal=!1,e}n(e,t);var l=e.prototype;return l.onLoad=function(){this.bricksObjPool=a.getScene().getComponentInChildren(b),this.paddleMgr=a.getScene().getComponentInChildren(m),this.node.getComponent(c).on(d.BEGIN_CONTACT,this.onBeginContact,this)},l.onBeginContact=function(t,e,n){e.tag===P.BRICK?(e.node.getComponent(C).damage(),!1===this.isImmortal&&this.bombPaddle(!0)):e.tag===P.BALL_ENEMY&&(e.node.destroy(),!1===this.isImmortal&&this.bombPaddle(!0))},l.setGun=function(t){if(t){var e=u(this.gun);this.node.addChild(e),e.setPosition(0,20)}else this.node.removeAllChildren()},l.createBullet=function(t,e){var n=u(this.bullet);t.addChild(n),n.setPosition(new p(e.position.x+this.node.position.x,e.position.y+40,0)),n.getComponent(f).setBricksObjPool(this.bricksObjPool)},l.bombPaddle=function(t){t?(this.paddleMgr.bombPaddle(this.node.position),this.node.active=!1):this.node.active=!0},l.isPaddleActive=function(){return this.node.active},l.setImmortal=function(t){this.isImmortal=t,this.node.getComponent(h).opacity=t?120:255},e}(g)).prototype,"bullet",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(k.prototype,"gun",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=k))||I));l._RF.pop()}}}));

System.register("chunks:///_virtual/PaddleMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameData.ts","./Paddle.ts","./GameCtrl.ts"],(function(t){var e,i,o,n,l,a,d,r,s,c,u,h,p,f,g,m,v,P,b,N;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){l=t.cclegacy,a=t._decorator,d=t.Prefab,r=t.Node,s=t.director,c=t.instantiate,u=t.Vec3,h=t.tween,p=t.misc,f=t.v2,g=t.ParticleSystem2D,m=t.UIOpacity,v=t.Component},function(t){P=t.GAMEDATA},function(t){b=t.Paddle},function(t){N=t.GameCtrl}],execute:function(){var B,y,C,M,T,w,D,I,_,A,E,z,G;l._RF.push({},"bd2a8774s1Lr7rfN4uo7eVd","PaddleMgr",void 0);var S=a.ccclass,F=a.property;t("PaddleMgr",(B=S("PaddleMgr"),y=F({type:d}),C=F({type:d}),M=F({type:d}),T=F({type:d}),w=F({type:r}),B((_=e((I=function(t){function e(){for(var e,i=arguments.length,l=new Array(i),a=0;a<i;a++)l[a]=arguments[a];return e=t.call.apply(t,[this].concat(l))||this,o(e,"paddles",_,n(e)),o(e,"direction",A,n(e)),o(e,"directionBg",E,n(e)),o(e,"particle",z,n(e)),o(e,"shotInfoNode",G,n(e)),e.gameCtrl=null,e.isBullet=!1,e.bulletTime=0,e.bulletDuraTime=0,e.bulletEndTime=10,e.paddleMap=new Map,e.directionNode=null,e.directionBgNode=null,e}i(e,t);var l=e.prototype;return l.onLoad=function(){this.gameCtrl=s.getScene().getComponentInChildren(N);var t=P.getPaddleAttr(),e=t.paddle_width,i=t.paddle_count,o=Math.max(0,Math.min(i-1,2)),n=e/[100,120,140][o];this.paddleMap.clear();for(var l=0;l<t.paddle_count;l++){var a=c(this.paddles[o]);this.node.addChild(a),1!==n&&(a.scale=new u(n,1)),this.setChildPaddlePos(t.paddle_width,t.paddle_count,a,l),this.paddleMap.set(l,a.getComponent(b))}this.gameCtrl.setPaddleWidth(),this.createBallDirection(t.paddle_count),P.tutorial&&1===P.getTutorialStage()&&(this.shotInfoNode[0].active=!0,this.shotInfoNode[1].active=!1)},l.createBallDirection=function(t){if(null===this.directionNode){this.directionNode=c(this.direction);var e=Math.min(t-1,2);this.directionBgNode=c(this.directionBg[e])}else this.directionNode.active=!0,this.directionBgNode.active=!0,h(this.directionNode).stop();this.node.addChild(this.directionBgNode),this.node.addChild(this.directionNode),this.directionNode.setPosition(0,0),this.directionNode.angle=30;var i=h(this.directionNode).to(.5,{angle:90}),o=h(this.directionNode).to(.5,{angle:150}),n=h(this.directionNode).to(.5,{angle:90}),l=h(this.directionNode).to(.5,{angle:30});h(this.directionNode).sequence(i,o,n,l).repeatForever().start()},l.getBallVector=function(){var t=p.degreesToRadians(this.directionNode.angle),e=Math.round(100*Math.cos(t))/100,i=Math.round(100*Math.sin(t))/100;return f(e,i)},l.setBallDirection=function(t){this.directionNode.active=t},l.getContentWidth=function(){var t=P.getPaddleAttr(),e=0;return this.paddleMap.forEach((function(i){null!==i&&(i.isPaddleActive()&&(e+=t.paddle_width))})),e},l.setPosition=function(t){this.node.setPosition(new u(t,this.node.position.y,0))},l.setChildPaddlePos=function(t,e,i,o){var n=0;e>1&&(n=-(t/2)*(e-1));var l=n+t*o;i.setPosition(new u(l,i.position.y))},l.getPaddles=function(){var t=[];return this.paddleMap.forEach((function(e){t.push(e)})),t},l.bombPaddle=function(t){var e=this,i=c(this.particle);i.parent=this.node,i.setPosition(t),i.getComponent(g).duration=.5;var o=P.getPaddleAttr();h(this.node).delay(.1).call((function(){var t=0;e.paddleMap.forEach((function(e){null!==e&&e.isPaddleActive()&&t++}));var i=!0,n=0;e.paddleMap.forEach((function(l){l.isPaddleActive()&&(e.setChildPaddlePos(o.paddle_width,t,l.node,n),i=!1,n++)})),i?(e.gameCtrl.destroyAllBall(),e.directionNode.active=!1,e.directionBgNode.active=!1,e.gameCtrl.procGameOver()):e.gameCtrl.setPaddleWidth()})).start()},l.resetPaddle=function(){var t=this,e=P.getPaddleAttr();this.createBallDirection(e.paddle_count),this.paddleMap.forEach((function(i,o){null!==i&&(i.bombPaddle(!1),t.setChildPaddlePos(e.paddle_width,e.paddle_count,i.node,o))})),this.gameCtrl.setPaddleWidth(),this.resetBullet()},l.resetBullet=function(){this.isBullet=!1,this.bulletTime=0,this.bulletDuraTime=0,this.paddleMap.forEach((function(t){null!==t&&t.setGun(!1)}))},l.pauseBullet=function(){this.isBullet=!1},l.resumeBullet=function(){!1===this.isBullet&&this.bulletDuraTime>0&&(this.isBullet=!0)},l.createBullet=function(){this.isBullet=!0,this.bulletTime=0,this.bulletDuraTime=0,this.paddleMap.forEach((function(t){null!==t&&t.setGun(!0)}))},l.setImmortal=function(t){this.paddleMap.forEach((function(e){e.setImmortal(t)}))},l.update=function(t){var e=this;this.isBullet&&this.gameCtrl.isPlayingNow()&&(this.bulletDuraTime+=t,this.bulletDuraTime<=this.bulletEndTime?(this.bulletTime+=t,this.bulletTime>=.5&&(this.paddleMap.forEach((function(t){null!==t&&t.isPaddleActive()&&t.createBullet(e.node.parent,e.node)})),this.bulletTime=0)):this.resetBullet())},l.setVisibleShotInfo=function(t,e){if(this.shotInfoNode[t].active=e,1===t)if(e){var i=h(this.shotInfoNode[1].getComponent(m)).to(.1,{opacity:255}),o=h(this.shotInfoNode[1].getComponent(m)).to(2,{opacity:255}),n=h(this.shotInfoNode[1].getComponent(m)).to(.1,{opacity:0});h(this.shotInfoNode[1].getComponent(m)).sequence(i,o,n).repeatForever().start()}else h(this.shotInfoNode[1]).stop()},e}(v)).prototype,"paddles",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),A=e(I.prototype,"direction",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(I.prototype,"directionBg",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=e(I.prototype,"particle",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(I.prototype,"shotInfoNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=I))||D));l._RF.pop()}}}));

System.register("chunks:///_virtual/Persistant.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameData.ts","./SceneMgr.ts","./XplaJs.ts","./NetworkMgr.ts","./Utils.ts"],(function(t){var n,e,s,r,c,o,a,i,u,l;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,s=t._decorator,r=t.director,c=t.Component},function(t){o=t.GameData},function(t){a=t.SceneMgr},function(t){i=t.XplaJs},function(t){u=t.NetworkMgr},function(t){l=t.Utils}],execute:function(){var p;e._RF.push({},"af315yFZBJA54wlI4dYwiWZ","Persistant",void 0);var f=s.ccclass;s.property,t("Persistant",f("Persistant")(p=function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e.prototype.onLoad=function(){o.getInstance(),a.getInstance(),i.getInstance(),u.getInstance(),l.getInstance(),r.loadScene("menu")},e}(c))||p);e._RF.pop()}}}));

System.register("chunks:///_virtual/Popup.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,p,n,s,r,a,l,u,d,c,h,E,T,_,I,C,m,y,f;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,i=t._decorator,p=t.Node,n=t.resources,s=t.SpriteFrame,r=t.Sprite,a=t.BlockInputEvents,l=t.Prefab,u=t.instantiate,d=t.director,c=t.Canvas,h=t.Vec3,E=t.tween,T=t.Label,_=t.RichText,I=t.Button,C=t.math,m=t.UITransform,y=t.Overflow,f=t.Component}],execute:function(){var v;o._RF.push({},"96a0dNwE3RHwrzHc0TRzBrE","Popup",void 0);var U=i.ccclass,g=(i.property,t("PopupType",function(t){return t[t.OK=0]="OK",t[t.YES_OR_NO=1]="YES_OR_NO",t[t.ALERT_SIMPLE=2]="ALERT_SIMPLE",t[t.ALERT_SIMPLE_ANI=3]="ALERT_SIMPLE_ANI",t[t.ALERT_AUTO_REMOVE=4]="ALERT_AUTO_REMOVE",t}({})));t("Popup",U("Popup")(v=function(t){function o(e,o,i,n,s){var r;return(r=t.call(this)||this).popupUI=null,r.title=null,r.descript=void 0,r.url=void 0,r.popupType=null,r.callback=void 0,r.popupType=e,r.title=o,r.descript="<color=#000000>"+i+"</color>",r.callback=n,r.url=s,r.node=new p("Popup"),r}e(o,t);var i=o.prototype;return i.open=function(){var t=this;if(this.popupType!==g.ALERT_AUTO_REMOVE){var e=new p("PopupBg");n.load("textures/popup_back_bg/spriteFrame",s,null,(function(t,o){e.addComponent(r).spriteFrame=o})),this.node.addChild(e),e.addComponent(a)}var o="";o=this.popupType>=g.ALERT_SIMPLE&&this.popupType<=g.ALERT_AUTO_REMOVE?"prefabs/popup_alert":"prefabs/popup_ui",n.load(o,l,(function(e,o){t.popupUI=u(o),t.node.addChild(t.popupUI),d.getScene().getComponentInChildren(c).node.addChild(t.node),t.node.setSiblingIndex(9998),t.popupType===g.ALERT_AUTO_REMOVE?t.addContent():(t.popupUI.scale=new h(.3,.3,0),E(t.popupUI).to(.1,{scale:new h(1.2,1.2,0)}).to(.1,{scale:new h(1,1,0)}).call((function(){t.addContent()})).start())}))},i.close=function(t){void 0!==this.callback&&this.callback(t),this.node.removeFromParent()},i.addContent=function(){var t=this;if(this.popupUI.getChildByName("Title").getComponent(T).string=this.title,this.popupType===g.ALERT_AUTO_REMOVE)this.popupUI.setPosition(this.popupUI.position.x,this.popupUI.position.y+300),E(this.popupUI).delay(1.6).call((function(){t.node.removeFromParent()})).start();else if(this.popupType===g.ALERT_SIMPLE||this.popupType===g.ALERT_SIMPLE_ANI){var e=this.popupUI.getChildByName("Title").getComponent(T);if(this.popupType===g.ALERT_SIMPLE_ANI){var o=E(this.popupUI).delay(.3).call((function(){e.string=t.title+""})),i=E(this.popupUI).delay(.3).call((function(){e.string=t.title+"."})),p=E(this.popupUI).delay(.3).call((function(){e.string=t.title+".."})),n=E(this.popupUI).delay(.3).call((function(){e.string=t.title+"..."}));E(this.popupUI).sequence(o,i,p,n).repeatForever().start()}}else{if(void 0!==this.descript)this.popupUI.getChildByName("Descript").getComponent(_).string=this.descript;this.createButton("textures/btn_x/spriteFrame","X",!0),this.popupType===g.OK?this.createButton("textures/btn_ok/spriteFrame","OK"):this.popupType===g.YES_OR_NO&&(this.createButton("textures/btn_no/spriteFrame","NO"),this.createButton("textures/btn_yes/spriteFrame","YES")),void 0!==this.url&&E(this.node).delay(.05).call((function(){t.addUrl()})).start()}},i.createButton=function(t,e,o){var i=this,a=new p(e);n.load(t,s,null,(function(t,e){a.addComponent(r).spriteFrame=e}));var l=a.addComponent(I);if(l.transition=I.Transition.SCALE,l.zoomScale=1.2,l.duration=.1,this.node.addChild(a),a.on(I.EventType.CLICK,(function(){i.close(e)}),this),o)a.setPosition(this.popupUI.getChildByName("X").position);else if(this.popupType===g.OK)a.setPosition(this.popupUI.getChildByName("OK").position);else if(this.popupType===g.YES_OR_NO){var u=new p;a.addChild(u);var d=u.addComponent(T);d.color=C.Color.WHITE,d.fontSize=30,d.isBold=!0;var c=this.popupUI.getChildByName("YesorNo").position.y;"NO"===e?(a.setPosition(this.popupUI.getChildByName("YesorNo").getChildByName("No").position.x,c),d.string="NO"):"YES"===e&&(a.setPosition(this.popupUI.getChildByName("YesorNo").getChildByName("Yes").position.x,c),d.string="YES")}},i.addUrl=function(){var t=this,e=this.popupUI.getChildByName("Descript"),o=e.getComponent(m).contentSize.height,i=new p("Url");this.node.addChild(i),i.addComponent(m).anchorY=1,i.setPosition(i.position.x,e.position.y-o);var n=i.addComponent(T);n.string=this.url,n.fontSize=23,n.overflow=y.RESIZE_HEIGHT,n.color=C.Color.BLUE,n.enableWrapText=!0,n.isUnderline=!0,n.isItalic=!0,n.isBold=!0,i.getComponent(m).contentSize=new C.Size(600,50.4),i.addComponent(I).transition=I.Transition.NONE,i.on(I.EventType.CLICK,(function(){window.open(t.url,"_blank")}),this)},o}(f))||v);o._RF.pop()}}}));

System.register("chunks:///_virtual/SceneMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utils.ts"],(function(e){var n,t,o,a,i,r,d,s,c,l,u,g,h,p,f,m,v,C;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,o=e._decorator,a=e.resources,i=e.director,r=e.Canvas,d=e.BlockInputEvents,s=e.UIOpacity,c=e.tween,l=e.Node,u=e.UITransform,g=e.Prefab,h=e.instantiate,p=e.Label,f=e.Sprite,m=e.SpriteFrame,v=e.Component},function(e){C=e.UTILS}],execute:function(){var y,S;t._RF.push({},"594abk8bjFFhKa/BfIEUup+","SceneMgr",void 0);var b=o.ccclass,I=(o.property,e("SceneMgr",b("SceneMgr")(((S=function(e){function t(){for(var n,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return(n=e.call.apply(e,[this].concat(o))||this).loadingIdx=0,n.loadingStr=["XPLA means 'Explore and Play,' embodying the vision of encouraging users to explore and play in our web 3.0 space.","XPLA is built by Content Creators, enabling diverse creators to build their Web 3.0 universe with limitless imagination!","XPLA ACADEMY: Your fast-track from zero to hero in onboarding your game to XPLA!","XPLA ACADEMY: Your whimsical journey to XPLA mastery - wallets, transactions, tokens, NFTs, Convert, and Web 3.0 game creation!","Hope you have a peaceful day! 💻☕️"],n}n(t,e),t.getInstance=function(){return null===t.instance&&(t.instance=new t),t.instance};var o=t.prototype;return o.nextSceneDirectly=function(e){a.loadScene(e,(function(e,n){null!==n.scene&&i.runScene(n)}))},o.nextScene=function(e,n){if(n){var t=this.loadingStr.length-1;this.loadingIdx=C.getRandomInt(0,t)}else this.loadingIdx=-1;this.fadeOut(e,n)},o.fadeOut=function(e,n){var t=this,o=i.getScene().getComponentInChildren(r);this.addNode(o.node,0,n,!0),this.node.addComponent(d);var l=.3;n&&(l=4===this.loadingIdx?1.2:3);var u=this.node.getComponent(s);c(u).to(.5,{opacity:255}).delay(l).call((function(){a.loadScene(e,(function(e,o){if(null!==o.scene){var a=o.scene.getComponentInChildren(r);t.addNode(a.node,255,n,!1),t.fadeIn(n),i.runScene(o)}}))})).start()},o.fadeIn=function(e){var n=this,t=e?.5:.3,o=this.node.getComponent(s);c(o).to(t,{opacity:0}).call((function(){n.node.removeFromParent()})).start()},o.addNode=function(e,n,t,o){var i=this;this.node=new l("Loading"),e.addChild(this.node),this.node.setSiblingIndex(9999);var r=e.getComponent(u),d=this.node.addComponent(u);if(d.setContentSize(r.width,r.height),d.setAnchorPoint(.5,.5),t){a.load("prefabs/loading",g,(function(e,n){var t=h(n);t.getChildByName("Label").getComponent(p).string=i.loadingStr[i.loadingIdx],i.node.addChild(t),o&&a.load("prefabs/loading_character",g,(function(e,n){var o=h(n);t.addChild(o),o.setPosition(t.getChildByName("Character").getPosition());var a=4===i.loadingIdx?1.5:3.6;c(o).to(a,{angle:360}).start()}))}))}else{var v=this.node.addComponent(f);a.load("textures/fade_bg/spriteFrame",m,null,(function(e,n){v.spriteFrame=n}))}this.node.addComponent(s).opacity=n},t}(v)).instance=null,y=S))||y));e("SCENEMGR",I.getInstance());t._RF.pop()}}}));

System.register("chunks:///_virtual/SignUp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Popup.ts","./NetworkMgr.ts","./GameData.ts","./SceneMgr.ts"],(function(e){var t,n,i,o,r,g,a,u,s,l,p,d,c,h,C,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,g=e._decorator,a=e.Node,u=e.Toggle,s=e.Button,l=e.EditBox,p=e.Component},function(e){d=e.Popup,c=e.PopupType},function(e){h=e.NETWORKMGR},function(e){C=e.GAMEDATA},function(e){f=e.SCENEMGR}],execute:function(){var m,y,N,B,w,S,b,v,E;r._RF.push({},"738a1zcSfdHWYSVQOOBfVc/","SignUp",void 0);var P=g.ccclass,x=g.property;e("SignUp",(m=P("SignUp"),y=x({type:a}),N=x({type:u}),B=x({type:s}),m((b=t((S=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),g=0;g<n;g++)r[g]=arguments[g];return t=e.call.apply(e,[this].concat(r))||this,i(t,"registerNode",b,o(t)),i(t,"togglePw",v,o(t)),i(t,"btnSignup",E,o(t)),t}n(t,e);var r=t.prototype;return r.onLoad=function(){var e=this;this.btnSignup.node.on(s.EventType.CLICK,(function(){if(e.checkRegister()){new d(c.YES_OR_NO,"NOTIFICATION","<size=30><b>Wand to join?</b></size>\n\n\nAfter signing up,\nauto-login with your info.",(function(t){"YES"===t&&e.reqSignUp()})).open()}})),this.togglePw.node.on("toggle",(function(t){var n=e.registerNode.getChildByName("Pwd").getChildByName("EditBox").getComponent(l),i=e.registerNode.getChildByName("Pwd_Confirm").getChildByName("EditBox").getComponent(l);t.isChecked?(n.inputFlag=0,i.inputFlag=0):(n.inputFlag=4,i.inputFlag=4)}),this)},r.checkRegister=function(){var e=this.registerNode.getChildByName("ID").getChildByName("EditBox").getComponent(l).string;if(""===e||void 0===e)return new d(c.OK,"Caution","ID must not be empty").open(),!1;var t=this.registerNode.getChildByName("Pwd").getChildByName("EditBox").getComponent(l),n=this.registerNode.getChildByName("Pwd_Confirm").getChildByName("EditBox").getComponent(l);return t.string===n.string||(new d(c.OK,"Caution","Password does not match").open(),!1)},r.reqSignUp=function(){var e=C.getTutorialAddress(),t=this.registerNode.getChildByName("ID").getChildByName("EditBox").getComponent(l).string,n=this.registerNode.getChildByName("Pwd").getChildByName("EditBox").getComponent(l).string;h.reqWalletConnect(e,t,n,(function(e){"0"===e.returnCode?h.reqLogin(t,n,(function(e){"0"===e.returnCode&&(1===e.isCheat&&C.setCheatKeyEnable(!0),C.setServerData(e),f.nextScene("home",!1))})):new d(c.OK,"Caution","A server error has occurred\n("+e.returnMsg+")").open()}))},t}(p)).prototype,"registerNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(S.prototype,"togglePw",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(S.prototype,"btnSignup",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=S))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/StageSelect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameData.ts","./SceneMgr.ts"],(function(t){var e,a,n,r,o,i,l,c,s,u,g,p,f,S,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,i=t._decorator,l=t.Prefab,c=t.Node,s=t.instantiate,u=t.Component,g=t.Button,p=t.Tween},function(t){f=t.GAMEDATA,S=t.PlayMode},function(t){d=t.SCENEMGR}],execute:function(){var h,v,y,b,m,C,B;o._RF.push({},"3bfbbrwgYZCP6VHtBflKGaM","StageSelect",void 0);var D=i.ccclass,E=i.property;t("StageSelect",(h=D("StageSelect"),v=E({type:l}),y=E({type:c}),h((C=e((m=function(t){function e(){for(var e,a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o))||this,n(e,"stageLock",C,r(e)),n(e,"arrayNode",B,r(e)),e}a(e,t);var o=e.prototype;return o.onLoad=function(){this.setStage()},o.setStage=function(){for(var t=f.getServerData().highStage,e=0;e<4;e++)for(var a=0;a<5;a++){var n=5*e+a,r=this.arrayNode.getChildByName("Stage"+n);if(null!==r)if(t<n){var o=s(this.stageLock);r.addChild(o)}else this.addButton(r,n.toString())}},o.addButton=function(t,e){var a=new u.EventHandler;a.target=this.node,a.component="StageSelect",a.handler="stageSltCB",a.customEventData=e;var n=t.getComponent(g);n.clickEvents.push(a),n.transition=3},o.stageSltCB=function(t,e){t.target;var a=parseInt(e)+1;p.stopAll(),f.setPlayMode(S.STAGE),f.setCurStage(a),d.nextScene("game",!1)},e}(u)).prototype,"stageLock",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(m.prototype,"arrayNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=m))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/TopUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameData.ts","./Item.ts"],(function(e){var t,n,i,r,o,a,s,c,u,l,b,d,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.Label,c=e.Node,u=e.Vec3,l=e.tween,b=e.Component},function(e){d=e.GAMEDATA},function(e){p=e.ItemKind}],execute:function(){var h,S,f,N,g,T,m,y,w,L,E,O,I,_,U,D,A,v,R,B,C;o._RF.push({},"1755d0S5YRMpaM4KaQ7AOIC","TopUI",void 0);var k=a.ccclass,z=a.property,P=e("TOPUI_KIND",function(e){return e[e.SCORE=0]="SCORE",e[e.STAGE=1]="STAGE",e[e.BONUS_STR=2]="BONUS_STR",e[e.TOKEN=3]="TOKEN",e[e.DIAMOND=4]="DIAMOND",e[e.LIFE=5]="LIFE",e}({}));e("TopUI",(h=k("TopUI"),S=z({type:s}),f=z({type:s}),N=z({type:s}),g=z({type:s}),T=z({type:s}),m=z({type:c}),y=z({type:c}),w=z({type:c}),L=z({type:c}),h((I=t((O=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"scoreLabel",I,r(t)),i(t,"stageLabel",_,r(t)),i(t,"tokenLabel",U,r(t)),i(t,"diamondLabel",D,r(t)),i(t,"lifeLabel",A,r(t)),i(t,"bonusNode",v,r(t)),i(t,"bonusStrNode",R,r(t)),i(t,"modeNode",B,r(t)),i(t,"assetNode",C,r(t)),t.bonusStr=[!1,!1,!1,!1],t.curScore=0,t.earnedDiamond=0,t}n(t,e);var o=t.prototype;return o.onLoad=function(){d.tutorial?this.bonusNode.setPosition(-40,0):this.assetNode[2].active=!1,this.modeNode[d.getPlayMode()].active=!0,this.resetTopUI(!0,!0,!0)},o.resetTopUI=function(e,t,n){e&&(this.curScore=0,this.scoreLabel.string=String(this.curScore)),t&&(this.earnedDiamond=0,this.diamondLabel.string=String(this.earnedDiamond)),n&&(this.tokenLabel.string=String(0),d.setEarnedToken(0))},o.getTopUIPos=function(e){switch(e){case p.COIN_POUCH:return this.assetNode[0].position;case p.LIFE:return this.assetNode[1].position;case p.BONUS_STR_X:case p.BONUS_STR_P:case p.BONUS_STR_L:case p.BONUS_STR_A:return this.bonusStrNode[e-p.BONUS_STR_X].position;case p.SCORE_UP:return this.modeNode[1].position;case p.GAME_TOKEN_POUCH:return this.assetNode[2].position}},o.updateTopUI=function(e,t,n){switch(e){case P.SCORE:this.curScore+=t,this.scoreLabel.string=String(this.curScore),n&&l(this.scoreLabel.node).to(.1,{scale:new u(1.2,1.2,0)}).to(.1,{scale:new u(1,1,0)}).start();break;case P.STAGE:var i=t.toString();i.length<2&&(i="0"+i),this.stageLabel.string=i;break;case P.BONUS_STR:this.bonusStr[t]=!0,this.bonusStrNode[t].getChildByName("Earn").active=!0,n&&this.scaleTweenAction(this.bonusStrNode[t],.1,new u(1.2,1.2,0),new u(1,1,0)).start();break;case P.TOKEN:var r=d.addEarnedToken(t);this.tokenLabel.string=String(r),n&&this.scaleTweenAction(this.assetNode[2],.1,new u(1.1,1.1,0),new u(.6,.6,0)).start();break;case P.DIAMOND:this.earnedDiamond+=t,this.diamondLabel.string=String(this.earnedDiamond),n&&this.scaleTweenAction(this.assetNode[0],.1,new u(1.1,1.1,0),new u(1,1,0)).start();break;case P.LIFE:this.lifeLabel.string=String(t),n&&this.scaleTweenAction(this.assetNode[1],.1,new u(1.1,1.1,0),new u(1,1,0)).start()}},o.isCompleteBonusStr=function(){var e=!0;return this.bonusStr.forEach((function(t,n){!1===t&&(e=!1)})),e},o.resetBonusStr=function(){var e=this;this.bonusStr.forEach((function(t,n){e.bonusStr[n]=!1,e.bonusStrNode[n].getChildByName("Earn").active=!1}))},o.hideBonusStr=function(){this.bonusNode.active=!1},o.getCurScore=function(){return this.curScore},o.getEarnedDiamond=function(){return this.earnedDiamond},o.scaleTweenAction=function(e,t,n,i){return l(e).to(t,{scale:n}).to(t,{scale:i})},t}(b)).prototype,"scoreLabel",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(O.prototype,"stageLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(O.prototype,"tokenLabel",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(O.prototype,"diamondLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(O.prototype,"lifeLabel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(O.prototype,"bonusNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(O.prototype,"bonusStrNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=t(O.prototype,"modeNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=t(O.prototype,"assetNode",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=O))||E));o._RF.pop()}}}));

System.register("chunks:///_virtual/TutorialMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./XplaJs.ts","./Utils.ts","./Popup.ts","./GameData.ts","./SceneMgr.ts","./NetworkMgr.ts"],(function(e){var t,n,i,o,r,a,l,u,s,c,p,d,T,b,E,f,g,y,N,C,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,l=e.Node,u=e.RichText,s=e.Button,c=e.Toggle,p=e.Prefab,d=e.Label,T=e.instantiate,b=e.Component},function(e){E=e.XPLAJS},function(e){f=e.UTILS},function(e){g=e.Popup,y=e.PopupType},function(e){N=e.GAMEDATA},function(e){C=e.SCENEMGR},function(e){h=e.NETWORKMGR}],execute:function(){var m,A,L,v,w,_,M,R,O,K,G,S,x,z,k,W,I,P,F,D,X,B,H,q,U,Y,V,j,J,Q,Z,$,ee,te,ne,ie,oe,re,ae,le,ue,se,ce,pe,de,Te,be;r._RF.push({},"de76e6fqk1B8pn0bAOjwfQr","TutorialMgr",void 0);var Ee=a.ccclass,fe=a.property,ge=function(e){return e[e.MAIN=0]="MAIN",e[e.TOKEN=1]="TOKEN",e[e.EXPLORER=2]="EXPLORER",e[e.NFT=3]="NFT",e[e.TX=4]="TX",e}(ge||{}),ye=function(e){return e[e.WELCOME=0]="WELCOME",e[e.CREATE_WALLET=1]="CREATE_WALLET",e[e.REWARD=2]="REWARD",e[e.GET_TOKEN=3]="GET_TOKEN",e[e.GET_TOKEN_LEARN=4]="GET_TOKEN_LEARN",e[e.GET_NFT=5]="GET_NFT",e[e.GET_NFT_LEARN=6]="GET_NFT_LEARN",e[e.WELL_DONE=7]="WELL_DONE",e[e.MAX=8]="MAX",e}(ye||{});e("TutorialMgr",(m=Ee("TutorialMgr"),A=fe({type:l}),L=fe({type:l}),v=fe({type:l}),w=fe({type:u}),_=fe({type:s}),M=fe({type:s}),R=fe({type:s}),O=fe({type:s}),K=fe({type:s}),G=fe({type:s}),S=fe({type:s}),x=fe({type:s}),z=fe({type:s}),k=fe({type:s}),W=fe({type:s}),I=fe({type:s}),P=fe({type:s}),F=fe({type:s}),D=fe({type:s}),X=fe({type:l}),B=fe({type:c}),H=fe({type:p}),m((Y=t((U=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,i(t,"bgNode",Y,o(t)),i(t,"pilotNode",V,o(t)),i(t,"pagingNode",j,o(t)),i(t,"commonTitleText",J,o(t)),i(t,"btnWelcome",Q,o(t)),i(t,"btnCopyAddress",Z,o(t)),i(t,"btnCopyMnemonic",$,o(t)),i(t,"btnGoReward",ee,o(t)),i(t,"btnStage2",te,o(t)),i(t,"btnTxHash",ne,o(t)),i(t,"btnExplorer",ie,o(t)),i(t,"btnGoToken",oe,o(t)),i(t,"btnLearnToken",re,o(t)),i(t,"btnGoNft",ae,o(t)),i(t,"btnMinting",le,o(t)),i(t,"btnLearnNft",ue,o(t)),i(t,"btnGoLast",se,o(t)),i(t,"btnAcademys",ce,o(t)),i(t,"btnGoTitle",pe,o(t)),i(t,"stepNode",de,o(t)),i(t,"toggleConfirm",Te,o(t)),i(t,"progress",be,o(t)),t.txHashCw20=null,t.mintCost=500,t.rewardWallet=1e3,t.academyLinks=["https://academy.xpla.dev/","https://academy.xpla.dev/docs/category/utilize-tokens-cw20","https://academy.xpla.dev/docs/settings/create-testnet-transaction/check-tx-in-explorer","https://academy.xpla.dev/docs/category/utilize-nftcw721","https://explorer.xpla.io/testnet/tx/"],t}n(t,e);var r=t.prototype;return r.onLoad=function(){var e=N.getTutorialStep();this.setNextStep(e),this.initListener()},r.setNextStep=function(e){var t=this;e>=ye.CREATE_WALLET&&(this.stepNode[e-1].active=!1),e!==ye.GET_TOKEN&&(this.stepNode[e].active=!0),N.setTutorialStep(e);var n=this.node.getChildByName("Step"+e);if(null!==n){var i=1;e>=ye.GET_TOKEN&&e<=ye.GET_NFT?i=2:e>=ye.GET_NFT_LEARN&&(i=3),this.commonTitleText.string="<color=#000000>STAGE "+i+"  <b>"+["A WARM WELCOME","WALLET CREATED","","YOU'VE GOT ACADEMY TOKENS","CHECK OUT XPLA ACADEMY","EXPERIENCE MINTING","CHECK OUT XPLA ACADEMY",""][e]+"</b></color>";var o=0;if(e===ye.WELCOME){o=1,this.pilotNode.active=!0;n.getChildByName("Talk").getChildByName("Sentence").getComponent(u).string="<color=#000000>Welcome to the <b>BREAK THE BRICKS</b>\n: XPLA ACADEMY Edition!\n\nLet's make your XPLA wallet\n<b>super easy!!</b></color>"}else if(e===ye.CREATE_WALLET){o=2;var r=N.getTutorialAddress();this.pilotNode.active=!1,n.getChildByName("Address").getChildByName("Label").getComponent(d).string=r,n.getChildByName("Mnemonic").getChildByName("Label").getComponent(d).string=N.getTutorialMnemonic()}else if(e===ye.REWARD)this.bgNode.active=!1,this.pilotNode.active=!1;else if(e===ye.GET_TOKEN){o=3;var a=N.getEarnedToken(),l=N.getTutorialAddress();h.reqTokenReward(l,a,0,this.node.parent,(function(i){if("0"===i.returnCode){t.pilotNode.active=!0,t.stepNode[e].active=!0,t.txHashCw20=i.txhash;var o="<color=#000000><size=35><b>HOORAY!</b></size>\n<size=18>You've got</size>\n<size=35><b>"+f.insertCommas(a)+" </b></size><size=18>ACADEMY TOKENS!!</size></color>";n.getChildByName("Talk").getChildByName("Sentence").getComponent(u).string=o}else new g(y.OK,"Caution","A server error has occurred\n("+i.returnMsg+")",(function(){t.setNextStep(ye.GET_TOKEN_LEARN)})).open()}))}else e===ye.GET_TOKEN_LEARN?(o=4,this.pilotNode.active=!1):e===ye.GET_NFT?(o=5,this.pilotNode.active=!0):e===ye.GET_NFT_LEARN?(o=6,this.pilotNode.active=!1):e===ye.WELL_DONE&&(this.pilotNode.active=!1,this.bgNode.active=!1);for(var s=0;s<o;s++){var c=T(this.progress);this.pagingNode.addChild(c),c.setPosition(50*s-100,0)}}},r.initListener=function(){var e=this;this.btnWelcome.node.on(s.EventType.CLICK,(function(){var t=E.createWallet();N.setTutorialMnemonic(t),N.setTutorialAddress(E.getWalletAddress(t)),e.setNextStep(ye.CREATE_WALLET)}),this),this.btnCopyAddress.node.on(s.EventType.CLICK,(function(){var e=N.getTutorialAddress();null!==e&&(f.copyToClipboard(e),new g(y.ALERT_AUTO_REMOVE,"Copied!").open())}),this),this.btnCopyMnemonic.node.on(s.EventType.CLICK,(function(){f.copyToClipboard(N.getTutorialMnemonic()),new g(y.ALERT_AUTO_REMOVE,"Copied!").open()}),this),this.toggleConfirm.node.on("toggle",(function(t){e.toggleConfirm.isChecked=t.isChecked}),this),this.btnGoReward.node.on(s.EventType.CLICK,(function(){!1===e.toggleConfirm.isChecked?new g(y.OK,"CAUTION","Copy the mnemonic to a safe place and\ncheck the checkbox").open():e.rewardCreateWallet()}),this),this.btnStage2.node.on(s.EventType.CLICK,(function(){N.setTutorialStage(2),N.setTutorialStep(ye.GET_TOKEN),C.nextScene("game",!0)}),this),this.btnTxHash.node.on(s.EventType.CLICK,(function(){var t=e.academyLinks[ge.TX]+e.txHashCw20;window.open(t,"_blank")}),this),this.btnExplorer.node.on(s.EventType.CLICK,(function(){window.open(e.academyLinks[ge.EXPLORER],"_blank")}),this),this.btnGoToken.node.on(s.EventType.CLICK,(function(){null!==e.txHashCw20&&e.setNextStep(ye.GET_TOKEN_LEARN)}),this),this.btnLearnToken.node.on(s.EventType.CLICK,(function(){window.open(e.academyLinks[ge.TOKEN],"_blank")}),this),this.btnGoNft.node.on(s.EventType.CLICK,(function(){e.setNextStep(ye.GET_NFT)}),this),this.btnMinting.node.on(s.EventType.CLICK,(function(){e.reqPaddleNftMint()}),this),this.btnLearnNft.node.on(s.EventType.CLICK,(function(){window.open(e.academyLinks[ge.NFT],"_blank")}),this),this.btnGoLast.node.on(s.EventType.CLICK,(function(){e.setNextStep(ye.WELL_DONE)}),this),this.btnAcademys.forEach((function(t,n){t.node.on(s.EventType.CLICK,(function(){window.open(e.academyLinks[n],"_blank")}),e)})),this.btnGoTitle.node.on(s.EventType.CLICK,(function(){N.setEarnedToken(0),N.setTutorialStage(1),N.setCurStage(1),N.setTutorialStep(ye.WELCOME),N.tutorial=!1,C.nextSceneDirectly("signup")}),this)},r.rewardCreateWallet=function(){var e=this,t=N.getTutorialAddress();h.reqTokenReward(t,this.rewardWallet,1,this.node.parent,(function(t){"0"===t.returnCode?e.setNextStep(ye.REWARD):new g(y.OK,"Caution","A server error has occurred\n("+t.returnMsg+")\n\nTry Again.",(function(){e.rewardCreateWallet()})).open()}))},r.reqPaddleNftMint=function(){var e=this,t=N.getTutorialAddress(),n=N.getTutorialMnemonic();E.getAccountInfo(n).then((function(i){h.reqPaddleNftMintUnsigned(t,e.mintCost,120,2,5,i.pubKey,i.seqNum,e.node.parent,(function(i){if("0"===i.returnCode){var o=String(i.fee).slice(0,-5),r=f.convertString(o,".",18).slice(0,12),a=Number(i.payAmount),l=Number(i.tid),u=String(i.unsignedTx);E.getSignTx(n,u).then((function(n){h.reqPaddleNftMint(t,l,n,e.node.parent,(function(t){if("0"===t.returnCode){var n="<size=35><b>Minting is completed!</b></size>\n\n\n<size=20><b>Required Token</b>\n<color=#004FFF>"+a+" ACADEMY-TKN</color>\n\n<b>Fee</b>\n<color=#004FFF>"+r+" XPLA</color></size>";new g(y.OK,"NOTIFICATIONS",n,(function(e){N.setTutorialStage(3),N.setTutorialStep(ye.GET_NFT_LEARN);var t=[{trait_type:"paddle_width",value:String(120)},{trait_type:"paddle_count",value:String(2)},{trait_type:"ball_count",value:String(5)}];N.setPaddleAttr(t),C.nextScene("game",!0)})).open()}else new g(y.OK,"Caution","A server error has occurred\n("+t.returnMsg+")\n\nTry Again.",(function(){e.reqPaddleNftMint()})).open()}))}))}else new g(y.OK,"Caution","A server error has occurred\n("+i.returnMsg+")\n\nTry Again.",(function(){e.reqPaddleNftMint()})).open()}))}))},t}(b)).prototype,"bgNode",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(U.prototype,"pilotNode",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(U.prototype,"pagingNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(U.prototype,"commonTitleText",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(U.prototype,"btnWelcome",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(U.prototype,"btnCopyAddress",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(U.prototype,"btnCopyMnemonic",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(U.prototype,"btnGoReward",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(U.prototype,"btnStage2",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(U.prototype,"btnTxHash",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t(U.prototype,"btnExplorer",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t(U.prototype,"btnGoToken",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=t(U.prototype,"btnLearnToken",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t(U.prototype,"btnGoNft",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=t(U.prototype,"btnMinting",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=t(U.prototype,"btnLearnNft",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=t(U.prototype,"btnGoLast",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=t(U.prototype,"btnAcademys",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),pe=t(U.prototype,"btnGoTitle",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=t(U.prototype,"stepNode",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Te=t(U.prototype,"toggleConfirm",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=t(U.prototype,"progress",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=U))||q));r._RF.pop()}}}));

System.register("chunks:///_virtual/Utils.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"517cdEIbDZMl533HGY4AX5o","Utils",void 0);var o=t("Utils",function(){function t(){}t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance};var n=t.prototype;return n.getRandomInt=function(t,n){return t=Math.ceil(t),n=Math.floor(n),Math.floor(Math.random()*(n-t+1))+t},n.convertString=function(t,n,o){if("0"===t||void 0===t)return"0";var e=0;return t.length<=o?(t=this.padStart(t,o-t.length+1,"0"),e=1):e=t.length-o,t.slice(0,e)+n+t.slice(e)},n.padStart=function(t,n,o){return n<=0?t:o.repeat(n)+t},n.insertCommas=function(t){return(new Intl.NumberFormat).format(t)},n.convertRound=function(t,n){return parseFloat(t).toFixed(n)},n.sleep=function(t){},n.copyToClipboard=function(t){navigator.clipboard?navigator.clipboard.writeText(t).then((function(){})).catch((function(t){console.log("Failed to copy text to clipboard : ",t)})):console.log("Clipboard API is not supported in this browser")},t}());o.instance=null;t("UTILS",o.getInstance());n._RF.pop()}}}));

System.register("chunks:///_virtual/Wallet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameData.ts","./SceneMgr.ts","./Utils.ts","./Popup.ts","./NetworkMgr.ts"],(function(t){var e,n,r,i,o,a,l,s,u,d,p,c,f,b,g,h,v,y,m,C,N,w,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,l=t.Node,s=t.Label,u=t.RichText,d=t.Button,p=t.Prefab,c=t.Tween,f=t.UITransform,b=t.tween,g=t.Component,h=t.instantiate,v=t.Vec3},function(t){y=t.GAMEDATA},function(t){m=t.SCENEMGR},function(t){C=t.UTILS},function(t){N=t.Popup,w=t.PopupType},function(t){L=t.NETWORKMGR}],execute:function(){var x,T,S,I,A,M,P,k,_,E,B,z,D,R,U,K,O,q,F,G,W,H,V,Z,j,J,Q,X,Y,$,tt,et,nt,rt,it,ot,at,lt,st,ut,dt,pt,ct;o._RF.push({},"69b34xEVJ5I5o1RCnZZpkiZ","Wallet",void 0);var ft=a.ccclass,bt=a.property;t("Wallet",(x=ft("Wallet"),T=bt({type:l}),S=bt({type:l}),I=bt({type:l}),A=bt({type:s}),M=bt({type:s}),P=bt({type:s}),k=bt({type:u}),_=bt({type:u}),E=bt({type:s}),B=bt({type:s}),z=bt({type:d}),D=bt({type:d}),R=bt({type:d}),U=bt({type:d}),K=bt({type:d}),O=bt({type:d}),q=bt({type:p}),F=bt({type:p}),G=bt({type:p}),W=bt({type:p}),x((Z=e((V=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,r(e,"rankNode",Z,i(e)),r(e,"nftListNode",j,i(e)),r(e,"progressNode",J,i(e)),r(e,"idLabel",Q,i(e)),r(e,"addressLabel",X,i(e)),r(e,"assetAmounts",Y,i(e)),r(e,"rankText",$,i(e)),r(e,"pageText",tt,i(e)),r(e,"scoreLabel",et,i(e)),r(e,"dateLabel",nt,i(e)),r(e,"btnLogout",rt,i(e)),r(e,"btnCopy",it,i(e)),r(e,"btnConvert",ot,i(e)),r(e,"btnLeaderboard",at,i(e)),r(e,"btnMintMore",lt,i(e)),r(e,"btnArrow",st,i(e)),r(e,"paddleBox",ut,i(e)),r(e,"paddleBoxSelector",dt,i(e)),r(e,"paddles",pt,i(e)),r(e,"shadows",ct,i(e)),e.paddleSltIdx=-1,e.paddleSelectorNode=null,e.getNftIdx=0,e.getNftTotalCnt=0,e.getNftTokenList=[],e.nftCurPage=0,e.nftMaxPage=0,e.nftListMap=new Map,e.nftListGradeMap=new Map,e.nftSortArray=null,e}n(e,t);var o=e.prototype;return o.onLoad=function(){this.btnListener(),this.walletUI(),this.nftUI()},o.btnListener=function(){var t=this;this.btnLogout.node.on(d.EventType.CLICK,(function(){c.stopAll(),m.nextScene("menu",!1)}),this),this.btnCopy.node.on(d.EventType.CLICK,(function(){var e=t.addressLabel.string;null!==e&&(C.copyToClipboard(e),new N(w.ALERT_AUTO_REMOVE,"Copied!").open())}),this),this.btnConvert.node.on(d.EventType.CLICK,(function(){new N(w.OK,"ALERT","Comming soon.").open()}),this),this.btnLeaderboard.node.on(d.EventType.CLICK,(function(){new N(w.OK,"ALERT","Comming soon.").open()}),this),this.btnMintMore.node.on(d.EventType.CLICK,(function(){new N(w.OK,"ALERT","Comming soon.").open()}),this),this.btnArrow[0].node.on(d.EventType.CLICK,(function(){t.nftCurPage>0&&t.nftCurPage--,t.makePaddleBox()}),this),this.btnArrow[1].node.on(d.EventType.CLICK,(function(){t.nftCurPage<t.nftMaxPage&&t.nftCurPage++,t.makePaddleBox()}),this)},o.walletUI=function(){var t=y.getUserData().id;this.idLabel.string=t;var e=y.getServerData(),n=e.wallet;this.addressLabel.string=n;var r=C.convertRound(e.xpla,6);this.assetAmounts[0].string=r;var i=C.insertCommas(parseInt(e.token));this.assetAmounts[1].string=i;var o=C.insertCommas(e.diamond);this.assetAmounts[2].string=o;var a=e.chainRanking;if(a<0)this.rankNode[0].active=!0,this.rankNode[1].active=!1;else{this.rankNode[0].active=!1,this.rankNode[1].active=!0;var l=C.insertCommas(a);this.rankText.string="<color=#000000><b>"+l+"</b></color> <color=#fa1a1a><size=18>RANK</size></color>";var s=this.rankText.getComponent(f).width,u=this.rankNode[1].position.x,d=this.rankNode[1].position.y;this.rankNode[1].setPosition(u-s/4,d);var p=C.insertCommas(e.chainHighScore);this.scoreLabel.string=p,this.dateLabel.string="[Date "+e.chainHighScoreDate+"]"}},o.nftUI=function(){var t=this,e=b(this.progressNode).by(2,{angle:-360}),n=b(this.progressNode).by(2,{angle:-360});b(this.progressNode).sequence(e,n).repeatForever().start();this.nftListMap.set("NON_NFT_PADDLE",[{trait_type:"paddle_width",value:"100"},{trait_type:"paddle_count",value:"1"},{trait_type:"ball_count",value:"3"}]),this.nftListGradeMap.set("NON_NFT_PADDLE",230);var r=y.getServerData().wallet;L.reqNftList(r,(function(e){if("0"===e.returnCode){if(t.getNftTokenList=e.tokenList.tokens,t.getNftTotalCnt=t.getNftTokenList.length,t.getNftTotalCnt>0){var n=t.getNftTokenList[t.getNftIdx];t.reqNftInfo(r,String(n))}}else new N(w.OK,"Caution","A server error has occurred\n("+e.returnMsg+")").open()}))},o.reqNftInfo=function(t,e){var n=this;L.reqNftInfo(t,e,(function(r){if("0"===r.returnCode){var i,o=0,a=null==(i=r.extension)?void 0:i.attributes;if(null==a||a.forEach((function(t){switch(String(t.trait_type)){case"paddle_width":o+=Number(t.value);break;case"paddle_count":o+=100*Number(t.value);break;case"ball_count":o+=10*Number(t.value)}})),n.nftListMap.set(e,a),n.nftListGradeMap.set(e,o),n.getNftIdx++,n.getNftIdx===n.getNftTotalCnt)n.nftSortArray=Array.from(n.nftListGradeMap).sort((function(t,e){return e[1]-t[1]})),n.makePaddleBox();else{var l=n.getNftTokenList[n.getNftIdx];n.reqNftInfo(t,String(l))}}else new N(w.OK,"Caution","A server error has occurred\n("+r.returnMsg+")").open()}))},o.makePaddleBox=function(){var t=this;c.stopAll(),this.nftListNode.removeAllChildren(),this.btnArrow[0].node.active=!1,this.btnArrow[1].node.active=!1;var e=this.nftSortArray.length;this.nftMaxPage=Math.trunc((e-1)/3);for(var n=3*this.nftCurPage,r=n+Math.min(e-n,3),i=0,o=0,a=function(){var e=t.nftSortArray[l][0],n=t.nftListMap.get(e),r=h(t.paddleBox);r.getChildByName("TokenID").getComponent(s).string=e,t.addButton(r,o.toString()),t.nftListNode.addChild(r);var a=(r.getComponent(f).width+20)*o;r.setPosition(new v(a,0,0));var d=r.getChildByName("Extension").getComponent(u),p="",c=["","",""],g=0;null==n||n.forEach((function(e){"paddle_count"===e.trait_type?i=Number(e.value):"paddle_width"===e.trait_type&&(g=Number(e.value));var n=t.getTypeUIStr(String(e.trait_type));if(void 0!==n){var r=n+" <b>"+e.value+"</b>";"Ball"!==n&&(r+="  |  ");var o=t.getTypeUIIdx(String(e.trait_type));void 0!==o&&(c[o]=r)}}));for(var y=0;y<3;y++)p+=c[y];d.string="<color=#000000>"+p+"</color>";var m=Math.max(0,Math.min(i-1,2)),C=h(t.paddles[m]);if(null!==C){var N=g/[100,120,140][m];1!==N&&(C.scale=new v(N,1)),r.getChildByName("Paddle").addChild(C);var w=b(C.position).by(1,new v(0,10),{easing:"smooth",onUpdate:function(t,e){C.position=t}}),L=b(C.position).by(1,new v(0,-10),{easing:"smooth",onUpdate:function(t,e){C.position=t}});b(C.position).sequence(w,L).repeatForever().start();var x=h(t.shadows[m]);if(null!==x){r.getChildByName("Shadow").addChild(x);var T=b(x).to(1,{scale:new v(.5,1,0)}),S=b(x).to(1,{scale:new v(1,1,0)});b(x).sequence(T,S).repeatForever().start()}}t.paddleSltIdx===3*t.nftCurPage+o&&(t.paddleSelectorNode=h(t.paddleBoxSelector),r.addChild(t.paddleSelectorNode)),o++},l=n;l<r;l++)a();this.pageText.string="<color=#000000><b>"+(this.nftCurPage+1)+" </b></color><color=#a9a9a9>/ "+(this.nftMaxPage+1)+"</color>",this.nftMaxPage>0&&(this.nftCurPage>0&&(this.btnArrow[0].node.active=!0),this.nftCurPage<this.nftMaxPage&&(this.btnArrow[1].node.active=!0))},o.addButton=function(t,e){var n=new g.EventHandler;n.target=this.node,n.component="Wallet",n.handler="paddleBoxSltCB",n.customEventData=e,t.getComponent(d).clickEvents.push(n)},o.paddleBoxSltCB=function(t,e){var n=t.target,r=parseInt(e);if(this.paddleSltIdx!=r){null!==this.paddleSelectorNode&&this.paddleSelectorNode.removeFromParent(),this.paddleSelectorNode=h(this.paddleBoxSelector),n.addChild(this.paddleSelectorNode),this.paddleSltIdx=3*this.nftCurPage+r;var i=this.nftSortArray[this.paddleSltIdx][0];y.setPaddleAttr(this.nftListMap.get(i))}},o.getTypeUIStr=function(t){return"paddle_width"===t?"Width":"paddle_count"===t?"Count":"ball_count"===t?"Ball":void 0},o.getTypeUIIdx=function(t){return"paddle_width"===t?1:"paddle_count"===t?0:"ball_count"===t?2:void 0},o.isSltNft=function(){return this.paddleSltIdx>=0},e}(g)).prototype,"rankNode",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),j=e(V.prototype,"nftListNode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(V.prototype,"progressNode",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(V.prototype,"idLabel",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(V.prototype,"addressLabel",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(V.prototype,"assetAmounts",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),$=e(V.prototype,"rankText",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=e(V.prototype,"pageText",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=e(V.prototype,"scoreLabel",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=e(V.prototype,"dateLabel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rt=e(V.prototype,"btnLogout",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=e(V.prototype,"btnCopy",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ot=e(V.prototype,"btnConvert",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at=e(V.prototype,"btnLeaderboard",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lt=e(V.prototype,"btnMintMore",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),st=e(V.prototype,"btnArrow",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ut=e(V.prototype,"paddleBox",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),dt=e(V.prototype,"paddleBoxSelector",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pt=e(V.prototype,"paddles",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ct=e(V.prototype,"shadows",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),H=V))||H));o._RF.pop()}}}));

System.register("chunks:///_virtual/XplaJs.ts",["./rollupPluginModLoBabelHelpers.js","cc","./bundle.mjs_cjs=&original=.js","./bundle.js"],(function(e){var n,t,r,c;return{setters:[function(e){n=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){r=e.cclegacy},null,function(e){c=e.default}],execute:function(){r._RF.push({},"ea450yKT/9AHqAizanvPeGc","XplaJs",void 0);var a=e("ContractMsgType",function(e){return e[e.CW20_TOKEN=0]="CW20_TOKEN",e[e.CW721_NFT=1]="CW721_NFT",e[e.DATA_SAVE=2]="DATA_SAVE",e}({})),u=e("XplaJs",function(){function e(){}e.getInstance=function(){return null===e.instance&&(e.instance=new e),e.instance},e.getLcdClient=function(){return null===e.lcd&&(e.lcd=new c.LCDClient({URL:"https://cube-lcd.xpla.dev",chainID:"cube_47-5"})),e.lcd};var r=e.prototype;return r.getLcdChainID=function(){return e.getLcdClient().config.chainID},r.getWalletAddress=function(e){return new c.MnemonicKey({mnemonic:e}).accAddress},r.getAccountInfo=function(){var r=n(t().mark((function n(r){var a,u,s,i,o;return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=new c.MnemonicKey({mnemonic:r}),s=e.getLcdClient().wallet(u),i=JSON.parse(String(null==(a=u.publicKey)?void 0:a.toJSON())),n.next=5,s.sequence();case 5:return o=n.sent,n.abrupt("return",{pubKey:i.key,seqNum:o});case 7:case"end":return n.stop()}}),n)})));return function(e){return r.apply(this,arguments)}}(),r.getSignTx=function(){var r=n(t().mark((function n(r,a){var u,i,o,l,p,d,g;return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=new c.MnemonicKey({mnemonic:r}),i=e.getLcdClient().wallet(u),o=e.getLcdClient().tx.decode(a),n.next=5,i.accountNumber();case 5:return l=n.sent,n.next=8,i.sequence();case 8:return p=n.sent,d={chainID:s.getLcdChainID(),accountNumber:l,sequence:p,signMode:c.SignatureV2.SignMode.SIGN_MODE_LEGACY_AMINO_JSON},n.next=12,u.signTx(o,d);case 12:return g=n.sent,n.abrupt("return",e.getLcdClient().tx.encode(g));case 14:case"end":return n.stop()}}),n)})));return function(e,n){return r.apply(this,arguments)}}(),r.createWallet=function(){return(new c.MnemonicKey).mnemonic},r.getXplaBalance=function(){var r=n(t().mark((function n(r){var c;return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.getLcdClient().bank.balance(r);case 3:if(void 0!==(c=n.sent)[0].get("axpla")){n.next=6;break}return n.abrupt("return","0");case 6:return n.abrupt("return",c[0].get("axpla").amount.toString());case 9:n.prev=9,n.t0=n.catch(0),console.log("getXplaBalance error : ",n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return r.apply(this,arguments)}}(),r.getTokenBalance=function(){var r=n(t().mark((function n(r){var c;return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.getLcdClient().wasm.contractQuery(this.getExecuteAddress(a.CW20_TOKEN),{balance:{address:r}});case 3:return c=n.sent,n.abrupt("return",c.balance.toString());case 7:n.prev=7,n.t0=n.catch(0),console.log("getTokenBalance error : ",n.t0);case 10:case"end":return n.stop()}}),n,this,[[0,7]])})));return function(e){return r.apply(this,arguments)}}(),r.queryContract=function(){var r=n(t().mark((function n(r,c){var a;return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.getLcdClient().wasm.contractQuery(this.getExecuteAddress(r),c);case 3:return a=n.sent,n.abrupt("return",a);case 7:n.prev=7,n.t0=n.catch(0),console.log("queryContract error : ",n.t0,", type : ",r,", msg : ",c);case 10:case"end":return n.stop()}}),n,this,[[0,7]])})));return function(e,n){return r.apply(this,arguments)}}(),r.getExecuteAddress=function(e){switch(e){case a.CW20_TOKEN:return"xpla1shxdwyus9u6tgvu6kl5tdgem4d4at9vhanq0hxyqnm4ly3wd8awqkwlcj3";case a.CW721_NFT:return"xpla1c94ss2232fm5v7cs36g5n56fd9vldflmg2l4g77qj3r86fdmqststr5eya";case a.DATA_SAVE:return"xpla19pkt7pjr4xh2lmhw522sxcnuw0wjnzwg9dyl6ju23hnyaqaj77qqpez40k"}},e}());u.instance=null,u.lcd=null;var s=e("XPLAJS",u.getInstance());r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});