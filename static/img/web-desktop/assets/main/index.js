System.register("chunks:///_virtual/Ball.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameCtrl.ts","./BricksObjectPool.ts","./Utils.ts","./Brick.ts"],(function(t){var e,i,s,o,l,n,a,c,r,d,h,y,_,p,u;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,s=t._decorator,o=t.director,l=t.RigidBody2D,n=t.CircleCollider2D,a=t.Contact2DType,c=t.Vec3,r=t.v2,d=t.Vec2,h=t.Component},function(t){y=t.GameCtrl},function(t){_=t.BricksObjectPool},function(t){p=t.UTILS},function(t){u=t.Brick}],execute:function(){var B;i._RF.push({},"1bf53TUXMpJxKJ7bUba/EXB","Ball",void 0);var b=s.ccclass,g=(s.property,t("ColliderTag",function(t){return t[t.BALL=0]="BALL",t[t.WALL=1]="WALL",t[t.BRICK=2]="BRICK",t[t.PADDLE=3]="PADDLE",t[t.BALL_OUT=4]="BALL_OUT",t[t.BRICK_ALLY=5]="BRICK_ALLY",t[t.ITEM=6]="ITEM",t[t.BALL_ENEMY=7]="BALL_ENEMY",t}({})));t("Ball",b("Ball")(B=function(t){function i(){for(var e,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))||this).gameCtrl=null,e.bricksObjPool=null,e.ball_idx=0,e.ball_speed=0,e.ball_adjust_speed=0,e.ball_prevVelocity=new d,e.isMoving=!1,e.rigidBody=null,e.isEnemyBall=!1,e}e(i,t);var s=i.prototype;return s.onLoad=function(){this.gameCtrl=o.getScene().getComponentInChildren(y),this.bricksObjPool=o.getScene().getComponentInChildren(_),this.rigidBody=this.node.getComponent(l);var t=this.node.getComponent(n);t&&t.on(a.BEGIN_CONTACT,this.onBeginContact,this)},s.onBeginContact=function(t,e,i){switch(e.tag){case g.BRICK:this.checkVelocity(t),this.bricksObjPool.contactBricksLayer(e);break;case g.BRICK_ALLY:this.checkVelocity(t),e.node.getComponent(u).damage(),this.isEnemyBall&&this.node.destroy();break;case g.PADDLE:this.checkVelocity(t);break;case g.BALL_OUT:this.isEnemyBall?this.node.destroy():this.gameCtrl.destroyBall(this.ball_idx)}},s.moveStart=function(t,e,i){this.rigidBody.wakeUp();var s=new c;this.ball_speed=e?10:22,s.x=this.ball_speed*i.x,s.y=this.ball_speed*i.y,this.ball_adjust_speed=this.ball_speed/2,this.rigidBody.linearVelocity=r(s.x,s.y),this.isMoving=!0,this.ball_idx=t,this.isEnemyBall=e},s.moveStop=function(t){!0===t?(this.ball_prevVelocity=this.rigidBody.linearVelocity.clone(),this.rigidBody.sleep(),this.isMoving=!1):(this.rigidBody.wakeUp(),this.rigidBody.linearVelocity=this.ball_prevVelocity,this.isMoving=!0)},s.isMove=function(){return this.isMoving},s.setPosition=function(t){0==this.isMove()&&this.node.setPosition(new c(t,this.node.position.y,0))},s.checkVelocity=function(t){var e=t.node.getComponent(l);if(e){var i=e.linearVelocity;i.x<3&&i.x>-3&&(i.x<0?i.x=-this.ball_adjust_speed:i.x>0?i.x=this.ball_adjust_speed:i.x=p.getRandomInt(-this.ball_adjust_speed,this.ball_adjust_speed),e.linearVelocity=r(i.x,i.y)),i.y<3&&i.y>-3&&(i.y<0?i.y=-this.ball_adjust_speed:i.y>0?i.y=this.ball_adjust_speed:i.y=p.getRandomInt(-this.ball_adjust_speed,this.ball_adjust_speed),e.linearVelocity=r(i.x,i.y))}},i}(h))||B);i._RF.pop()}}}));

System.register("chunks:///_virtual/Brick.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BricksObjectPool.ts","./Ball.ts"],(function(t){var e,i,n,o,s,a,r,c,p,h,l;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,o=t.Vec3,s=t.BoxCollider2D,a=t.Contact2DType,r=t.instantiate,c=t.ParticleSystem2D,p=t.Component},function(t){h=t.BrickType},function(t){l=t.ColliderTag}],execute:function(){var y;i._RF.push({},"59814LQ735K7q3qIQVF4VHW","Brick",void 0);var d=n.ccclass;n.property,t("Brick",d("Brick")(y=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).type=void 0,e.hp=0,e.isEnemy=!0,e.particle=null,e.bombLineIdx=-1,e.attackableCnt=0,e}e(i,t);var n=i.prototype;return n.setProperty=function(t,e,i,n,r,c,p,l){(this.type=t,this.hp=n,this.isEnemy=r,this.particle=c,this.bombLineIdx=p,this.attackableCnt=l,this.node.setPosition(new o(e,i,0)),t==h.ALLY)&&this.node.getComponent(s).on(a.BEGIN_CONTACT,this.onBeginContact,this)},n.onBeginContact=function(t,e,n){e.tag===l.BRICK&&(this.damage(),e.node.getComponent(i).damage())},n.damage=function(){return this.type!==h.IMMORTAL&&(this.hp-=1),this.hp<0?(this.createParticle(this.node.position),this.node.destroy(),{msg:"Destroy",type:this.type,hp:-1,position:new o(this.node.position.x,this.node.parent.position.y+this.node.position.y,0),score:this.type+1,enemy:this.isEnemy,bombLineIdx:this.bombLineIdx,attackableCnt:this.attackableCnt}):{msg:"Damage",type:this.type,hp:this.hp,position:new o(this.node.position.x,this.node.parent.position.y+this.node.position.y,0),score:0,enemy:this.isEnemy,bombLineIdx:-1,attackableCnt:this.attackableCnt}},n.createParticle=function(t){var e=r(this.particle);e.parent=this.node.parent,e.setPosition(t),e.getComponent(c).duration=.5},i}(p))||y);i._RF.pop()}}}));

System.register("chunks:///_virtual/BricksObjectPool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Brick.ts","./GameData.ts","./GameCtrl.ts","./ItemMgr.ts","./Utils.ts"],(function(e){var i,t,r,n,o,s,c,a,l,d,h,k,m,b,p,f,u,g,y,B,v,C,I,N,_,S,M,L;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){c=e.cclegacy,a=e._decorator,l=e.Prefab,d=e.Node,h=e.director,k=e.Vec3,m=e.UITransform,b=e.instantiate,p=e.tween,f=e.Tween,u=e.Component,g=e.resources,y=e.JsonAsset,B=e.Size,v=e.BoxCollider2D,C=e.v3},function(e){I=e.Brick},function(e){N=e.GAMEDATA,_=e.PlayMode},function(e){S=e.GameCtrl},function(e){M=e.ItemMgr},function(e){L=e.UTILS}],execute:function(){var z,x,w,P,A,T,O,E,D,R,G,F,j;c._RF.push({},"b95cau4l8JOW6RB0Yo8kqzu","BricksObjectPool",void 0);var H=a.ccclass,U=a.property,Y=e("BrickType",function(e){return e[e.NORMAL_0=0]="NORMAL_0",e[e.NORMAL_1=1]="NORMAL_1",e[e.NORMAL_2=2]="NORMAL_2",e[e.IMMORTAL=3]="IMMORTAL",e[e.BOMB=4]="BOMB",e[e.ALLY=5]="ALLY",e}({}));e("BricksObjectPool",(z=H("BricksObjectPool"),x=U({type:l}),w=U({type:l}),P=U({type:l}),A=U({type:d}),T=U({type:l}),z((D=i((E=function(e){function i(){for(var i,t=arguments.length,o=new Array(t),s=0;s<t;s++)o[s]=arguments[s];return i=e.call.apply(e,[this].concat(o))||this,r(i,"bricks",D,n(i)),r(i,"bricks_break",R,n(i)),r(i,"particle",G,n(i)),r(i,"defenseBricksNode",F,n(i)),r(i,"rayCast",j,n(i)),i.gameCtrl=null,i.itemMgr=null,i.brickSize=null,i.brickEnemyCnt=0,i.defenseBricksOriginPos=null,i.screenHeight=0,i.infiniteStage=0,i.infiniteDiff=0,i.infiniteTimeout=null,i.moveBricksSpeed=0,i.bombLineIdx=0,i.bombLineBricks=new Map,i.bricksNodeIdx=0,i.bricksNode=[],i}t(i,e);var c=i.prototype;return c.onLoad=function(){var e=this;this.gameCtrl=h.getScene().getComponentInChildren(S),this.itemMgr=h.getScene().getComponentInChildren(M),this.defenseBricksOriginPos=new k(0,this.defenseBricksNode.position.y,0),this.screenHeight=this.node.parent.getComponent(m).height,this.bombLineBricks.clear(),this.createEnemyBricks(),this.infiniteTimeout=setInterval((function(){e.checkNextBricks()}),1e3)},c.createEnemyBricks=function(){var e=o(s().mark((function e(){var i,t,r,n=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=N.getPlayMode(),t="",!0===N.tutorial?t="data/tutorial"+N.getTutorialStage():i===_.STAGE?t="data/stage"+N.getCurStage():(this.infiniteStage++,this.infiniteStage>3&&(this.infiniteStage=1,this.infiniteDiff++),t="data/infinite"+this.infiniteStage),r=this.node.getComponent(m).width,g.load(t,y,(function(e,t){if(e)console.log("Failed to load json file : ",e);else{var o=t.json,s=o.brick_item.total_rate,c=o.brick_item.each_rate;n.itemMgr.setItemMgrInfo(n.gameCtrl,s,c);var a=0;i===_.STAGE?n.moveBricksSpeed=o.brick_dynamic.gravity_time:n.moveBricksSpeed=60;var l=0,h=0;0===n.moveBricksSpeed&&(l=o.brick_dynamic.enemy_ball_cnt,h=o.brick_dynamic.move_horizon_speed),n.bricksNode[n.bricksNodeIdx]=new d("Bricks"),n.node.addChild(n.bricksNode[n.bricksNodeIdx]),n.brickSize=new B(o.brick_size.width,o.brick_size.height);for(var f=o.bricks.length,u=0;u<f;u++){var g=o.bricks[u].length,y=[];n.moveBricksSpeed>0&&(a+=o.brick_gap.t+n.brickSize.height+o.brick_gap.v);for(var S=0;S<g;S++){var M=o.bricks[u][S].type,z=o.bricks[u][S].hp;if(M>=0){var x=b(n.bricks[M]);x.getComponent(m).setContentSize(n.brickSize),x.getComponent(v).size=n.brickSize,n.bricksNode[n.bricksNodeIdx].addChild(x);var w=o.brick_gap.l+o.brick_size.width/2+S*(o.brick_size.width+o.brick_gap.h)-r/2,P=-o.brick_gap.t-o.brick_size.height/2-u*(o.brick_size.height+o.brick_gap.v),A=x.getComponent(I);A.setProperty(M,w,P,z,!0,n.particle,n.bombLineIdx,l),M!==Y.IMMORTAL&&(n.brickEnemyCnt++,y[S]=A)}S===g-1&&(n.bombLineBricks.set(n.bombLineIdx,y),n.bombLineIdx++)}}if(n.bricksNode[n.bricksNodeIdx].setPosition(0,a),n.moveBricksSpeed>0){var T=n.bricksNode[n.bricksNodeIdx],O=n.screenHeight+a;p(T.position).by(n.moveBricksSpeed,new k(0,-O,0),{easing:"linear",onUpdate:function(e,i){T.position=e}}).call((function(){N.getPlayMode()===_.INFINITE?T.removeFromParent():n.gameCtrl.endGame()})).start()}else if(h>0){var E=-(o.brick_gap.l/2+30),D=o.brick_gap.l/2+30,R=10-h,G=p(n.node).to(R,{position:C(E,n.node.position.y,0)}),F=p(n.node).to(R,{position:C(D,n.node.position.y,0)});0===L.getRandomInt(0,1)?p(n.node).sequence(G,F).repeatForever().start():p(n.node).sequence(F,G).repeatForever().start()}}}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),c.checkNextBricks=function(){this.moveBricksSpeed>0&&N.getPlayMode()===_.INFINITE&&this.bricksNode[this.bricksNodeIdx].position.y<=-this.brickSize.height&&(this.bricksNodeIdx++,this.bricksNodeIdx>2&&(this.bricksNodeIdx=0),this.createEnemyBricks())},c.contactBricksLayer=function(e){var i=this,t=e.node.getComponent(I).damage();if("Destroy"===t.msg)!0===t.enemy&&(this.brickEnemyCnt--,this.gameCtrl.updateScore(t.score),t.type===Y.BOMB?this.procBombBricks(e,t.bombLineIdx,t.position):this.checkGameClear(t.position));else if("Damage"===t.msg){var r=Number(t.hp),n=b(this.bricks_break[r]);if(e.node.addChild(n),n.getComponent(m).setContentSize(this.brickSize),t.attackableCnt>0)if(1===L.getRandomInt(0,1)){var o=new k(t.position.x,this.node.position.y+t.position.y,0);p(this.node).delay(.1).call((function(){i.gameCtrl.createBall(i.node.parent,!0,o)})).start()}}},c.checkGameClear=function(e){var i=this;!0===this.gameCtrl.isPlayingNow()&&(this.brickEnemyCnt<=0?N.getPlayMode()===_.STAGE?this.itemMgr.checkItemExist().then((function(e){!1===e?i.gameCtrl.completeGame():i.gameCtrl.moveBallStop(!0)})):this.createEnemyBricks():this.itemMgr.createItem(e))},c.procBombBricks=function(e,i,t){var r=this;if(i>=0){var n=this.bombLineBricks.get(i),o=b(this.rayCast);this.node.addChild(o),o.setPosition(t.x,t.y,0),o.scale=new k(.1,.1,0),p(o).to(.2,{scale:new k(2,2,0)}).call((function(){n.forEach((function(e,i){if(null!==e&&null!==e.node&&!0===e.node.isValid){var t=e.damage();if("Destroy"===t.msg)r.brickEnemyCnt--,r.gameCtrl.updateScore(t.score),r.checkGameClear(t.position);else if("Damage"===t.msg){var n=Number(t.hp),s=b(r.bricks_break[n]);e.node.addChild(s),s.getComponent(m).setContentSize(r.brickSize)}}o.removeFromParent()}))})).start()}},c.resetBricks=function(){var e=this;this.node.removeAllChildren(),this.node.setPosition(0,this.node.position.y),this.brickEnemyCnt=0,this.bombLineIdx=0,this.bombLineBricks.clear(),this.infiniteStage=0,this.infiniteDiff=0,this.bricksNodeIdx=0,this.moveBricksSpeed=0,this.createEnemyBricks(),this.removeDefenseBricks(),this.infiniteTimeout=setInterval((function(){e.checkNextBricks()}),1e3)},c.stopBricks=function(){null!==this.infiniteTimeout&&clearInterval(this.infiniteTimeout),f.stopAll()},c.getItemMgr=function(){return this.itemMgr},c.getParticlePrefab=function(){return this.particle},c.createDefenseBricks=function(){this.removeDefenseBricks();for(var e=this.defenseBricksNode.getComponent(m).width,i=e/60-1,t=Y.ALLY,r=0;r<i;r++){var n=b(this.bricks[t]);this.defenseBricksNode.addChild(n);var o=-e/2+4+30+64*r;n.getComponent(I).setProperty(t,o,0,0,!1,this.particle,-1,0)}p(this.defenseBricksNode).by(.3,{position:new k(0,30)}).start()},c.removeDefenseBricks=function(){this.defenseBricksNode.removeAllChildren(),this.defenseBricksNode.position=this.defenseBricksOriginPos},i}(u)).prototype,"bricks",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=i(E.prototype,"bricks_break",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=i(E.prototype,"particle",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=i(E.prototype,"defenseBricksNode",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=i(E.prototype,"rayCast",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=E))||O));c._RF.pop()}}}));

System.register("chunks:///_virtual/Bullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Ball.ts"],(function(t){var o,n,e,r,c,i,l;return{setters:[function(t){o=t.inheritsLoose},function(t){n=t.cclegacy,e=t._decorator,r=t.BoxCollider2D,c=t.Contact2DType,i=t.Component},function(t){l=t.ColliderTag}],execute:function(){var s;n._RF.push({},"7bed1iYU2pFFrp45Dol6cw3","Bullet",void 0);var a=e.ccclass;e.property,t("Bullet",a("Bullet")(s=function(t){function n(){for(var o,n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return(o=t.call.apply(t,[this].concat(e))||this).bricksObjPool=null,o}o(n,t);var e=n.prototype;return e.onLoad=function(){var t=this.getComponent(r);t&&t.on(c.BEGIN_CONTACT,this.onBeginContact,this)},e.setBricksObjPool=function(t){this.bricksObjPool=t},e.onBeginContact=function(t,o,n){o.tag===l.BRICK?(this.bricksObjPool.contactBricksLayer(o),t.node.destroy()):o.tag===l.WALL&&t.node.destroy()},n}(i))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/GameComplete.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameCtrl.ts","./GameData.ts","./Popup.ts","./XplaJs.ts","./SceneMgr.ts"],(function(t){var e,n,a,o,r,i,l,c,s,u,p,g,f,C,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,a=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,i=t._decorator,l=t.Button,c=t.director,s=t.Component},function(t){u=t.GameCtrl},function(t){p=t.GAMEDATA},function(t){g=t.Popup},function(t){f=t.XPLAJS,C=t.ContractMsgType},function(t){m=t.SCENEMGR}],execute:function(){var h,d,v,y,S;r._RF.push({},"6f7a8dX01dEN6t8TzY12++b","GameComplete",void 0);var _=i.ccclass,b=i.property;t("GameComplete",(h=_("GameComplete"),d=b({type:l}),h((S=e((y=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r))||this,a(e,"btn_next",S,o(e)),e.gameCtrl=null,e}n(e,t);var r=e.prototype;return r.onLoad=function(){var t=this;this.gameCtrl=c.getScene().getComponentInChildren(u),this.btn_next.node.on(l.EventType.CLICK,(function(){t.saveData()}),this)},r.saveData=function(){if(!0===p.tutorial)this.okCallback();else{var t={save_data:{user:f.walletAddress,last_stage:p.getCurStage(),high_score:this.gameCtrl.getTopUIScore(),game_gold:this.gameCtrl.getTopUIGold()}};g.contractExecPopup("Save Data","Do you want to write game data to xpla chain?",C.DATA_SAVE,t,this.node,this.okCallback)}},r.okCallback=function(){!0===p.tutorial?m.nextScene("tutorial"):c.getScene().getComponentInChildren(u).nextStageEffect()},e}(s)).prototype,"btn_next",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=y))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/GameCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Ball.ts","./GameData.ts","./GameOver.ts","./BricksObjectPool.ts","./GameComplete.ts","./PaddleMgr.ts","./TopUI.ts","./Utils.ts"],(function(t){var e,a,i,n,o,l,s,r,c,p,h,d,u,f,m,g,b,_,v,y,I,S,B,P,C,M,U,E,T,w,x,N;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,l=t._decorator,s=t.Prefab,r=t.Node,c=t.Button,p=t.director,h=t.Canvas,d=t.UITransform,u=t.tween,f=t.Label,m=t.input,g=t.Input,b=t.KeyCode,_=t.instantiate,v=t.Vec2,y=t.Vec3,I=t.Tween,S=t.Component},function(t){B=t.Ball},function(t){P=t.GAMEDATA,C=t.PlayMode},function(t){M=t.GameOver},function(t){U=t.BricksObjectPool},function(t){E=t.GameComplete},function(t){T=t.PaddleMgr},function(t){w=t.TopUI,x=t.TOPUI_KIND},function(t){N=t.UTILS}],execute:function(){var G,O,k,L,z,A,D,K,j,F,R,V,W,Y,H,q,Q,X,J,Z,$,tt,et,at,it,nt,ot;o._RF.push({},"ceb63uWNClCqYEW4TwF9Dt0","GameCtrl",void 0);var lt=l.ccclass,st=l.property;t("GameCtrl",(G=lt("GameCtrl"),O=st({type:w}),k=st({type:s}),L=st({type:s}),z=st({type:T}),A=st({type:M}),D=st({type:E}),K=st({type:r}),j=st({type:U}),F=st({type:r}),R=st({type:r}),V=st({type:r}),W=st({type:c}),G((q=e((H=function(t){function e(){for(var e,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o))||this,i(e,"topUI",q,n(e)),i(e,"ballPrefab",Q,n(e)),i(e,"enemyBallPrefab",X,n(e)),i(e,"paddleMgr",J,n(e)),i(e,"gameOver",Z,n(e)),i(e,"gameComplete",$,n(e)),i(e,"bonusCompleteNode",tt,n(e)),i(e,"bricksObjPool",et,n(e)),i(e,"nextStageEffectNode",at,n(e)),i(e,"defenseBrickNode",it,n(e)),i(e,"stageIntro",nt,n(e)),i(e,"btnStart",ot,n(e)),e.canvas=null,e.moveBallMap=new Map,e.stageIntroLabel=null,e.has_ball_max=0,e.dead_ball_cnt=0,e.cur_ball_cnt=0,e.isPlaying=!1,e.screen_width=0,e.paddle_pos_min=0,e.paddle_pos_max=0,e.itemDuration=20,e}a(e,t);var o=e.prototype;return o.onLoad=function(){var t=this;this.initListener();var e=p.getScene();this.canvas=e.getComponentInChildren(h),this.screen_width=this.canvas.getComponent(d).width,this.setPaddleWidth(),this.has_ball_max=P.getPaddleAttr().start_has_ball,this.topUI.updateTopUI(x.LIFE,this.has_ball_max-this.dead_ball_cnt,!1),!0===P.tutorial?(this.btnStart.node.on(c.EventType.CLICK,(function(){t.isPlaying=!0,t.stageIntro.active=!1}),this),u(this.node).delay(.2).call((function(){t.stageIntroLabel=t.stageIntro.getChildByName("Stage").getComponent(f),t.stageIntroShow()})).start()):(this.stageIntro.active=!1,this.isPlaying=!0)},o.stageIntroShow=function(){var t=this,e="STAGE",a=e.length,i=0,n=setInterval((function(){if(i<a){var o=e.slice(0,i+1);t.stageIntroLabel.string=o,i++}else{clearInterval(n);var l=P.getTutorialStage();t.stageIntroLabel.string+=" "+l,t.btnStart.node.active=!0}}),200)},o.setPaddleWidth=function(){var t=this.paddleMgr.getContentWidth()/2;this.paddle_pos_min=t-this.screen_width/2,this.paddle_pos_max=this.screen_width/2-t},o.initListener=function(){m.on(g.EventType.TOUCH_START,this.onTouchStart,this),m.on(g.EventType.TOUCH_MOVE,this.onPaddleMove,this),m.on(g.EventType.MOUSE_MOVE,this.onPaddleMove,this),m.on(g.EventType.KEY_DOWN,this.onKeyStart,this)},o.onTouchStart=function(t){!0===this.isPlaying&&this.createBall(this.canvas.node,!1)},o.onPaddleMove=function(t){if(!0===this.isPlaying){var e=t.getUILocation().x-this.screen_width/2;e=Math.max(this.paddle_pos_min,e),e=Math.min(e,this.paddle_pos_max),this.paddleMgr.setPosition(e)}},o.onKeyStart=function(t){switch(t.keyCode){case b.KEY_Q:case b.BACKSPACE:this.endGame();break;case b.KEY_N:P.getPlayMode()===C.STAGE&&this.completeGame();break;case b.KEY_X:this.paddleMgr.setImmortal(!0);break;case b.KEY_C:this.paddleMgr.setImmortal(!1)}},o.createBall=function(t,e,a){if(e){var i=_(this.enemyBallPrefab);i.setPosition(a),i.parent=t;var n=Math.random(),o=0===N.getRandomInt(0,1),l=new v(o?n:-n,-1);i.getComponent(B).moveStart(this.cur_ball_cnt,e,l)}else if(this.cur_ball_cnt<this.has_ball_max){var s=_(this.ballPrefab);s.setPosition(new y(this.paddleMgr.node.position.x,this.paddleMgr.node.position.y+30,0)),s.parent=t,this.moveBallMap.set(this.cur_ball_cnt,s);var r=this.paddleMgr.getBallVector();s.getComponent(B).moveStart(this.cur_ball_cnt,e,r),this.cur_ball_cnt++,this.cur_ball_cnt>=this.has_ball_max&&this.paddleMgr.setBallDirection(!1)}},o.destroyBall=function(t){var e=this.moveBallMap.get(t);e&&(this.moveBallMap.delete(t),e.destroy(),this.dead_ball_cnt++,this.topUI.updateTopUI(x.LIFE,this.has_ball_max-this.dead_ball_cnt,!1),this.dead_ball_cnt>=this.has_ball_max&&0===this.moveBallMap.size&&this.endGame())},o.resetGame=function(t){!0===t?this.destroyAllBall():this.topUI.resetTopUI(!0,!0,!0),this.gameOver.node.active=!1,this.gameComplete.node.active=!1,this.has_ball_max=P.getPaddleAttr().start_has_ball;var e=P.getCurStage();this.topUI.updateTopUI(x.STAGE,e,!1),this.bricksObjPool.resetBricks(),this.moveBallMap.clear(),this.cur_ball_cnt=0,this.dead_ball_cnt=0,this.isPlaying=!0,this.paddleMgr.resetPaddle(),this.topUI.updateTopUI(x.LIFE,this.has_ball_max-this.dead_ball_cnt,!1)},o.endGame=function(){!0===this.isPlaying&&(this.isPlaying=!1,I.stopAll(),this.gameOver.node.active=!0,this.moveBallStop(!0),this.bricksObjPool.getItemMgr().setItemsStop(!0),this.bricksObjPool.stopBricks())},o.completeGame=function(){!0===this.isPlaying&&(I.stopAll(),this.isPlaying=!1,this.gameComplete.node.active=!0,P.nextStage(),this.moveBallStop(!0),u(this.node).stop(),this.paddleMgr.resetBullet())},o.nextStageEffect=function(){var t=this;this.gameOver.node.active=!1,this.gameComplete.node.active=!1,this.destroyAllBall(),this.nextStageEffectNode[0].active=!0,this.nextStageEffectNode[1].active=!0,u(this.nextStageEffectNode[0].position).to(.3,new y(0,0,0),{easing:"smooth",onUpdate:function(e,a){t.nextStageEffectNode[0].position=e}}).start(),u(this.nextStageEffectNode[1].position).to(.3,new y(0,0,0),{easing:"smooth",onUpdate:function(e,a){t.nextStageEffectNode[1].position=e}}).start(),u(this.node).delay(.5).call((function(){t.nextGame()})).start()},o.nextGame=function(){var t=this;this.resetGame(!0),u(this.nextStageEffectNode[0].position).to(.3,new y(-this.screen_width/2,0,0),{easing:"smooth",onUpdate:function(e,a){t.nextStageEffectNode[0].position=e}}).call((function(){t.nextStageEffectNode[0].active=!1})).start(),u(this.nextStageEffectNode[1].position).to(.3,new y(this.screen_width/2,0,0),{easing:"smooth",onUpdate:function(e,a){t.nextStageEffectNode[1].position=e}}).call((function(){t.nextStageEffectNode[1].active=!1})).start()},o.isPlayingNow=function(){return this.isPlaying},o.moveBallStop=function(t){null!==this.moveBallMap&&this.moveBallMap.size>0&&this.moveBallMap.forEach((function(e){e&&e.getComponent(B).moveStop(t)}))},o.destroyAllBall=function(){this.moveBallMap.size>0&&this.moveBallMap.forEach((function(t){t&&t.destroy()}))},o.getTopUIPos=function(t){return this.topUI.getTopUIPos(t)},o.getTopUIScore=function(){return this.topUI.getCurScore()},o.getTopUIGold=function(){return this.topUI.getEarnedGold()},o.updateScore=function(t){var e=this.moveBallMap.size;this.topUI.updateTopUI(x.SCORE,e+t,!0)},o.updateToken=function(t){this.topUI.updateTopUI(x.TOKEN,t,!0)},o.updateGold=function(t){this.topUI.updateTopUI(x.GOLD,t,!0)},o.updateLife=function(t){this.has_ball_max+=t,this.topUI.updateTopUI(x.LIFE,this.has_ball_max-this.dead_ball_cnt,!0),this.cur_ball_cnt<this.has_ball_max&&this.paddleMgr.setBallDirection(!0)},o.updateBonusStr=function(t){this.topUI.updateTopUI(x.BONUS_STR,t,!0),this.checkBonusComplete()},o.hugeBall=function(){var t=this;this.moveBallMap.forEach((function(t){t&&u(t).to(.3,{scale:new y(2,2,0)}).start()})),u(this.node).delay(this.itemDuration).call((function(){!0===t.node.isValid&&t.moveBallMap.forEach((function(t){t&&u(t).to(.3,{scale:new y(1,1,0)}).start()}))})).start()},o.bulletPaddle=function(){this.paddleMgr.createBullet()},o.getPaddles=function(){return this.paddleMgr.getPaddles()},o.defenseBrick=function(){this.bricksObjPool.createDefenseBricks()},o.checkBonusComplete=function(){!0===this.isPlaying&&!0===this.topUI.isCompleteBonusStr()&&this.bonusComplete()},o.bonusComplete=function(){var t=this;this.bonusCompleteNode.active=!0,u(this.bonusCompleteNode).to(.2,{scale:new y(.7,.7,0)}).to(.2,{scale:new y(.5,.5,0)}).delay(2).call((function(){t.bonusCompleteNode.active=!1,t.topUI.resetBonusStr()})).start()},e}(S)).prototype,"topUI",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(H.prototype,"ballPrefab",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(H.prototype,"enemyBallPrefab",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(H.prototype,"paddleMgr",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(H.prototype,"gameOver",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(H.prototype,"gameComplete",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=e(H.prototype,"bonusCompleteNode",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=e(H.prototype,"bricksObjPool",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at=e(H.prototype,"nextStageEffectNode",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),it=e(H.prototype,"defenseBrickNode",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=e(H.prototype,"stageIntro",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ot=e(H.prototype,"btnStart",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=H))||Y));o._RF.pop()}}}));

System.register("chunks:///_virtual/GameData.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"f863dqHSShP5qo06QocElzc","GameData",void 0);var i=t("PlayMode",function(t){return t[t.STAGE=0]="STAGE",t[t.INFINITE=1]="INFINITE",t}({})),r=t("GameData",function(){function t(){this.playMode=i.STAGE,this.curStage=1,this.highScore=0,this.earnToken=0,this.paddleAttr=void 0,this.isTutorial=!1,this.tutorialStage=1,this.tutorialStep=0,this.tutorialAddress=null,this.tutorialMnemonic=null}t.getInstance=function(){return null===t.instance&&(t.instance=new t),t.instance};var n=t.prototype;return n.getPlayMode=function(){return this.playMode},n.setPlayMode=function(t){this.playMode=t},n.setPaddleAttr=function(t){var e=this;this.paddleAttr={width:150,count:1,start_has_ball:5},t.length>0&&t.forEach((function(t){switch(t.trait_type){case"width":e.paddleAttr.width=parseInt(t.value);break;case"count":e.paddleAttr.count=parseInt(t.value);break;case"start_has_ball":e.paddleAttr.start_has_ball=parseInt(t.value)}}))},n.getPaddleAttr=function(){return this.paddleAttr},n.getCurStage=function(){return this.curStage},n.setCurStage=function(t){this.curStage=t},n.nextStage=function(){var t=this.getCurStage()+1;t>10&&(t=1),this.curStage=t,console.log(">>>> nextStage : ",this.curStage)},n.resetStage=function(){this.curStage=1},n.setHighScore=function(t){t>this.highScore&&(this.highScore=t)},n.getHighScore=function(){return this.highScore},n.getEarnedToken=function(){return this.earnToken},n.setEarnedToken=function(t){this.earnToken=t},n.addEarnedToken=function(t){return this.earnToken+=t,this.earnToken},n.getTutorialStage=function(){return this.tutorialStage},n.setTutorialStage=function(t){this.tutorialStage=t},n.getTutorialStep=function(){return this.tutorialStep},n.setTutorialStep=function(t){this.tutorialStep=t},n.getTutorialAddress=function(){return this.tutorialAddress},n.setTutorialAddress=function(t){this.tutorialAddress=t},n.getTutorialMnemonic=function(){return this.tutorialMnemonic},n.setTutorialMnemonic=function(t){this.tutorialMnemonic=t},n.resetTutorial=function(){this.isTutorial=!1,this.tutorialStage=1,this.tutorialStep=0},e(t,[{key:"tutorial",get:function(){return this.isTutorial},set:function(t){this.isTutorial=t}}]),t}());r.instance=null;t("GAMEDATA",r.getInstance());n._RF.pop()}}}));

System.register("chunks:///_virtual/GameOver.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SceneMgr.ts","./GameCtrl.ts","./GameData.ts","./XplaJs.ts"],(function(e){var t,n,r,o,i,a,l,c,s,u,p,f,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,l=e.Button,c=e.director,s=e.Component},function(e){u=e.SCENEMGR},function(e){p=e.GameCtrl},function(e){f=e.GAMEDATA},function(e){m=e.XPLAJS}],execute:function(){var y,C,b,v,h,g,d;i._RF.push({},"1b120cCkv9NeqPtfss4kxsu","GameOver",void 0);var G=a.ccclass,_=a.property;e("GameOver",(y=G("GameOver"),C=_({type:l}),b=_({type:l}),y((g=t((h=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,r(t,"btn_yes",g,o(t)),r(t,"btn_no",d,o(t)),t.gameCtrl=null,t}n(t,e);var i=t.prototype;return i.onLoad=function(){var e=this;this.gameCtrl=c.getScene().getComponentInChildren(p),this.btn_yes.node.on(l.EventType.CLICK,(function(){e.gameCtrl.resetGame(!1)}),this),this.btn_no.node.on(l.EventType.CLICK,(function(){e.okCallback()}),this)},i.okCallback=function(){f.resetStage(),!0===f.tutorial?u.nextScene("tutorial"):!0===m.isConnectedWallet?u.nextScene("wallet"):u.nextScene("menu")},t}(s)).prototype,"btn_yes",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=t(h.prototype,"btn_no",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=h))||v));i._RF.pop()}}}));

System.register("chunks:///_virtual/Item.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Ball.ts","./ItemMgr.ts","./Paddle.ts"],(function(t){var e,n,o,i,s,c,a,r,d,_,l,B,S;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,i=t.BoxCollider2D,s=t.Contact2DType,c=t.RigidBody2D,a=t.tween,r=t.Vec3,d=t.ERigidBody2DType,_=t.Component},function(t){l=t.ColliderTag},function(t){B=t.ItemMgr},function(t){S=t.Paddle}],execute:function(){var p;n._RF.push({},"2e2adIIZnpFBY8Y7dTq6ikg","Item",void 0);var u=o.ccclass,E=(o.property,t("ItemKind",function(t){return t[t.COIN=0]="COIN",t[t.HUGE_BALL=1]="HUGE_BALL",t[t.PADDLE_GUN=2]="PADDLE_GUN",t[t.LIFE=3]="LIFE",t[t.BOMB=4]="BOMB",t[t.BONUS_STR_X=5]="BONUS_STR_X",t[t.BONUS_STR_P=6]="BONUS_STR_P",t[t.BONUS_STR_L=7]="BONUS_STR_L",t[t.BONUS_STR_A=8]="BONUS_STR_A",t[t.SCORE_UP=9]="SCORE_UP",t[t.GAME_TOKEN=10]="GAME_TOKEN",t[t.DEFENSE_BRICK=11]="DEFENSE_BRICK",t[t.MAX=12]="MAX",t}({})));t("Item",u("Item")(p=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))||this).itemKind=0,e.isTweenAction=!1,e.targetPos=null,e}e(n,t);var o=n.prototype;return o.onLoad=function(){this.node.getComponent(i).on(s.BEGIN_CONTACT,this.onBeginContact,this)},o.setProperty=function(t,e,n){this.itemKind=t,this.node.setPosition(e),this.targetPos=n},o.onBeginContact=function(t,e,n){e.tag===l.PADDLE?this.itemGetProc(e):e.tag===l.BALL_OUT&&t.node.destroy()},o.itemGetProc=function(t){var e=this;switch(this.itemKind){case E.COIN:case E.LIFE:case E.BONUS_STR_X:case E.BONUS_STR_P:case E.BONUS_STR_L:case E.BONUS_STR_A:case E.SCORE_UP:case E.GAME_TOKEN:this.isTweenAction=!0,a(this.node.position).to(.5,this.targetPos,{easing:"quadIn",onUpdate:function(t,n){null!==e.node&&(e.node.position=t)}}).call((function(){try{!0===e.node.isValid&&(e.node.parent.getComponent(B).procItem(e.itemKind),e.node.destroy())}catch(t){console.log(">> item error = ",t)}})).start();break;case E.HUGE_BALL:case E.PADDLE_GUN:case E.DEFENSE_BRICK:this.node.getComponent(c).enabledContactListener=!1,a(this.node).to(.2,{scale:new r(2,2,0)}).call((function(){e.node.parent.getComponent(B).procItem(e.itemKind),e.node.destroy()})).start();break;case E.BOMB:t.node.getComponent(S).bombPaddle(!0),this.node.destroy()}},o.stopItem=function(t){if(!1===this.isTweenAction){var e=this.node.getComponent(c);e.gravityScale=t?0:.2,e.type=t?d.Static:d.Dynamic}},n}(_))||p);n._RF.pop()}}}));

System.register("chunks:///_virtual/ItemMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utils.ts","./Item.ts","./GameData.ts"],(function(e){var t,a,i,r,n,s,c,o,m,u,l,h,p,f,g,C,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,n=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){c=e.cclegacy,o=e._decorator,m=e.Prefab,u=e.instantiate,l=e.tween,h=e.Vec3,p=e.Component},function(e){f=e.UTILS},function(e){g=e.Item,C=e.ItemKind},function(e){d=e.GAMEDATA}],execute:function(){var _,I,k,E,R,S;c._RF.push({},"af34aivDOFLkpfaeCCs5iJq","ItemMgr",void 0);var T=o.ccclass,v=o.property;e("ItemMgr",(_=T("ItemMgr"),I=v({type:m}),_(((S=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return t=e.call.apply(e,[this].concat(n))||this,i(t,"items",R,r(t)),t.itemTotalRate=void 0,t.itemEachRate=void 0,t.itemExistCheck=!1,t.itemChkTime=0,t}a(t,e);var c=t.prototype;return c.setItemMgrInfo=function(e,a,i){t.gameCtrl=e,this.itemTotalRate=a,this.itemEachRate=i,this.itemExistCheck=!1,this.itemChkTime=0},c.createItem=function(e){var t=this;if(this.itemTotalRate>0){var a=f.getRandomInt(1,100);if(a<this.itemTotalRate){a=f.getRandomInt(1,100);for(var i=0,r=0,n=0;n<this.itemEachRate.length;n++){var s=this.itemEachRate[n];if(a<=s+i){r=n;break}i+=s}var c=u(this.items[r]);l(c).delay(.2).call((function(){t.node.addChild(c),c.getComponent(g).setProperty(r,e,t.targetPos(r))})).start()}}},c.setItemsStop=function(e){this.node.getComponentsInChildren(g).forEach((function(t){t&&t.stopItem(e)}))},c.procItem=function(e){switch(e){case C.COIN:t.gameCtrl.updateGold(1);break;case C.GAME_TOKEN:var a=!0===d.tutorial?50:1;t.gameCtrl.updateToken(a);break;case C.HUGE_BALL:t.gameCtrl.hugeBall();break;case C.PADDLE_GUN:t.gameCtrl.bulletPaddle();break;case C.LIFE:t.gameCtrl.updateLife(1);break;case C.BONUS_STR_X:case C.BONUS_STR_P:case C.BONUS_STR_L:case C.BONUS_STR_A:t.gameCtrl.updateBonusStr(e-C.BONUS_STR_X);break;case C.SCORE_UP:var i=f.getRandomInt(30,100);t.gameCtrl.updateScore(i);break;case C.DEFENSE_BRICK:t.gameCtrl.defenseBrick()}},c.targetPos=function(e){switch(e){case C.COIN:case C.LIFE:case C.BONUS_STR_X:case C.BONUS_STR_P:case C.BONUS_STR_L:case C.BONUS_STR_A:case C.SCORE_UP:case C.GAME_TOKEN:return t.gameCtrl.getTopUIPos(e)}return new h(0,0,0)},c.checkItemExist=function(){var e=n(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.node.getComponentsInChildren(g).length>0)){e.next=4;break}return this.itemExistCheck=!0,e.abrupt("return",!0);case 4:return e.abrupt("return",!1);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),c.update=function(e){var a=this;!0===this.itemExistCheck&&!0===t.gameCtrl.isPlayingNow()&&(this.itemChkTime+=e,this.itemChkTime>=1&&(this.itemChkTime=0,this.checkItemExist().then((function(e){!1===e&&(t.gameCtrl.completeGame(),a.itemExistCheck=!1)}))))},t}(p)).gameCtrl=null,R=t((E=S).prototype,"items",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=E))||k));c._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./Ball.ts","./Brick.ts","./BricksObjectPool.ts","./Bullet.ts","./GameComplete.ts","./GameCtrl.ts","./GameData.ts","./GameOver.ts","./Item.ts","./ItemMgr.ts","./MainMenu.ts","./NetworkMgr.ts","./Paddle.ts","./PaddleMgr.ts","./Persistant.ts","./Popup.ts","./SceneMgr.ts","./TopUI.ts","./TutorialMgr.ts","./Utils.ts","./Wallet.ts","./XplaJs.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MainMenu.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SceneMgr.ts","./XplaJs.ts","./GameData.ts","./Popup.ts"],(function(e){var n,t,i,o,r,a,u,l,c,d,p,s,b,f,y,E,h;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,u=e.Node,l=e.Button,c=e.EditBox,d=e.EventHandler,p=e.Component},function(e){s=e.SCENEMGR},function(e){b=e.XPLAJS},function(e){f=e.GAMEDATA,y=e.PlayMode},function(e){E=e.Popup,h=e.PopupType}],execute:function(){var g,m,v,M,C,N,B,I,L,S,T,w,x,D,z,O,A,G,P,K,k,R,_;r._RF.push({},"5e13fIsEL1ClKRLk26qeImb","MainMenu",void 0);var F=a.ccclass,H=a.property,J=function(e){return e[e.SELECT=0]="SELECT",e[e.MODE=1]="MODE",e[e.LOGIN=2]="LOGIN",e}(J||{});e("MainMenu",(g=F("MainMenu"),m=H({type:u}),v=H({type:u}),M=H({type:u}),C=H({type:l}),N=H({type:l}),B=H({type:l}),I=H({type:l}),L=H({type:l}),S=H({type:l}),T=H({type:c}),g((D=n((x=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return n=e.call.apply(e,[this].concat(r))||this,i(n,"selectNode",D,o(n)),i(n,"modeNode",z,o(n)),i(n,"loginNode",O,o(n)),i(n,"btnBack",A,o(n)),i(n,"btnConnect",G,o(n)),i(n,"btnAdvence",P,o(n)),i(n,"btnTutorial",K,o(n)),i(n,"btnModeStage",k,o(n)),i(n,"btnModeInfinite",R,o(n)),i(n,"edBox",_,o(n)),n.menuState=J.SELECT,n}t(n,e);var r=n.prototype;return r.onLoad=function(){var e=this;this.btnAdvence.node.on(l.EventType.CLICK,(function(){e.menuState=J.MODE,e.selectNode.active=!1,e.modeNode.active=!0,e.btnBack.node.active=!0}),this),this.btnTutorial.node.on(l.EventType.CLICK,(function(){new E(h.OK,"Info","Comming soon").open()}),this),this.btnBack.node.on(l.EventType.CLICK,(function(){e.menuState===J.LOGIN?(e.menuState=J.MODE,e.modeNode.active=!0,e.loginNode.active=!1):e.menuState===J.MODE&&(e.menuState=J.SELECT,e.selectNode.active=!0,e.modeNode.active=!1,e.btnBack.node.active=!1)}),this),this.btnModeStage.node.on(l.EventType.CLICK,(function(){e.menuState=J.LOGIN,e.modeNode.active=!1,e.loginNode.active=!0,e.showEditBox(),f.setPlayMode(y.STAGE)}),this),this.btnModeInfinite.node.on(l.EventType.CLICK,(function(){e.menuState=J.LOGIN,e.modeNode.active=!1,e.loginNode.active=!0,e.showEditBox(),f.setPlayMode(y.INFINITE)}),this),this.btnConnect.node.on(l.EventType.CLICK,(function(){var n=e.edBox.string;e.edBox.node.destroy(),b.connectWallet(n).then((function(e){f.tutorial=!1,s.nextScene("wallet")}))}),this)},r.showEditBox=function(){var e=new d;e.target=this.node,e.component="MainMenu",e.handler="onEditDidBegan",this.edBox.editingDidBegan.push(e),this.edBox.editingDidEnded.push(e),this.edBox.textChanged.push(e)},r.onEditDidBegan=function(e,n){},r.onEditDidEnded=function(e,n){},r.onTextChanged=function(e,n,t){},n}(p)).prototype,"selectNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(x.prototype,"modeNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=n(x.prototype,"loginNode",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=n(x.prototype,"btnBack",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=n(x.prototype,"btnConnect",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=n(x.prototype,"btnAdvence",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=n(x.prototype,"btnTutorial",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=n(x.prototype,"btnModeStage",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=n(x.prototype,"btnModeInfinite",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=n(x.prototype,"edBox",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=x))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/NetworkMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,o,r,c,a,s,l,i;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,o=e._decorator,r=e.resources,c=e.Prefab,a=e.instantiate,s=e.Label,l=e.BlockInputEvents,i=e.Component}],execute:function(){var u,d;t._RF.push({},"f3198oEeVJHU7PqrI/SAdr5","NetworkMgr",void 0);var g=o.ccclass,p=(o.property,e("NetworkMgr",g("NetworkMgr")(((d=function(e){function t(){for(var n,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return(n=e.call.apply(e,[this].concat(o))||this).connectNode=null,n.serverUrl="http://gw-qa-gcl.c2xstation.net:40202/",n.callBack=void 0,n}n(t,e),t.getInstance=function(){return null===t.instance&&(t.instance=new t),t.instance};var o=t.prototype;return o.reqTokenReward=function(e,n,t,o){this.callBack=o;var r={wallet:e,amount:String(n)};this.send(t,"Request tx...","wallet/tutorial-token-reward",r,4e3)},o.send=function(e,n,t,o,i){var u=this;r.load("prefabs/popup_alert",c,(function(r,c){u.connectNode=a(c),u.connectNode.getComponentInChildren(s).string=n,u.connectNode.addComponent(l),e.addChild(u.connectNode);var d=u.serverUrl+t;console.log(">> Network url : ",d),console.log(">> Network data : ",JSON.stringify(o)),fetch(d,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((function(e){if(e.ok)return e.json();throw new Error("Network Error : "+e.status)})).then((function(e){console.log("Response: ",e),"0"===e.returnCode?setTimeout((function(){u.connectNode.removeFromParent(),u.callBack(e)}),i):(u.connectNode.removeFromParent(),u.callBack(e))})).catch((function(e){console.log("Network Catch Error: ",e.message),u.connectNode.removeFromParent(),u.callBack({returnCode:"-1",returnMsg:String(e.message)})}))}))},t}(i)).instance=null,u=d))||u));e("NETWORKMGR",p.getInstance());t._RF.pop()}}}));

System.register("chunks:///_virtual/Paddle.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BricksObjectPool.ts","./Bullet.ts","./PaddleMgr.ts","./Ball.ts","./Brick.ts"],(function(t){var e,n,o,i,l,r,s,a,c,d,u,p,h,g,b,f,m,P,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){l=t.cclegacy,r=t._decorator,s=t.Prefab,a=t.director,c=t.BoxCollider2D,d=t.Contact2DType,u=t.instantiate,p=t.Vec3,h=t.UIOpacity,g=t.Component},function(t){b=t.BricksObjectPool},function(t){f=t.Bullet},function(t){m=t.PaddleMgr},function(t){P=t.ColliderTag},function(t){C=t.Brick}],execute:function(){var y,B,v,I,k,O,j;l._RF.push({},"c6f8co6I81HE6rsLY2IJKXg","Paddle",void 0);var M=r.ccclass,L=r.property;t("Paddle",(y=M("Paddle"),B=L({type:s}),v=L({type:s}),y((O=e((k=function(t){function e(){for(var e,n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return e=t.call.apply(t,[this].concat(l))||this,o(e,"bullet",O,i(e)),o(e,"gun",j,i(e)),e.bricksObjPool=null,e.paddleMgr=null,e.isImmortal=!1,e}n(e,t);var l=e.prototype;return l.onLoad=function(){this.bricksObjPool=a.getScene().getComponentInChildren(b),this.paddleMgr=a.getScene().getComponentInChildren(m),this.node.getComponent(c).on(d.BEGIN_CONTACT,this.onBeginContact,this)},l.onBeginContact=function(t,e,n){e.tag===P.BRICK?(e.node.getComponent(C).damage(),!1===this.isImmortal&&this.bombPaddle(!0)):e.tag===P.BALL_ENEMY&&(e.node.destroy(),!1===this.isImmortal&&this.bombPaddle(!0))},l.setGun=function(t){if(!0===t){var e=u(this.gun);this.node.addChild(e),e.setPosition(0,20)}else this.node.removeAllChildren()},l.createBullet=function(t,e){var n=u(this.bullet);t.addChild(n),n.setPosition(new p(e.position.x+this.node.position.x,e.position.y+40,0)),n.getComponent(f).setBricksObjPool(this.bricksObjPool)},l.bombPaddle=function(t){!0===t?(this.paddleMgr.bombPaddle(this.node.position),this.node.active=!1):this.node.active=!0},l.isPaddleActive=function(){return this.node.active},l.setImmortal=function(t){this.isImmortal=t,this.node.getComponent(h).opacity=t?120:255},e}(g)).prototype,"bullet",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(k.prototype,"gun",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=k))||I));l._RF.pop()}}}));

System.register("chunks:///_virtual/PaddleMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameData.ts","./Paddle.ts","./GameCtrl.ts"],(function(t){var e,i,l,n,a,o,r,d,s,u,c,h,p,f,m,g,P,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,l=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,r=t.Prefab,d=t.director,s=t.instantiate,u=t.Vec3,c=t.tween,h=t.misc,p=t.v2,f=t.ParticleSystem2D,m=t.Component},function(t){g=t.GAMEDATA},function(t){P=t.Paddle},function(t){b=t.GameCtrl}],execute:function(){var v,C,B,M,y,N,T,D,w;a._RF.push({},"bd2a8774s1Lr7rfN4uo7eVd","PaddleMgr",void 0);var A=o.ccclass,E=o.property;t("PaddleMgr",(v=A("PaddleMgr"),C=E({type:r}),B=E({type:r}),M=E({type:r}),v((T=e((N=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,l(e,"paddle",T,n(e)),l(e,"particle",D,n(e)),l(e,"direction",w,n(e)),e.gameCtrl=null,e.isBullet=!1,e.bulletTime=0,e.bulletDuraTime=0,e.bulletEndTime=20,e.paddleMap=new Map,e.directionNode=null,e}i(e,t);var a=e.prototype;return a.onLoad=function(){this.gameCtrl=d.getScene().getComponentInChildren(b);var t=g.getPaddleAttr(),e=t.width/100;this.paddleMap.clear();for(var i=0;i<t.count;i++){var l=s(this.paddle);this.node.addChild(l),l.scale=new u(e,1,0),this.setChildPaddlePos(t.width,t.count,l,i),this.paddleMap.set(i,l.getComponent(P))}this.gameCtrl.setPaddleWidth(),this.createBallDirection()},a.createBallDirection=function(){null===this.directionNode?this.directionNode=s(this.direction):(this.directionNode.active=!0,c(this.directionNode).stop()),this.node.addChild(this.directionNode),this.directionNode.setPosition(0,-20),this.directionNode.angle=30;var t=c(this.directionNode).to(.5,{angle:90}),e=c(this.directionNode).to(.5,{angle:150}),i=c(this.directionNode).to(.5,{angle:90}),l=c(this.directionNode).to(.5,{angle:30});c(this.directionNode).sequence(t,e,i,l).repeatForever().start()},a.getBallVector=function(){var t=h.degreesToRadians(this.directionNode.angle);return p(Math.cos(t),Math.sin(t))},a.setBallDirection=function(t){this.directionNode.active=t},a.getContentWidth=function(){var t=g.getPaddleAttr(),e=0;return this.paddleMap.forEach((function(i){null!==i&&(!0===i.isPaddleActive()&&(e+=t.width))})),e},a.setPosition=function(t){this.node.setPosition(new u(t,this.node.position.y,0))},a.setChildPaddlePos=function(t,e,i,l){i.getRotation()},a.getPaddles=function(){var t=[];return this.paddleMap.forEach((function(e){t.push(e)})),t},a.bombPaddle=function(t){var e=this,i=s(this.particle);i.parent=this.node,i.setPosition(t),i.getComponent(f).duration=.5;var l=g.getPaddleAttr();c(this.node).delay(.1).call((function(){var t=0;e.paddleMap.forEach((function(e){null!==e&&!0===e.isPaddleActive()&&t++}));var i=!0,n=0;e.paddleMap.forEach((function(a){!0===a.isPaddleActive()&&(e.setChildPaddlePos(l.width,t,a.node,n),i=!1,n++)})),i?(e.gameCtrl.destroyAllBall(),e.gameCtrl.endGame()):e.gameCtrl.setPaddleWidth()})).start()},a.resetPaddle=function(){var t=this;this.createBallDirection();var e=g.getPaddleAttr();this.paddleMap.forEach((function(i,l){null!==i&&(i.bombPaddle(!1),t.setChildPaddlePos(e.width,e.count,i.node,l))})),this.gameCtrl.setPaddleWidth(),this.resetBullet()},a.resetBullet=function(){this.isBullet=!1,this.bulletTime=0,this.bulletDuraTime=0,this.paddleMap.forEach((function(t){null!==t&&t.setGun(!1)}))},a.pauseBullet=function(){this.isBullet=!1},a.resumeBullet=function(){!1===this.isBullet&&this.bulletDuraTime>0&&(this.isBullet=!0)},a.createBullet=function(){this.isBullet=!0,this.bulletTime=0,this.bulletDuraTime=0,this.paddleMap.forEach((function(t){null!==t&&t.setGun(!0)}))},a.setImmortal=function(t){this.paddleMap.forEach((function(e){e.setImmortal(t)}))},a.update=function(t){var e=this;!0===this.isBullet&&!0===this.gameCtrl.isPlayingNow()&&(this.bulletDuraTime+=t,this.bulletDuraTime<=this.bulletEndTime?(this.bulletTime+=t,this.bulletTime>=.5&&(this.paddleMap.forEach((function(t){null!==t&&!0===t.isPaddleActive()&&t.createBullet(e.node.parent,e.node)})),this.bulletTime=0)):this.resetBullet())},e}(m)).prototype,"paddle",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(N.prototype,"particle",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(N.prototype,"direction",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=N))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/Persistant.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameData.ts","./SceneMgr.ts","./XplaJs.ts","./NetworkMgr.ts","./Utils.ts"],(function(t){var n,e,s,r,c,o,a,i,u,l;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,s=t._decorator,r=t.director,c=t.Component},function(t){o=t.GameData},function(t){a=t.SceneMgr},function(t){i=t.XplaJs},function(t){u=t.NetworkMgr},function(t){l=t.Utils}],execute:function(){var p;e._RF.push({},"af315yFZBJA54wlI4dYwiWZ","Persistant",void 0);var f=s.ccclass;s.property,t("Persistant",f("Persistant")(p=function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e.prototype.onLoad=function(){o.getInstance(),a.getInstance(),i.getInstance(),u.getInstance(),l.getInstance(),r.loadScene("menu")},e}(c))||p);e._RF.pop()}}}));

System.register("chunks:///_virtual/Popup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./XplaJs.ts"],(function(t){var e,o,n,i,p,r,a,s,c,u,l,d,h,C,f,m,E,T,y,v,O,_;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,i=t.Node,p=t.resources,r=t.SpriteFrame,a=t.Sprite,s=t.BlockInputEvents,c=t.UIOpacity,u=t.Prefab,l=t.instantiate,d=t.Vec3,h=t.director,C=t.Canvas,f=t.tween,m=t.Label,E=t.Button,T=t.UITransform,y=t.Overflow,v=t.math,O=t.Component},function(t){_=t.XPLAJS}],execute:function(){var g;o._RF.push({},"96a0dNwE3RHwrzHc0TRzBrE","Popup",void 0);var P=n.ccclass,N=(n.property,t("PopupType",function(t){return t[t.OK=0]="OK",t[t.CLOSE=1]="CLOSE",t[t.YES_OR_NO=2]="YES_OR_NO",t[t.ALERT_CENTER=3]="ALERT_CENTER",t[t.ALERT_TOP=4]="ALERT_TOP",t}({})));t("Popup",P("Popup")(g=function(t){function o(e,o,n,p,r){var a;return(a=t.call(this)||this).popupUI=null,a.title=null,a.descript=void 0,a.url=void 0,a.popupType=null,a.callback=void 0,a.contractProcCb=void 0,a.popupType=e,a.title=o,a.descript=n,a.callback=p,a.url=r,a.node=new i("Popup"),a}e(o,t);var n=o.prototype;return n.open=function(){var t=this;if(this.popupType!==N.ALERT_TOP){var e=new i("PopupBg");p.load("textures/popup_back_bg/spriteFrame",r,null,(function(t,o){e.addComponent(a).spriteFrame=o})),this.node.addChild(e),e.addComponent(s),e.addComponent(c).opacity=120}var o="";o=this.popupType===N.ALERT_CENTER||this.popupType===N.ALERT_TOP?"prefabs/popup_alert":"prefabs/popup_ui",p.load(o,u,(function(e,o){t.popupUI=l(o),t.node.addChild(t.popupUI),t.popupUI.scale=new d(.3,.3,0),h.getScene().getComponentInChildren(C).node.addChild(t.node),t.node.setSiblingIndex(9998),f(t.popupUI).to(.1,{scale:new d(1.2,1.2,0)}).to(.1,{scale:new d(1,1,0)}).call((function(){t.addContent()})).start()}))},n.close=function(t){void 0!==this.callback&&this.callback(t),this.node.removeFromParent()},o.contractExecPopup=function(t,e,n,i,r,a){var c=new o(N.YES_OR_NO,t,e,(function(t){"YES"===t?p.load("prefabs/popup_alert",u,(function(t,e){var p=l(e);p.name="Connect",p.getComponentInChildren(m).string="Connect...",p.addComponent(s),r.addChild(p),_.executeContract(n,i).then((function(t){if(r.getChildByName("Connect").destroy(),"OK"===t.result){var e="https://explorer.xpla.io/testnet/tx/"+t.txHash;new o(N.OK,"Success","Transaction was successful",(function(t){c.contractProcCb()}),e).open()}else{var n="Transaction failed. Please try again in a few minutes.\n"+t;new o(N.OK,"Fail",n,(function(t){c.contractProcCb()})).open()}})).catch((function(t){r.getChildByName("Connect").destroy();var e="Transaction failed.\nError : "+String(t);new o(N.OK,"Error",e,(function(t){c.contractProcCb()})).open()}))})):c.contractProcCb()}));c.open(),c.contractProcCb=a},o.nftMintPopup=function(t,e){new o(N.OK,t,e).open()},n.addContent=function(){var t=this;(this.popupUI.getChildByName("Title").getComponent(m).string=this.title,this.popupType===N.ALERT_TOP)?(this.popupUI.setPosition(this.popupUI.position.x,this.popupUI.position.y+300),f(this.popupUI).delay(2).call((function(){t.node.removeFromParent()})).start()):(this.popupUI.getChildByName("Descript").getComponent(m).string=this.descript,this.popupType===N.OK?this.createButton("textures/btn_ok/spriteFrame","OK"):this.popupType===N.CLOSE?this.createButton("textures/btn_close/spriteFrame","CLOSE"):this.popupType===N.YES_OR_NO&&(this.createButton("textures/btn_close/spriteFrame","NO"),this.createButton("textures/btn_ok/spriteFrame","YES")),void 0!==this.url&&f(this.node).delay(.05).call((function(){t.addUrl()})).start())},n.createButton=function(t,e){var o=this,n=new i(e);p.load(t,r,null,(function(t,e){n.addComponent(a).spriteFrame=e}));var s=n.addComponent(E);switch(s.transition=E.Transition.SCALE,s.zoomScale=1.2,s.duration=.1,this.node.addChild(n),n.on(E.EventType.CLICK,(function(){o.close(e)}),this),this.popupType){case N.OK:case N.CLOSE:n.setPosition(this.popupUI.getChildByName("Close").position);break;case N.YES_OR_NO:var c=this.popupUI.getChildByName("YesorNo").position.y;"NO"===e?n.setPosition(this.popupUI.getChildByName("YesorNo").getChildByName("No").position.x,c):"YES"===e&&n.setPosition(this.popupUI.getChildByName("YesorNo").getChildByName("Yes").position.x,c)}},n.addUrl=function(){var t=this,e=this.popupUI.getChildByName("Descript"),o=e.getComponent(T).contentSize.height,n=new i("Url");this.node.addChild(n),n.addComponent(T).anchorY=1,n.setPosition(n.position.x,e.position.y-o);var p=n.addComponent(m);p.string=this.url,p.fontSize=23,p.overflow=y.RESIZE_HEIGHT,p.color=v.Color.BLUE,p.enableWrapText=!0,p.isUnderline=!0,p.isItalic=!0,p.isBold=!0,n.getComponent(T).contentSize=new v.Size(600,50.4),n.addComponent(E).transition=E.Transition.NONE,n.on(E.EventType.CLICK,(function(){window.open(t.url,"_blank")}),this)},o}(O))||g);o._RF.pop()}}}));

System.register("chunks:///_virtual/SceneMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var e,t,o,i,r,a,c,d,s,u,l,p,h;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy,o=n._decorator,i=n.Node,r=n.UITransform,a=n.Sprite,c=n.resources,d=n.SpriteFrame,s=n.UIOpacity,u=n.director,l=n.Canvas,p=n.tween,h=n.Component}],execute:function(){var f,g;t._RF.push({},"594abk8bjFFhKa/BfIEUup+","SceneMgr",void 0);var m=o.ccclass,C=(o.property,n("SceneMgr",m("SceneMgr")(((g=function(n){function t(){return n.apply(this,arguments)||this}e(t,n),t.getInstance=function(){return null===t.instance&&(t.instance=new t),t.instance};var o=t.prototype;return o.nextScene=function(n){this.fadeOut(n)},o.addNode=function(n,e){this.node=new i("Loading"),n.addChild(this.node),this.node.setSiblingIndex(9999);var t=n.getComponent(r),o=this.node.addComponent(r);o.setContentSize(t.width,t.height),o.setAnchorPoint(.5,.5);var u=this.node.addComponent(a);c.load("textures/loading/spriteFrame",d,null,(function(n,e){u.spriteFrame=e})),this.node.addComponent(s).opacity=e},o.fadeOut=function(n){var e=this,t=u.getScene().getComponentInChildren(l);this.addNode(t.node,0);var o=this.node.getComponent(s);p(o).to(.5,{opacity:255}).call((function(){c.loadScene(n,(function(n,t){if(null!==t.scene){var o=t.scene.getComponentInChildren(l);e.addNode(o.node,255),e.node.setSiblingIndex(9999),e.fadeIn(),u.runScene(t)}}))})).start()},o.fadeIn=function(){var n=this,e=this.node.getComponent(s);p(e).to(.5,{opacity:0}).call((function(){n.node.removeFromParent()})).start()},t}(h)).instance=null,f=g))||f));n("SCENEMGR",C.getInstance());t._RF.pop()}}}));

System.register("chunks:///_virtual/TopUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameData.ts","./Item.ts"],(function(e){var t,n,i,r,o,s,a,l,c,u,h,b,p,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,a=e.Label,l=e.Node,c=e.Vec3,u=e.UIOpacity,h=e.tween,b=e.Component},function(e){p=e.GAMEDATA},function(e){S=e.ItemKind}],execute:function(){var d,g,f,L,T,I,U,y,w,N,O,E,_,k,m;o._RF.push({},"1755d0S5YRMpaM4KaQ7AOIC","TopUI",void 0);var G=s.ccclass,A=s.property,C=e("TOPUI_KIND",function(e){return e[e.SCORE=0]="SCORE",e[e.STAGE=1]="STAGE",e[e.BONUS_STR=2]="BONUS_STR",e[e.TOKEN=3]="TOKEN",e[e.GOLD=4]="GOLD",e[e.LIFE=5]="LIFE",e}({}));e("TopUI",(d=G("TopUI"),g=A({type:a}),f=A({type:a}),L=A({type:a}),T=A({type:a}),I=A({type:a}),U=A({type:l}),d((N=t((w=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,i(t,"scoreLabel",N,r(t)),i(t,"stageLabel",O,r(t)),i(t,"tokenLabel",E,r(t)),i(t,"goldLabel",_,r(t)),i(t,"lifeLabel",k,r(t)),i(t,"bonusStrNode",m,r(t)),t.bonusStr=[!1,!1,!1,!1],t.curScore=0,t.tokenUI=null,t.goldUI=null,t.earnedGold=0,t.lifeUI=null,t}n(t,e);var o=t.prototype;return o.onLoad=function(){this.tokenUI=this.node.getChildByName("Token"),this.goldUI=this.node.getChildByName("Gold"),this.lifeUI=this.node.getChildByName("Life"),this.resetTopUI(!0,!0,!0)},o.resetTopUI=function(e,t,n){!0===e&&(this.curScore=0,this.scoreLabel.string=String(this.curScore)),!0===t&&(this.earnedGold=0,this.goldLabel.string=String(this.earnedGold)),!0===n&&(this.tokenLabel.string=String(0),p.setEarnedToken(0)),this.stageLabel.string=String(p.getCurStage())},o.getTopUIPos=function(e){switch(e){case S.COIN:return this.goldUI.position;case S.LIFE:return this.lifeUI.position;case S.BONUS_STR_X:case S.BONUS_STR_P:case S.BONUS_STR_L:case S.BONUS_STR_A:return this.bonusStrNode[e-S.BONUS_STR_X].position;case S.SCORE_UP:return this.scoreLabel.node.position;case S.GAME_TOKEN:return this.tokenUI.position}},o.updateTopUI=function(e,t,n){switch(e){case C.SCORE:this.curScore+=t,this.scoreLabel.string=String(this.curScore),n&&h(this.scoreLabel.node).to(.1,{scale:new c(1.1,1.1,0)}).to(.1,{scale:new c(1,1,0)}).start();break;case C.STAGE:this.stageLabel.string=String(t);break;case C.BONUS_STR:this.bonusStr[t]=!0,this.bonusStrNode[t].getComponent(u).opacity=255,n&&this.scaleTweenAction(this.bonusStrNode[t],.1,new c(1.2,1.2,0),new c(1,1,0)).start();break;case C.TOKEN:var i=p.addEarnedToken(t);this.tokenLabel.string=String(i),n&&this.scaleTweenAction(this.tokenUI,.1,new c(1.2,1.2,0),new c(.6,.6,0)).start();break;case C.GOLD:this.earnedGold+=t,this.goldLabel.string=String(this.earnedGold),n&&this.scaleTweenAction(this.goldUI,.1,new c(1.2,1.2,0),new c(.6,.6,0)).start();break;case C.LIFE:this.lifeLabel.string=String(t),n&&this.scaleTweenAction(this.lifeUI,.1,new c(1.2,1.2,0),new c(1,1,0)).start()}},o.isCompleteBonusStr=function(){var e=!0;return this.bonusStr.forEach((function(t,n){!1===t&&(e=!1)})),e},o.resetBonusStr=function(){var e=this;this.bonusStr.forEach((function(t,n){e.bonusStr[n]=!1,e.bonusStrNode[n].getComponent(u).opacity=50}))},o.getCurScore=function(){return this.curScore},o.getEarnedGold=function(){return this.earnedGold},o.scaleTweenAction=function(e,t,n,i){return h(e).to(t,{scale:n}).to(t,{scale:i})},t}(b)).prototype,"scoreLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(w.prototype,"stageLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(w.prototype,"tokenLabel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(w.prototype,"goldLabel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(w.prototype,"lifeLabel",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(w.prototype,"bonusStrNode",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=w))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/TutorialMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./XplaJs.ts","./Utils.ts","./Popup.ts","./GameData.ts","./SceneMgr.ts","./NetworkMgr.ts"],(function(e){var t,n,o,i,r,a,l,u,p,s,c,b,C,d,g,f,h,T;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,l=e.Button,u=e.Node,p=e.Toggle,s=e.Label,c=e.Component},function(e){b=e.XPLAJS},function(e){C=e.UTILS},function(e){d=e.Popup,g=e.PopupType},function(e){f=e.GAMEDATA},function(e){h=e.SCENEMGR},function(e){T=e.NETWORKMGR}],execute:function(){var y,m,E,L,w,A,v,k,x,N,M,R,S,_,I,O,z,K,P,G,W,X,F,B,D,H,q;r._RF.push({},"de76e6fqk1B8pn0bAOjwfQr","TutorialMgr",void 0);var U=a.ccclass,j=a.property,J=function(e){return e[e.CLEAR1=0]="CLEAR1",e[e.WALLET=1]="WALLET",e[e.CLEAR2=2]="CLEAR2",e[e.TX_CONFIRM=3]="TX_CONFIRM",e[e.NFT_EXP=4]="NFT_EXP",e[e.CLEAR3=5]="CLEAR3",e}(J||{});e("TutorialMgr",(y=U("TutorialMgr"),m=j({type:l}),E=j({type:l}),L=j({type:l}),w=j({type:l}),A=j({type:l}),v=j({type:l}),k=j({type:l}),x=j({type:l}),N=j({type:l}),M=j({type:l}),R=j({type:u}),S=j({type:p}),y((O=t((I=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,o(t,"btnCreateWallet",O,i(t)),o(t,"btnCopyAddress",z,i(t)),o(t,"btnCopyMnemonic",K,i(t)),o(t,"btnGame1",P,i(t)),o(t,"btnToken",G,i(t)),o(t,"btnOk1",W,i(t)),o(t,"btnTx",X,i(t)),o(t,"btnExplorer",F,i(t)),o(t,"btnOk2",B,i(t)),o(t,"btnGame2",D,i(t)),o(t,"stepNode",H,i(t)),o(t,"toggleConfirm",q,i(t)),t.txHashCw20=null,t}n(t,e);var r=t.prototype;return r.onLoad=function(){var e=this;this.setNextStep(f.getTutorialStep()),this.btnCreateWallet.node.on(l.EventType.CLICK,(function(){var t=b.createWallet();f.setTutorialMnemonic(t),f.setTutorialAddress(b.getWalletAddress(t)),e.setNextStep(J.WALLET)}),this),this.btnCopyAddress.node.on(l.EventType.CLICK,(function(){var e=f.getTutorialAddress();null!==e&&(C.copyToClipboard(e),new d(g.ALERT_TOP,"Copied!").open())}),this),this.btnCopyMnemonic.node.on(l.EventType.CLICK,(function(){C.copyToClipboard(f.getTutorialMnemonic()),new d(g.ALERT_TOP,"Copied!").open()}),this),this.toggleConfirm.node.on("toggle",(function(t){e.toggleConfirm.isChecked=t.isChecked}),this),this.btnGame1.node.on(l.EventType.CLICK,(function(){!1===e.toggleConfirm.isChecked?new d(g.OK,"CAUTION","Copy the mnemonic to a safe place and check the checkbox").open():(f.setTutorialStage(2),f.setTutorialStep(J.CLEAR2),h.nextScene("game"))}),this),this.btnToken.node.on(l.EventType.CLICK,(function(){window.open("https://nglsena0722c.github.io/xpla-academy-dev/docs/tutorial/make-web3-game/make-cw20/","_blank")}),this),this.btnOk1.node.on(l.EventType.CLICK,(function(){null!==e.txHashCw20&&e.setNextStep(J.TX_CONFIRM)}),this),this.btnTx.node.on(l.EventType.CLICK,(function(){var t="https://explorer.xpla.io/testnet/tx/"+e.txHashCw20;window.open(t,"_blank")}),this),this.btnExplorer.node.on(l.EventType.CLICK,(function(){window.open("https://nglsena0722c.github.io/xpla-academy-dev/docs/settings/create-testnet-transaction/check-tx-in-explorer","_blank")}),this),this.btnOk2.node.on(l.EventType.CLICK,(function(){e.setNextStep(J.NFT_EXP)}),this),this.btnGame2.node.on(l.EventType.CLICK,(function(){f.setPaddleAttr([{width:100,count:2,start_has_ball:7}]),f.setTutorialStage(3),f.setTutorialStep(J.CLEAR3),h.nextScene("game")}),this)},r.setNextStep=function(e){var t=this;console.log(">>>>> tutorial step : ",e),e>=J.WALLET&&(this.stepNode[e-1].active=!1),this.stepNode[e].active=!0,f.setTutorialStep(e);var n=this.node.getChildByName("Step"+e);if(null!==n){var o=f.getTutorialAddress();if(e===J.WALLET)n.getChildByName("Address").getComponent(s).string=o,n.getChildByName("Mnemonic").getComponent(s).string=f.getTutorialMnemonic();else if(e===J.CLEAR2){var i=f.getEarnedToken();n.getChildByName("XATStr").getComponent(s).string="Got +"+i+" XAT Cw20 Token",T.reqTokenReward(o,i,this.node.parent,(function(e){console.log(">> reqTokenReward : ",e),"0"===e.returnCode?t.txHashCw20=e.txhash:new d(g.CLOSE,"Caution","A server error has occurred\n("+e.returnMsg+")").open()}))}}},t}(c)).prototype,"btnCreateWallet",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(I.prototype,"btnCopyAddress",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(I.prototype,"btnCopyMnemonic",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(I.prototype,"btnGame1",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(I.prototype,"btnToken",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(I.prototype,"btnOk1",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(I.prototype,"btnTx",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(I.prototype,"btnExplorer",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(I.prototype,"btnOk2",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(I.prototype,"btnGame2",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(I.prototype,"stepNode",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),q=t(I.prototype,"toggleConfirm",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=I))||_));r._RF.pop()}}}));

System.register("chunks:///_virtual/Utils.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"517cdEIbDZMl533HGY4AX5o","Utils",void 0);var e=t("Utils",function(){function t(){}t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance};var n=t.prototype;return n.getRandomInt=function(t,n){return t=Math.ceil(t),n=Math.floor(n),Math.floor(Math.random()*(n-t+1))+t},n.convertString=function(t,n,e){if(void 0===t)return"0";if("0"===t)return t;var o=0;return t.length<=e?(this.padStart(t,e-t.length+1,"0"),o=1):o=t.length-e,t.slice(0,o)+n+t.slice(o)},n.padStart=function(t,n,e){return t.length>=n?t:e.repeat(n-t.length)+t},n.sleep=function(t){},n.copyToClipboard=function(t){navigator.clipboard?navigator.clipboard.writeText(t).then((function(){})).catch((function(t){console.log("Failed to copy text to clipboard : ",t)})):console.log("Clipboard API is not supported in this browser")},t}());e.instance=null;t("UTILS",e.getInstance());n._RF.pop()}}}));

System.register("chunks:///_virtual/Wallet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./XplaJs.ts","./SceneMgr.ts","./GameData.ts","./Utils.ts","./Popup.ts"],(function(t){var e,n,i,r,a,o,l,u,s,c,d,p,g,h,f,m,b,S,y,C,v,w,N,A,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,l=t.Label,u=t.Prefab,s=t.Node,c=t.Button,d=t.ScrollView,p=t.UITransform,g=t.Vec2,h=t.instantiate,f=t.Vec3,m=t.Size,b=t.Component},function(t){S=t.XPLAJS,y=t.ContractMsgType},function(t){C=t.SCENEMGR},function(t){v=t.GAMEDATA,w=t.PlayMode},function(t){N=t.UTILS},function(t){A=t.Popup,_=t.PopupType}],execute:function(){var I,k,P,T,z,M,x,L,E,B,D,V,F,U,W,G,q,H,K,R,J,X,O,Y,j,Q,Z,$,tt;a._RF.push({},"b1884qF8LxJnatTH//Ghk8r","Wallet",void 0);var et=o.ccclass,nt=o.property;t("Wallet",(I=et("Wallet"),k=nt({type:l}),P=nt({type:l}),T=nt({type:l}),z=nt({type:l}),M=nt({type:l}),x=nt({type:l}),L=nt({type:u}),E=nt({type:u}),B=nt({type:s}),D=nt({type:c}),V=nt({type:c}),F=nt({type:c}),U=nt({type:c}),I((q=e((G=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,i(e,"addressLabel",q,r(e)),i(e,"xplaAmount",H,r(e)),i(e,"tokenAmount",K,r(e)),i(e,"goldAmount",R,r(e)),i(e,"highScore",J,r(e)),i(e,"chainID",X,r(e)),i(e,"cardNft",O,r(e)),i(e,"cardSelect",Y,r(e)),i(e,"scrollViewNode",j,r(e)),i(e,"btnStart",Q,r(e)),i(e,"btnBack",Z,r(e)),i(e,"btnMinting",$,r(e)),i(e,"btnConvert",tt,r(e)),e.lastStage=0,e.gameTokenValue=null,e.walletAddress=null,e.cardSltIdx=0,e.cardSltNode=null,e.cardNftMap=new Map,e}n(e,t);var a=e.prototype;return a.onLoad=function(){var t=this;this.btnStart.node.on(c.EventType.CLICK,(function(){if(v.setPaddleAttr(t.cardNftMap.get(t.cardSltIdx)),v.getPlayMode()===w.STAGE){var e=v.getCurStage();t.lastStage>e?new A(_.YES_OR_NO,"Continue Game","Do you want to continue from the saved stage?",(function(e){"YES"===e&&v.setCurStage(t.lastStage),C.nextScene("game")})).open():C.nextScene("game")}else C.nextScene("game")}),this),this.btnBack.node.on(c.EventType.CLICK,(function(){C.nextScene("menu")}),this),this.btnMinting.node.on(c.EventType.CLICK,(function(){A.nftMintPopup("Nft minting","Coming soon.")}),this),this.btnConvert.node.on(c.EventType.CLICK,(function(){A.nftMintPopup("Convert","Coming soon.")}),this),this.walletAddress=S.walletAddress.toLowerCase(),this.walletUI()},a.walletUI=function(){var t=this;this.addressLabel.string=this.walletAddress,this.chainID.string=S.getLcdChainID(),S.getXplaBalance(this.walletAddress).then((function(e){var n=N.convertString(e,".",18);t.xplaAmount.string=n})),S.getTokenBalance(this.walletAddress).then((function(e){t.gameTokenValue=e;var n=N.convertString(e,".",6);t.tokenAmount.string=n})),S.queryContract(y.DATA_SAVE,{game_data:{user:this.walletAddress}}).then((function(e){t.goldAmount.string=String(e.game_gold),t.lastStage=e.last_stage,t.highScore.string=String(e.high_score),v.setHighScore(e.high_score)})),this.nftUI()},a.nftUI=function(){var t=this,e=this.scrollViewNode.getComponent(d);e.horizontal=!0,e.vertical=!1;var n=new s;n.addComponent(p).setAnchorPoint(new g(0,1)),this.scrollViewNode.addChild(n);var i={tokens:{owner:this.walletAddress}};S.queryContract(y.CW721_NFT,i).then((function(e){var i,r=null==(i=e.tokens)?void 0:i.length;if(0===r)t.makePaddleCard(n,0);else{t.makePaddleCard(n,0);for(var a=0;a<r;a++)t.makePaddleCard(n,a+1,e.tokens[a])}})),e.content=n},a.makePaddleCard=function(t,e,n){var i=this,r=h(this.cardNft);r.getChildByName("ID").getComponent(l).string=void 0===n?"Not NFT":String(n),this.addButton(r,e.toString()),t.addChild(r);var a=r.getComponent(p).width+30,o=a*e;r.setPosition(new f(o,0,0)),t.getComponent(p).setContentSize(new m(a+o,r.getComponent(p).height)),this.cardSltIdx===e&&(this.cardSltNode=h(this.cardSelect),r.addChild(this.cardSltNode));var u=r.getChildByName("Name").getComponent(l),s=r.getChildByName("Trait").getComponent(l);if(void 0===n){u.string="Normal_Paddle";this.cardNftMap.set(e,{width:150,count:1,start_has_ball:5}),s.string="width : 150\ncount : 1\nstart_has_ball : 5"}else{var c={all_nft_info:{token_id:n}};S.queryContract(y.CW721_NFT,c).then((function(t){var n,r,a,o;u.string=String(null==(n=t.info)||null==(r=n.extension)?void 0:r.name);var l="",c=null==(a=t.info)||null==(o=a.extension)?void 0:o.attributes;null==c||c.forEach((function(t){var e=t.trait_type+" : "+t.value+"\n";l+=e})),i.cardNftMap.set(e,c),s.string=l}))}},a.addButton=function(t,e){var n=new b.EventHandler;n.target=this.node,n.component="Wallet",n.handler="cardSltCB",n.customEventData=e,t.getComponent(c).clickEvents.push(n)},a.cardSltCB=function(t,e){var n=t.target,i=parseInt(e);this.cardSltIdx!=i&&(this.cardSltNode.removeFromParent(),this.cardSltNode=h(this.cardSelect),n.addChild(this.cardSltNode),this.cardSltIdx=i)},e}(b)).prototype,"addressLabel",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(G.prototype,"xplaAmount",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(G.prototype,"tokenAmount",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(G.prototype,"goldAmount",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(G.prototype,"highScore",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(G.prototype,"chainID",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(G.prototype,"cardNft",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(G.prototype,"cardSelect",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(G.prototype,"scrollViewNode",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(G.prototype,"btnStart",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(G.prototype,"btnBack",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(G.prototype,"btnMinting",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=e(G.prototype,"btnConvert",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=G))||W));a._RF.pop()}}}));

System.register("chunks:///_virtual/XplaJs.ts",["./rollupPluginModLoBabelHelpers.js","cc","./bundle.mjs_cjs=&original=.js","./Utils.ts","./bundle.js"],(function(e){var t,n,r,c,a,s;return{setters:[function(e){t=e.createClass,n=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){c=e.cclegacy},null,function(e){a=e.UTILS},function(e){s=e.default}],execute:function(){c._RF.push({},"ea450yKT/9AHqAizanvPeGc","XplaJs",void 0);var u=e("ContractMsgType",function(e){return e[e.CW20_TOKEN=0]="CW20_TOKEN",e[e.CW721_NFT=1]="CW721_NFT",e[e.DATA_SAVE=2]="DATA_SAVE",e}({})),l=e("XplaJs",function(){function e(){this.isConnectWallet=!1,this.wallet=null}e.getInstance=function(){return null===e.instance&&(e.instance=new e),e.instance},e.getLcdClient=function(){return null===e.lcd&&(e.lcd=new s.LCDClient({URL:"https://cube-lcd.xpla.dev",chainID:"cube_47-5"})),e.lcd};var c=e.prototype;return c.getLcdChainID=function(){return e.getLcdClient().config.chainID},c.getWalletAddress=function(e){return new s.MnemonicKey({mnemonic:e}).accAddress},c.createWallet=function(){return new s.MnemonicKey({mnemonic:"pretty skirt salt region lounge fall still improve movie kit return mom ill net about marble occur fringe tilt lottery stay hover flight kiwi"}).mnemonic},c.connectWallet=function(){var t=n(r().mark((function t(n){var c,a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=null,c=void 0===n?new s.MnemonicKey({mnemonic:"pretty skirt salt region lounge fall still improve movie kit return mom ill net about marble occur fringe tilt lottery stay hover flight kiwi"}):new s.MnemonicKey({mnemonic:n}),a=e.getLcdClient().wallet(c),this.isConnectWallet=!0,this.wallet=a,t.abrupt("return",a.key.accAddress);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),c.getXplaBalance=function(){var t=n(r().mark((function t(n){var c;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getLcdClient().bank.balance(n);case 3:if(void 0!==(c=t.sent)[0].get("axpla")){t.next=6;break}return t.abrupt("return","0");case 6:return t.abrupt("return",c[0].get("axpla").amount.toString());case 9:t.prev=9,t.t0=t.catch(0),console.log("getXplaBalance error : ",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),c.getTokenBalance=function(){var t=n(r().mark((function t(n){var c;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getLcdClient().wasm.contractQuery(this.getExecuteAddress(u.CW20_TOKEN),{balance:{address:n}});case 3:return c=t.sent,t.abrupt("return",c.balance.toString());case 7:t.prev=7,t.t0=t.catch(0),console.log("getTokenBalance error : ",t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),c.executeContract=function(){var t=n(r().mark((function t(n,c){var u,l,o,i,p,d,g,f,h;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=Date.now(),l=new s.MnemonicKey({mnemonic:"language filter shine veteran double album cover ball hybrid smoke planet keep crush mystery capital zero decrease play sketch balance hood pitch cousin odor"}),o=e.getLcdClient().wallet(l),i=this.getExecuteAddress(n),p=new s.MsgExecuteContract(o.key.accAddress,i,c),t.prev=5,t.next=8,o.createAndSignTx({msgs:[p]});case 8:return d=t.sent,t.next=11,e.getLcdClient().tx.broadcastSync(d);case 11:if(g=t.sent,f=Date.now(),(h=f-u)<5e3&&a.sleep(5e3-h),2!==g.raw_log.length){t.next=17;break}return t.abrupt("return",{result:"OK",txHash:g.txhash});case 17:return console.error("error res log : ",g),t.abrupt("return",{result:"FAIL",txHash:""});case 21:return t.prev=21,t.t0=t.catch(5),console.error("+++ executeContract error : ",t.t0),t.abrupt("return",{result:t.t0.toString(),txHash:""});case 25:case"end":return t.stop()}}),t,this,[[5,21]])})));return function(e,n){return t.apply(this,arguments)}}(),c.queryContract=function(){var t=n(r().mark((function t(n,c){var a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getLcdClient().wasm.contractQuery(this.getExecuteAddress(n),c);case 3:return a=t.sent,t.abrupt("return",a);case 7:t.prev=7,t.t0=t.catch(0),console.log("queryContract error : ",t.t0,", type : ",n,", msg : ",c);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}(),c.getExecuteAddress=function(e){switch(e){case u.CW20_TOKEN:return"xpla15s4ur7uq4zvqj3u846958jez0qcwpf5ssf9sqgvc38376znmrekq9e747n";case u.CW721_NFT:return"xpla1l6xl2e9lsu0cyeg6cd4s9fkr9nrt06mmfe07et7gtxg0rrrym28qqs6ynh";case u.DATA_SAVE:return"xpla19pkt7pjr4xh2lmhw522sxcnuw0wjnzwg9dyl6ju23hnyaqaj77qqpez40k"}},t(e,[{key:"walletAddress",get:function(){return this.wallet.key.accAddress}},{key:"isConnectedWallet",get:function(){return this.isConnectWallet}}]),e}());l.instance=null,l.lcd=null;e("XPLAJS",l.getInstance());c._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});